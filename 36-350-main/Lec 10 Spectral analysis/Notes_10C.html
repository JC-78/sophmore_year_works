<?xml version="1.0" encoding="utf-8" ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  <meta http-equiv="Content-Style-Type" content="text/css" />
  <meta name="generator" content="pandoc" />
  <meta name="author" content="36-350 – Statistical Computing" />
  <meta name="font-size-adjustment" content="-1" />
  <title>R: the Periodogram</title>
  <style type="text/css">
    code{white-space: pre-wrap;}
    span.smallcaps{font-variant: small-caps;}
    span.underline{text-decoration: underline;}
    div.column{display: inline-block; vertical-align: top; width: 50%;}
    div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
    ul.task-list{list-style: none;}
            pre > code.sourceCode { white-space: pre; position: relative; }
            pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
            pre > code.sourceCode > span:empty { height: 1.2em; }
            .sourceCode { overflow: visible; }
            code.sourceCode > span { color: inherit; text-decoration: inherit; }
            div.sourceCode { margin: 1em 0; }
            pre.sourceCode { margin: 0; }
            @media screen {
            div.sourceCode { overflow: auto; }
            }
            @media print {
            pre > code.sourceCode { white-space: pre-wrap; }
            pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
            }
            pre.numberSource code
              { counter-reset: source-line 0; }
            pre.numberSource code > span
              { position: relative; left: -4em; counter-increment: source-line; }
            pre.numberSource code > span > a:first-child::before
              { content: counter(source-line);
                position: relative; left: -1em; text-align: right; vertical-align: baseline;
                border: none; display: inline-block;
                -webkit-touch-callout: none; -webkit-user-select: none;
                -khtml-user-select: none; -moz-user-select: none;
                -ms-user-select: none; user-select: none;
                padding: 0 4px; width: 4em;
                color: #aaaaaa;
              }
            pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
            div.sourceCode
              {   }
            @media screen {
            pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
            }
            code span.al { color: #ff0000; font-weight: bold; } /* Alert */
            code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
            code span.at { color: #7d9029; } /* Attribute */
            code span.bn { color: #40a070; } /* BaseN */
            code span.bu { } /* BuiltIn */
            code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
            code span.ch { color: #4070a0; } /* Char */
            code span.cn { color: #880000; } /* Constant */
            code span.co { color: #60a0b0; font-style: italic; } /* Comment */
            code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
            code span.do { color: #ba2121; font-style: italic; } /* Documentation */
            code span.dt { color: #902000; } /* DataType */
            code span.dv { color: #40a070; } /* DecVal */
            code span.er { color: #ff0000; font-weight: bold; } /* Error */
            code span.ex { } /* Extension */
            code span.fl { color: #40a070; } /* Float */
            code span.fu { color: #06287e; } /* Function */
            code span.im { } /* Import */
            code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
            code span.kw { color: #007020; font-weight: bold; } /* Keyword */
            code span.op { color: #666666; } /* Operator */
            code span.ot { color: #007020; } /* Other */
            code span.pp { color: #bc7a00; } /* Preprocessor */
            code span.sc { color: #4070a0; } /* SpecialChar */
            code span.ss { color: #bb6688; } /* SpecialString */
            code span.st { color: #4070a0; } /* String */
            code span.va { color: #19177c; } /* Variable */
            code span.vs { color: #4070a0; } /* VerbatimString */
            code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
          </style>
  <style type="text/css">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
  </style>
  <script src="data:application/javascript;base64,Ly8gUGFuZG9jIDIuOSBhZGRzIGF0dHJpYnV0ZXMgb24gYm90aCBoZWFkZXIgYW5kIGRpdi4gV2UgcmVtb3ZlIHRoZSBmb3JtZXIgKHRvCi8vIGJlIGNvbXBhdGlibGUgd2l0aCB0aGUgYmVoYXZpb3Igb2YgUGFuZG9jIDwgMi44KS4KZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignRE9NQ29udGVudExvYWRlZCcsIGZ1bmN0aW9uKGUpIHsKICB2YXIgaHMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCJkaXYuc2VjdGlvbltjbGFzcyo9J2xldmVsJ10gPiA6Zmlyc3QtY2hpbGQiKTsKICB2YXIgaSwgaCwgYTsKICBmb3IgKGkgPSAwOyBpIDwgaHMubGVuZ3RoOyBpKyspIHsKICAgIGggPSBoc1tpXTsKICAgIGlmICghL15oWzEtNl0kL2kudGVzdChoLnRhZ05hbWUpKSBjb250aW51ZTsgIC8vIGl0IHNob3VsZCBiZSBhIGhlYWRlciBoMS1oNgogICAgYSA9IGguYXR0cmlidXRlczsKICAgIHdoaWxlIChhLmxlbmd0aCA+IDApIGgucmVtb3ZlQXR0cmlidXRlKGFbMF0ubmFtZSk7CiAgfQp9KTsK"></script>
  <link href="data:text/css,%0Abody%0A%7B%0Amargin%3A%200%200%200%200%3B%0Apadding%3A%200%200%200%200%3B%0Awidth%3A%20100%25%3B%0Aheight%3A%20100%25%3B%0Acolor%3A%20black%3B%0Abackground%2Dcolor%3A%20white%3B%0Afont%2Dfamily%3A%20%22Gill%20Sans%20MT%22%2C%20%22Gill%20Sans%22%2C%20GillSans%2C%20sans%2Dserif%3B%0Afont%2Dsize%3A%2014pt%3B%0A%7D%0Adiv%2Etoolbar%20%7B%0Aposition%3A%20fixed%3B%20z%2Dindex%3A%20200%3B%0Atop%3A%20auto%3B%20bottom%3A%200%3B%20left%3A%200%3B%20right%3A%200%3B%0Aheight%3A%201%2E2em%3B%20text%2Dalign%3A%20right%3B%0Apadding%2Dleft%3A%201em%3B%0Apadding%2Dright%3A%201em%3B%20font%2Dsize%3A%2060%25%3B%0Acolor%3A%20DimGray%3B%0Abackground%2Dcolor%3A%20rgb%28240%2C240%2C240%29%3B%0Aborder%2Dtop%3A%20solid%201px%20rgb%28180%2C180%2C180%29%3B%0A%7D%0Adiv%2Etoolbar%20span%2Ecopyright%20%7B%0Acolor%3A%20DimGray%3B%0Amargin%2Dleft%3A%200%2E5em%3B%0A%7D%0Adiv%2Einitial%5Fprompt%20%7B%0Aposition%3A%20absolute%3B%0Az%2Dindex%3A%201000%3B%0Abottom%3A%201%2E2em%3B%0Awidth%3A%20100%25%3B%0Abackground%2Dcolor%3A%20rgb%28200%2C200%2C200%29%3B%0Aopacity%3A%200%2E35%3B%0Abackground%2Dcolor%3A%20rgb%28200%2C200%2C200%2C%200%2E35%29%3B%0Acursor%3A%20pointer%3B%0A%7D%0Adiv%2Einitial%5Fprompt%20p%2Ehelp%20%7B%0Atext%2Dalign%3A%20center%3B%0A%7D%0Adiv%2Einitial%5Fprompt%20p%2Eclose%20%7B%0Atext%2Dalign%3A%20right%3B%0Afont%2Dstyle%3A%20italic%3B%0A%7D%0Adiv%2Eslidy%5Ftoc%20%7B%0Aposition%3A%20absolute%3B%0Az%2Dindex%3A%20300%3B%0Awidth%3A%2060%25%3B%0Amax%2Dwidth%3A%2030em%3B%0Aheight%3A%2030em%3B%0Aoverflow%3A%20auto%3B%0Atop%3A%20auto%3B%0Aright%3A%20auto%3B%0Aleft%3A%204em%3B%0Abottom%3A%204em%3B%0Apadding%3A%201em%3B%0Abackground%3A%20rgb%28240%2C240%2C240%29%3B%0Aborder%2Dstyle%3A%20solid%3B%0Aborder%2Dwidth%3A%202px%3B%0Afont%2Dsize%3A%2060%25%3B%0A%7D%0Adiv%2Eslidy%5Ftoc%20%2Etoc%5Fheading%20%7B%0Atext%2Dalign%3A%20center%3B%0Awidth%3A%20100%25%3B%0Amargin%3A%200%3B%0Amargin%2Dbottom%3A%201em%3B%0Aborder%2Dbottom%2Dstyle%3A%20solid%3B%0Aborder%2Dbottom%2Dcolor%3A%20rgb%28180%2C180%2C180%29%3B%0Aborder%2Dbottom%2Dwidth%3A%201px%3B%0A%7D%0Adiv%2Eslide%20%7B%0Az%2Dindex%3A%2020%3B%0Amargin%3A%200%200%200%200%3B%0Apadding%2Dtop%3A%200%3B%0Apadding%2Dbottom%3A%200%3B%0Apadding%2Dleft%3A%2020px%3B%0Apadding%2Dright%3A%2020px%3B%0Aborder%2Dwidth%3A%200%3B%0Aclear%3A%20both%3B%0Atop%3A%200%3B%0Abottom%3A%200%3B%0Aleft%3A%200%3B%0Aright%3A%200%3B%0Aline%2Dheight%3A%20120%25%3B%0Abackground%2Dcolor%3A%20transparent%3B%0A%7D%0Adiv%2Ebackground%20%7B%0Adisplay%3A%20none%3B%0A%7D%0Adiv%2Ehandout%20%7B%0Amargin%2Dleft%3A%2020px%3B%0Amargin%2Dright%3A%2020px%3B%0A%7D%0Adiv%2Eslide%2Etitlepage%20%7B%0Atext%2Dalign%3A%20center%3B%0A%7D%0Adiv%2Eslide%2Etitlepage%20h1%20%7B%0Apadding%2Dtop%3A%2010%25%3B%0Amargin%2Dright%3A%200%3B%0A%7D%0Adiv%2Eslide%20h1%20%7B%0Apadding%2Dleft%3A%200%3B%0Apadding%2Dright%3A%2020pt%3B%0Apadding%2Dtop%3A%204pt%3B%0Apadding%2Dbottom%3A%204pt%3B%0Amargin%2Dtop%3A%200%3B%0Amargin%2Dleft%3A%200%3B%0Amargin%2Dright%3A%2060pt%3B%0Amargin%2Dbottom%3A%200%2E5em%3B%0Adisplay%3A%20block%3B%20font%2Dsize%3A%20160%25%3B%0Aline%2Dheight%3A%201%2E2em%3B%0Abackground%3A%20transparent%3B%0A%7D%0A%40media%20screen%20and%20%28max%2Ddevice%2Dwidth%3A%201024px%29%0A%7B%0Adiv%2Eslide%20%7B%20font%2Dsize%3A%20100%25%3B%20%7D%0A%7D%0A%40media%20screen%20and%20%28max%2Ddevice%2Dwidth%3A%20800px%29%0A%7B%0Adiv%2Eslide%20%7B%20font%2Dsize%3A%20200%25%3B%20%7D%0Adiv%2Eslidy%5Ftoc%20%7B%0Atop%3A%201em%3B%0Aleft%3A%201em%3B%0Aright%3A%20auto%3B%0Awidth%3A%2080%25%3B%0Afont%2Dsize%3A%20180%25%3B%0A%7D%0A%7D%0Adiv%2Etoc%2Dheading%20%7B%0Awidth%3A%20100%25%3B%0Aborder%2Dbottom%3A%20solid%201px%20rgb%28180%2C180%2C180%29%3B%0Amargin%2Dbottom%3A%201em%3B%0Atext%2Dalign%3A%20center%3B%0A%7D%0Aimg%20%7B%0Aimage%2Drendering%3A%20optimize%2Dquality%3B%0A%7D%0Apre%20%7B%0Afont%2Dsize%3A%2080%25%3B%0Afont%2Dweight%3A%20bold%3B%0Aline%2Dheight%3A%20120%25%3B%0Apadding%2Dtop%3A%200%2E2em%3B%0Apadding%2Dbottom%3A%200%2E2em%3B%0Apadding%2Dleft%3A%201em%3B%0Apadding%2Dright%3A%201em%3B%0Aborder%2Dstyle%3A%20solid%3B%0Aborder%2Dleft%2Dwidth%3A%201em%3B%0Aborder%2Dtop%2Dwidth%3A%20thin%3B%0Aborder%2Dright%2Dwidth%3A%20thin%3B%0Aborder%2Dbottom%2Dwidth%3A%20thin%3B%0Aborder%2Dcolor%3A%20%2395ABD0%3B%0Acolor%3A%20%2300428C%3B%0Abackground%2Dcolor%3A%20%23E4E5E7%3B%0A%7D%0Ali%20pre%20%7B%20margin%2Dleft%3A%200%3B%20%7D%0Ablockquote%20%7B%20font%2Dstyle%3A%20italic%20%7D%0Aimg%20%7B%20background%2Dcolor%3A%20transparent%20%7D%0Ap%2Ecopyright%20%7B%20font%2Dsize%3A%20smaller%20%7D%0A%2Ecenter%20%7B%20text%2Dalign%3A%20center%20%7D%0A%2Efootnote%20%7B%20font%2Dsize%3A%20smaller%3B%20margin%2Dleft%3A%202em%3B%20%7D%0Aa%20img%20%7B%20border%2Dwidth%3A%200%3B%20border%2Dstyle%3A%20none%20%7D%0Aa%3Avisited%20%7B%20color%3A%20navy%20%7D%0Aa%3Alink%20%7B%20color%3A%20navy%20%7D%0Aa%3Ahover%20%7B%20color%3A%20red%3B%20text%2Ddecoration%3A%20underline%20%7D%0Aa%3Aactive%20%7B%20color%3A%20red%3B%20text%2Ddecoration%3A%20underline%20%7D%0Aa%20%7Btext%2Ddecoration%3A%20none%7D%0A%2Etoolbar%20a%3Alink%20%7Bcolor%3A%20blue%7D%0A%2Etoolbar%20a%3Avisited%20%7Bcolor%3A%20blue%7D%0A%2Etoolbar%20a%3Aactive%20%7Bcolor%3A%20red%7D%0A%2Etoolbar%20a%3Ahover%20%7Bcolor%3A%20red%7D%0Aul%20%7B%20list%2Dstyle%2Dtype%3A%20square%3B%20%7D%0Aul%20ul%20%7B%20list%2Dstyle%2Dtype%3A%20disc%3B%20%7D%0Aul%20ul%20ul%20%7B%20list%2Dstyle%2Dtype%3A%20circle%3B%20%7D%0Aul%20ul%20ul%20ul%20%7B%20list%2Dstyle%2Dtype%3A%20disc%3B%20%7D%0Ali%20%7B%20margin%2Dleft%3A%200%2E5em%3B%20margin%2Dtop%3A%200%2E5em%3B%20%7D%0Ali%20li%20%7B%20font%2Dsize%3A%2085%25%3B%20font%2Dstyle%3A%20italic%20%7D%0Ali%20li%20li%20%7B%20font%2Dsize%3A%2085%25%3B%20font%2Dstyle%3A%20normal%20%7D%0Adiv%20dt%0A%7B%0Amargin%2Dleft%3A%200%3B%0Amargin%2Dtop%3A%201em%3B%0Amargin%2Dbottom%3A%200%2E5em%3B%0Afont%2Dweight%3A%20bold%3B%0A%7D%0Adiv%20dd%0A%7B%0Amargin%2Dleft%3A%202em%3B%0Amargin%2Dbottom%3A%200%2E5em%3B%0A%7D%0Ap%2Cpre%2Cul%2Col%2Cblockquote%2Ch2%2Ch3%2Ch4%2Ch5%2Ch6%2Cdl%2Ctable%20%7B%0Amargin%2Dleft%3A%201em%3B%0Amargin%2Dright%3A%201em%3B%0A%7D%0Ap%2Esubhead%20%7B%20font%2Dweight%3A%20bold%3B%20margin%2Dtop%3A%202em%3B%20%7D%0A%2Esmaller%20%7B%20font%2Dsize%3A%20smaller%20%7D%0A%2Ebigger%20%7B%20font%2Dsize%3A%20130%25%20%7D%0Atd%2Cth%20%7B%20padding%3A%200%2E2em%20%7D%0Aul%20%7B%0Amargin%3A%200%2E5em%201%2E5em%200%2E5em%201%2E5em%3B%0Apadding%3A%200%3B%0A%7D%0Aol%20%7B%0Amargin%3A%200%2E5em%201%2E5em%200%2E5em%201%2E5em%3B%0Apadding%3A%200%3B%0A%7D%0Aul%20%7B%20list%2Dstyle%2Dtype%3A%20square%3B%20%7D%0Aul%20ul%20%7B%20list%2Dstyle%2Dtype%3A%20disc%3B%20%7D%0Aul%20ul%20ul%20%7B%20list%2Dstyle%2Dtype%3A%20circle%3B%20%7D%0Aul%20ul%20ul%20ul%20%7B%20list%2Dstyle%2Dtype%3A%20disc%3B%20%7D%0Aul%20li%20%7B%20list%2Dstyle%3A%20square%3B%0Amargin%3A%200%2E1em%200em%200%2E6em%200%3B%0Apadding%3A%200%200%200%200%3B%0Aline%2Dheight%3A%20140%25%3B%0A%7D%0Aol%20li%20%7B%20margin%3A%200%2E1em%200em%200%2E6em%201%2E5em%3B%0Apadding%3A%200%200%200%200px%3B%0Aline%2Dheight%3A%20140%25%3B%0Alist%2Dstyle%2Dtype%3A%20decimal%3B%0A%7D%0Ali%20ul%20li%20%7B%20font%2Dsize%3A%2085%25%3B%20font%2Dstyle%3A%20italic%3B%0Alist%2Dstyle%2Dtype%3A%20disc%3B%0Abackground%3A%20transparent%3B%0Apadding%3A%200%200%200%200%3B%0A%7D%0Ali%20li%20ul%20li%20%7B%20font%2Dsize%3A%2085%25%3B%20font%2Dstyle%3A%20normal%3B%0Alist%2Dstyle%2Dtype%3A%20circle%3B%0Abackground%3A%20transparent%3B%0Apadding%3A%200%200%200%200%3B%0A%7D%0Ali%20li%20li%20ul%20li%20%7B%0Alist%2Dstyle%2Dtype%3A%20disc%3B%0Abackground%3A%20transparent%3B%0Apadding%3A%200%200%200%200%3B%0A%7D%0Ali%20ol%20li%20%7B%0Alist%2Dstyle%2Dtype%3A%20decimal%3B%0A%7D%0Ali%20li%20ol%20li%20%7B%0Alist%2Dstyle%2Dtype%3A%20decimal%3B%0A%7D%0A%0Aol%2Eoutline%20li%3Ahover%20%7B%20cursor%3A%20pointer%20%7D%0Aol%2Eoutline%20li%2Enofold%3Ahover%20%7B%20cursor%3A%20default%20%7D%0Aul%2Eoutline%20li%3Ahover%20%7B%20cursor%3A%20pointer%20%7D%0Aul%2Eoutline%20li%2Enofold%3Ahover%20%7B%20cursor%3A%20default%20%7D%0Aol%2Eoutline%20%7B%20list%2Dstyle%3Adecimal%3B%20%7D%0Aol%2Eoutline%20ol%20%7B%20list%2Dstyle%2Dtype%3Alower%2Dalpha%20%7D%0Aol%2Eoutline%20li%2Enofold%20%7B%0Apadding%3A%200%200%200%2020px%3B%0Abackground%3A%20transparent%20url%28data%3Aimage%2Fgif%3Bbase64%2CR0lGODdhCQAJAIACAMzMzOvr%2FywAAAAACQAJAAACD4SPoRvG614Dctb4MEMcFAA7%29%20no%2Drepeat%200px%200%2E5em%3B%0A%7D%0Aol%2Eoutline%20li%2Eunfolded%20%7B%0Apadding%3A%200%200%200%2020px%3B%0Abackground%3A%20transparent%20url%28data%3Aimage%2Fgif%3Bbase64%2CR0lGODdhCQAJAKEDAMPD%2F8zMzOvr%2F%2F%2F%2F%2FywAAAAACQAJAAACEYyPoivG614LAlg7ZZbxoR8UADs%3D%29%20no%2Drepeat%200px%200%2E5em%3B%0A%7D%0Aol%2Eoutline%20li%2Efolded%20%7B%0Apadding%3A%200%200%200%2020px%3B%0Abackground%3A%20transparent%20url%28data%3Aimage%2Fgif%3Bbase64%2CR0lGODdhCQAJAKEDAMPD%2F8zMzOvr%2F%2F%2F%2F%2FywAAAAACQAJAAACFIyPoiu2sJyCyoF7W3hxz850CFIAADs%3D%29%20no%2Drepeat%200px%200%2E5em%3B%0A%7D%0Aol%2Eoutline%20li%2Eunfolded%3Ahover%20%7B%0Apadding%3A%200%200%200%2020px%3B%0Abackground%3A%20transparent%20url%28data%3Aimage%2Fgif%3Bbase64%2CR0lGODdhCQAJAKEDAAAAAAAA%2F8PD%2F%2F%2F%2F%2FywAAAAACQAJAAACEYSPoivG614DIlg7ZZbxoQ8UADs%3D%29%20no%2Drepeat%200px%200%2E5em%3B%0A%7D%0Aol%2Eoutline%20li%2Efolded%3Ahover%20%7B%0Apadding%3A%200%200%200%2020px%3B%0Abackground%3A%20transparent%20url%28data%3Aimage%2Fgif%3Bbase64%2CR0lGODdhCQAJAKEDAAAAAAAA%2F8PD%2F%2F%2F%2F%2FywAAAAACQAJAAACFISPoiu2sZyCyoV7G3hxz850CFIAADs%3D%29%20no%2Drepeat%200px%200%2E5em%3B%0A%7D%0Aul%2Eoutline%20li%2Enofold%20%7B%0Apadding%3A%200%200%200%2020px%3B%0Abackground%3A%20transparent%20url%28data%3Aimage%2Fgif%3Bbase64%2CR0lGODdhCQAJAIACAMzMzOvr%2FywAAAAACQAJAAACD4SPoRvG614Dctb4MEMcFAA7%29%20no%2Drepeat%200px%200%2E5em%3B%0A%7D%0Aul%2Eoutline%20li%2Eunfolded%20%7B%0Apadding%3A%200%200%200%2020px%3B%0Abackground%3A%20transparent%20url%28data%3Aimage%2Fgif%3Bbase64%2CR0lGODdhCQAJAKEDAMPD%2F8zMzOvr%2F%2F%2F%2F%2FywAAAAACQAJAAACEYyPoivG614LAlg7ZZbxoR8UADs%3D%29%20no%2Drepeat%200px%200%2E5em%3B%0A%7D%0Aul%2Eoutline%20li%2Efolded%20%7B%0Apadding%3A%200%200%200%2020px%3B%0Abackground%3A%20transparent%20url%28data%3Aimage%2Fgif%3Bbase64%2CR0lGODdhCQAJAKEDAMPD%2F8zMzOvr%2F%2F%2F%2F%2FywAAAAACQAJAAACFIyPoiu2sJyCyoF7W3hxz850CFIAADs%3D%29%20no%2Drepeat%200px%200%2E5em%3B%0A%7D%0Aul%2Eoutline%20li%2Eunfolded%3Ahover%20%7B%0Apadding%3A%200%200%200%2020px%3B%0Abackground%3A%20transparent%20url%28data%3Aimage%2Fgif%3Bbase64%2CR0lGODdhCQAJAKEDAAAAAAAA%2F8PD%2F%2F%2F%2F%2FywAAAAACQAJAAACEYSPoivG614DIlg7ZZbxoQ8UADs%3D%29%20no%2Drepeat%200px%200%2E5em%3B%0A%7D%0Aul%2Eoutline%20li%2Efolded%3Ahover%20%7B%0Apadding%3A%200%200%200%2020px%3B%0Abackground%3A%20transparent%20url%28data%3Aimage%2Fgif%3Bbase64%2CR0lGODdhCQAJAKEDAAAAAAAA%2F8PD%2F%2F%2F%2F%2FywAAAAACQAJAAACFISPoiu2sZyCyoV7G3hxz850CFIAADs%3D%29%20no%2Drepeat%200px%200%2E5em%3B%0A%7D%0A%0Aa%2Etitleslide%20%7B%20font%2Dweight%3A%20bold%3B%20font%2Dstyle%3A%20italic%20%7D%0A%0Aimg%2Ehidden%20%7B%20display%3A%20none%3B%20visibility%3A%20hidden%20%7D%0Adiv%2Einitial%5Fprompt%20%7B%20display%3A%20none%3B%20visibility%3A%20hidden%20%7D%0Adiv%2Eslide%20%7B%0Avisibility%3A%20visible%3B%0Aposition%3A%20inherit%3B%0A%7D%0Adiv%2Ehandout%20%7B%0Aborder%2Dtop%2Dstyle%3A%20solid%3B%0Aborder%2Dtop%2Dwidth%3A%20thin%3B%0Aborder%2Dtop%2Dcolor%3A%20black%3B%0A%7D%0A%40media%20screen%20%7B%0A%2Ehidden%20%7B%20display%3A%20none%3B%20visibility%3A%20visible%20%7D%0Adiv%2Eslide%2Ehidden%20%7B%20display%3A%20block%3B%20visibility%3A%20visible%20%7D%0Adiv%2Ehandout%2Ehidden%20%7B%20display%3A%20block%3B%20visibility%3A%20visible%20%7D%0Adiv%2Ebackground%20%7B%20display%3A%20none%3B%20visibility%3A%20hidden%20%7D%0Abody%2Esingle%5Fslide%20div%2Einitial%5Fprompt%20%7B%20display%3A%20block%3B%20visibility%3A%20visible%20%7D%0Abody%2Esingle%5Fslide%20div%2Ebackground%20%7B%20display%3A%20block%3B%20visibility%3A%20visible%20%7D%0Abody%2Esingle%5Fslide%20div%2Ebackground%2Ehidden%20%7B%20display%3A%20none%3B%20visibility%3A%20hidden%20%7D%0Abody%2Esingle%5Fslide%20%2Einvisible%20%7B%20visibility%3A%20hidden%20%7D%0Abody%2Esingle%5Fslide%20%2Ehidden%20%7B%20display%3A%20none%3B%20visibility%3A%20hidden%20%7D%0Abody%2Esingle%5Fslide%20div%2Eslide%20%7B%20position%3A%20absolute%20%7D%0Abody%2Esingle%5Fslide%20div%2Ehandout%20%7B%20display%3A%20none%3B%20visibility%3A%20hidden%20%7D%0A%7D%0A%40media%20print%20%7B%0A%2Ehidden%20%7B%20display%3A%20block%3B%20visibility%3A%20visible%20%7D%0Adiv%2Eslide%20pre%20%7B%20font%2Dsize%3A%2060%25%3B%20padding%2Dleft%3A%200%2E5em%3B%20%7D%0Adiv%2Etoolbar%20%7B%20display%3A%20none%3B%20visibility%3A%20hidden%3B%20%7D%0Adiv%2Eslidy%5Ftoc%20%7B%20display%3A%20none%3B%20visibility%3A%20hidden%3B%20%7D%0Adiv%2Ebackground%20%7B%20display%3A%20none%3B%20visibility%3A%20hidden%3B%20%7D%0Adiv%2Eslide%20%7B%20page%2Dbreak%2Dbefore%3A%20always%20%7D%0A%0Adiv%2Eslide%2Efirst%2Dslide%20%7B%20page%2Dbreak%2Dbefore%3A%20avoid%20%7D%0A%7D%0A%0A%0A%2Ejslider%20table%20%7B%0Amargin%2Dleft%3A%200em%3B%0Amargin%2Dright%3A%200em%3B%0A%7D%0A%0Atable%2EdataTable%2C%20%2Eshiny%2Ddatatable%2Doutput%20div%20%7B%0Afont%2Dsize%3A%2014pt%3B%0A%7D%0A%0A%2EdataTables%5Finfo%2C%20%2EdataTables%5Fpaginate%20%7B%0Afont%2Dsize%3A%2019px%3B%0A%7D%0A%0Apre%2EsourceCode%2C%20code%2EsourceCode%20%7B%0Afont%2Dsize%3A%2080%25%3B%0A%7D%0A%0Alabel%2C%20button%2C%20input%2C%20select%2C%20textarea%20%7B%0Afont%2Dsize%3A%2014pt%3B%0A%7D%0A%0Aul%2Enav%2C%20ul%2Enav%20li%20%7B%0Alist%2Dstyle%2Dtype%3A%20none%3B%0A%7D%0A" rel="stylesheet" />
  <script src="data:application/javascript;base64,Lyogc2xpZHkuanMKCiAgIENvcHlyaWdodCAoYykgMjAwNS0yMDEzIFczQyAoTUlULCBFUkNJTSwgS2VpbyksIEFsbCBSaWdodHMgUmVzZXJ2ZWQuCiAgIFczQyBsaWFiaWxpdHksIHRyYWRlbWFyaywgZG9jdW1lbnQgdXNlIGFuZCBzb2Z0d2FyZSBsaWNlbnNpbmcKICAgcnVsZXMgYXBwbHksIHNlZToKCiAgIGh0dHA6Ly93d3cudzMub3JnL0NvbnNvcnRpdW0vTGVnYWwvY29weXJpZ2h0LWRvY3VtZW50cwogICBodHRwOi8vd3d3LnczLm9yZy9Db25zb3J0aXVtL0xlZ2FsL2NvcHlyaWdodC1zb2Z0d2FyZQoKICAgRGVmaW5lcyBzaW5nbGUgbmFtZSAidzNjX3NsaWR5IiBpbiBnbG9iYWwgbmFtZXNwYWNlCiAgIEFkZHMgZXZlbnQgaGFuZGxlcnMgd2l0aG91dCB0cmFtcGxpbmcgb24gYW55IG90aGVycwoqLwoKLy8gdGhlIHNsaWR5IG9iamVjdCBpbXBsZW1lbnRhdGlvbgp2YXIgdzNjX3NsaWR5ID0gewogIC8vIGNsYXNzaWZ5IHdoaWNoIGtpbmQgb2YgYnJvd3NlciB3ZSdyZSBydW5uaW5nIHVuZGVyCiAgbnNfcG9zOiAodHlwZW9mIHdpbmRvdy5wYWdlWU9mZnNldCE9J3VuZGVmaW5lZCcpLAogIGtodG1sOiAoKG5hdmlnYXRvci51c2VyQWdlbnQpLmluZGV4T2YoIktIVE1MIikgPj0gMCA/IHRydWUgOiBmYWxzZSksCiAgb3BlcmE6ICgobmF2aWdhdG9yLnVzZXJBZ2VudCkuaW5kZXhPZigiT3BlcmEiKSA+PSAwID8gdHJ1ZSA6IGZhbHNlKSwKICBpcGFkOiAoKG5hdmlnYXRvci51c2VyQWdlbnQpLmluZGV4T2YoImlQYWQiKSA+PSAwID8gdHJ1ZSA6IGZhbHNlKSwKICBpcGhvbmU6ICgobmF2aWdhdG9yLnVzZXJBZ2VudCkuaW5kZXhPZigiaVBob25lIikgPj0gMCA/IHRydWUgOiBmYWxzZSksCiAgYW5kcm9pZDogKChuYXZpZ2F0b3IudXNlckFnZW50KS5pbmRleE9mKCJBbmRyb2lkIikgPj0gMCA/IHRydWUgOiBmYWxzZSksCiAgaWU6ICh0eXBlb2YgZG9jdW1lbnQuYWxsICE9ICJ1bmRlZmluZWQiICYmICF0aGlzLm9wZXJhKSwKICBpZTY6ICghdGhpcy5uc19wb3MgJiYgbmF2aWdhdG9yLnVzZXJBZ2VudC5pbmRleE9mKCJNU0lFIDYiKSAhPSAtMSksCiAgaWU3OiAoIXRoaXMubnNfcG9zICYmIG5hdmlnYXRvci51c2VyQWdlbnQuaW5kZXhPZigiTVNJRSA3IikgIT0gLTEpLAogIGllODogKCF0aGlzLm5zX3BvcyAmJiBuYXZpZ2F0b3IudXNlckFnZW50LmluZGV4T2YoIk1TSUUgOCIpICE9IC0xKSwKICBpZTk6ICghdGhpcy5uc19wb3MgJiYgbmF2aWdhdG9yLnVzZXJBZ2VudC5pbmRleE9mKCJNU0lFIDkiKSAhPSAtMSksCgogIC8vIGRhdGEgZm9yIHN3aXBlIGFuZCBkb3VibGUgdGFwIGRldGVjdGlvbiBvbiB0b3VjaCBzY3JlZW5zCiAgbGFzdF90YXA6IDAsCiAgcHJldl90YXA6IDAsCiAgc3RhcnRfeDogMCwKICBzdGFydF95OiAwLAogIGRlbHRhX3g6IDAsCiAgZGVsdGFfeTogMCwKCiAgLy8gYXJlIHdlIHJ1bm5pbmcgYXMgWEhUTUw/IChkb2Vzbid0IHdvcmsgb24gT3BlcmEpCiAgaXNfeGh0bWw6IC94bWwvLnRlc3QoZG9jdW1lbnQuY29udGVudFR5cGUpLAoKICBzbGlkZV9udW1iZXI6IDAsIC8vIGludGVnZXIgc2xpZGUgY291bnQ6IDAsIDEsIDIsIC4uLgogIHNsaWRlX251bWJlcl9lbGVtZW50OiBudWxsLCAvLyBlbGVtZW50IGNvbnRhaW5pbmcgc2xpZGUgbnVtYmVyCiAgc2xpZGVzOiBbXSwgLy8gc2V0IHRvIGFycmF5IG9mIHNsaWRlIGRpdidzCiAgbm90ZXM6IFtdLCAvLyBzZXQgdG8gYXJyYXkgb2YgaGFuZG91dCBkaXYncwogIGJhY2tncm91bmRzOiBbXSwgLy8gc2V0IHRvIGFycmF5IG9mIGJhY2tncm91bmQgZGl2J3MKICBvYnNlcnZlcnM6IFtdLCAvLyBsaXN0IG9mIG9ic2VydmVyIGZ1bmN0aW9ucwogIHRvb2xiYXI6IG51bGwsIC8vIGVsZW1lbnQgY29udGFpbmluZyB0b29sYmFyCiAgdGl0bGU6IG51bGwsIC8vIGRvY3VtZW50IHRpdGxlCiAgbGFzdF9zaG93bjogbnVsbCwgLy8gbGFzdCBpbmNyZW1lbnRhbGx5IHNob3duIGl0ZW0KICBlb3M6IG51bGwsICAvLyBzcGFuIGVsZW1lbnQgZm9yIGVuZCBvZiBzbGlkZSBpbmRpY2F0b3IKICB0b2M6IG51bGwsIC8vIHRhYmxlIG9mIGNvbnRlbnRzCiAgb3V0bGluZTogbnVsbCwgLy8gb3V0bGluZSBlbGVtZW50IHdpdGggdGhlIGZvY3VzCiAgc2VsZWN0ZWRfdGV4dF9sZW46IDAsIC8vIGxlbmd0aCBvZiBkcmFnIHNlbGVjdGlvbiBvbiBkb2N1bWVudAogIHZpZXdfYWxsOiAwLCAgLy8gMSB0byB2aWV3IGFsbCBzbGlkZXMgKyBoYW5kb3V0cwogIHdhbnRfdG9vbGJhcjogdHJ1ZSwgIC8vIHVzZXIgcHJlZmVyZW5jZSB0byBzaG93L2hpZGUgdG9vbGJhcgogIG1vdXNlX2NsaWNrX2VuYWJsZWQ6IHRydWUsIC8vIGVuYWJsZXMgbGVmdCBjbGljayBmb3IgbmV4dCBzbGlkZQogIHNjcm9sbF9oYWNrOiAwLCAvLyBJRSB3b3JrIGFyb3VuZCBmb3IgcG9zaXRpb246IGZpeGVkCiAgZGlzYWJsZV9zbGlkZV9jbGljazogZmFsc2UsICAvLyB1c2VkIGJ5IGNsaWNrZWQgYW5jaG9ycwoKICBsYW5nOiAiZW4iLCAvLyB1cGRhdGVkIHRvIGxhbmd1YWdlIHNwZWNpZmllZCBieSBodG1sIGZpbGUKCiAgaGVscF9hbmNob3I6IG51bGwsIC8vIHVzZWQgZm9yIGtleWJvYXJkIGZvY3VzIGhhY2sgaW4gc2hvd1Rvb2xiYXIoKQogIGhlbHBfcGFnZTogImh0dHA6Ly93d3cudzMub3JnL1RhbGtzL1Rvb2xzL1NsaWR5Mi9oZWxwL2hlbHAuaHRtbCIsCiAgaGVscF90ZXh0OiAiTmF2aWdhdGUgd2l0aCBtb3VzZSBjbGljaywgc3BhY2UgYmFyLCBDdXJzb3IgTGVmdC9SaWdodCwgIiArCiAgICAgICAgICAgICAib3IgUGcgVXAgYW5kIFBnIERuLiBVc2UgUyBhbmQgQiB0byBjaGFuZ2UgZm9udCBzaXplLiIsCgogIHNpemVfaW5kZXg6IDAsCiAgc2l6ZV9hZGp1c3RtZW50OiAwLAogIHNpemVzOiAgbmV3IEFycmF5KCIxMHB0IiwgIjEycHQiLCAiMTRwdCIsICIxNnB0IiwgIjE4cHQiLCAiMjBwdCIsCiAgICAgICAgICAgICAgICAgICAgIjIycHQiLCAiMjRwdCIsICIyNnB0IiwgIjI4cHQiLCAiMzBwdCIsICIzMnB0IiksCgogIC8vIG5lZWRlZCBmb3IgZWZmaWNpZW50IHJlc2l6aW5nCiAgbGFzdF93aWR0aDogMCwKICBsYXN0X2hlaWdodDogMCwKCgogIC8vIE5lZWRlZCBmb3IgY3Jvc3MgYnJvd3NlciBzdXBwb3J0IGZvciByZWxhdGl2ZSB3aWR0aC9oZWlnaHQgb24KICAvLyBvYmplY3QgZWxlbWVudHMuIFRoZSB3b3JrIGFyb3VuZCBpcyB0byBzYXZlIHdpZHRoL2hlaWdodCBhdHRyaWJ1dGVzCiAgLy8gYW5kIHRoZW4gdG8gcmVjb21wdXRlIGFic29sdXRlIHdpZHRoL2hlaWdodCBkaW1lbnNpb25zIG9uIHJlc2l6aW5nCiAgIG9iamVjdHM6IFtdLAoKICAvLyBhdHRhY2ggaW5pdGlhbGlhdGlvbiBldmVudCBoYW5kbGVycwogIHNldF91cDogZnVuY3Rpb24gKCkgewogICAgdmFyIGluaXQgPSBmdW5jdGlvbigpIHsgdzNjX3NsaWR5LmluaXQoKTsgfTsKICAgIGlmICh0eXBlb2Ygd2luZG93LmFkZEV2ZW50TGlzdGVuZXIgIT0gInVuZGVmaW5lZCIpCiAgICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCJsb2FkIiwgaW5pdCwgZmFsc2UpOwogICAgZWxzZQogICAgICB3aW5kb3cuYXR0YWNoRXZlbnQoIm9ubG9hZCIsIGluaXQpOwogIH0sCgogIGhpZGVfc2xpZGVzOiBmdW5jdGlvbiAoKSB7CiAgICBpZiAoZG9jdW1lbnQuYm9keSAmJiAhdzNjX3NsaWR5LmluaXRpYWxpemVkKQogICAgICBkb2N1bWVudC5ib2R5LnN0eWxlLnZpc2liaWxpdHkgPSAiaGlkZGVuIjsKICAgIGVsc2UKICAgICAgc2V0VGltZW91dCh3M2Nfc2xpZHkuaGlkZV9zbGlkZXMsIDUwKTsKICB9LAoKICAvLyBoYWNrIHRvIHBlcnN1YWRlIElFIHRvIGNvbXB1dGUgY29ycmVjdCBkb2N1bWVudCBoZWlnaHQKICAvLyBhcyBuZWVkZWQgZm9yIHNpbXVsYXRpbmcgZml4ZWQgcG9zaXRpb25pbmcgb2YgdG9vbGJhcgogIGllX2hhY2s6IGZ1bmN0aW9uICgpIHsKICAgIHdpbmRvdy5yZXNpemVCeSgwLC0xKTsKICAgIHdpbmRvdy5yZXNpemVCeSgwLCAxKTsKICB9LAoKICBpbml0OiBmdW5jdGlvbiAoKSB7CiAgICAvL2FsZXJ0KCJzbGlkeSBzdGFydGluZyB0ZXN0IDEwIik7CiAgICBkb2N1bWVudC5ib2R5LnN0eWxlLnZpc2liaWxpdHkgPSAidmlzaWJsZSI7CiAgICB0aGlzLmluaXRfbG9jYWxpemF0aW9uKCk7CiAgICB0aGlzLmFkZF90b29sYmFyKCk7CiAgICB0aGlzLndyYXBfaW1wbGljaXRfc2xpZGVzKCk7CiAgICB0aGlzLmNvbGxlY3Rfc2xpZGVzKCk7CiAgICB0aGlzLmNvbGxlY3Rfbm90ZXMoKTsKICAgIHRoaXMuY29sbGVjdF9iYWNrZ3JvdW5kcygpOwogICAgdGhpcy5vYmplY3RzID0gZG9jdW1lbnQuYm9keS5nZXRFbGVtZW50c0J5VGFnTmFtZSgib2JqZWN0Iik7CiAgICB0aGlzLnBhdGNoX2FuY2hvcnMoKTsKICAgIHRoaXMuc2xpZGVfbnVtYmVyID0gdGhpcy5maW5kX3NsaWRlX251bWJlcihsb2NhdGlvbi5ocmVmKTsKICAgIHdpbmRvdy5vZmZzY3JlZW5idWZmZXJpbmcgPSB0cnVlOwogICAgdGhpcy5zaXplX2FkanVzdG1lbnQgPSB0aGlzLmZpbmRfc2l6ZV9hZGp1c3QoKTsKICAgIHRoaXMudGltZV9sZWZ0ID0gdGhpcy5maW5kX2R1cmF0aW9uKCk7CiAgICB0aGlzLmhpZGVfaW1hZ2VfdG9vbGJhcigpOyAgLy8gc3VwcHJlc3MgSUUgaW1hZ2UgdG9vbGJhciBwb3B1cAogICAgdGhpcy5pbml0X291dGxpbmVyKCk7ICAvLyBhY3RpdmF0ZSBmb2xkL3VuZm9sZCBzdXBwb3J0CiAgICB0aGlzLnRpdGxlID0gZG9jdW1lbnQudGl0bGU7CiAgICB0aGlzLmtleWJvYXJkbGVzcyA9ICh0aGlzLmlwYWR8fHRoaXMuaXBob25lfHx0aGlzLmFuZHJvaWQpOwoKICAgIGlmICh0aGlzLmtleWJvYXJkbGVzcykKICAgIHsKICAgICAgdzNjX3NsaWR5LnJlbW92ZV9jbGFzcyh3M2Nfc2xpZHkudG9vbGJhciwgImhpZGRlbiIpCiAgICAgIHRoaXMud2FudF90b29sYmFyID0gMDsKICAgIH0KCiAgICAvLyB3b3JrIGFyb3VuZCBmb3Igb3BlcmEgYnVnCiAgICB0aGlzLmlzX3hodG1sID0gKGRvY3VtZW50LmJvZHkudGFnTmFtZSA9PSAiQk9EWSIgPyBmYWxzZSA6IHRydWUpOwoKICAgIGlmICh0aGlzLnNsaWRlcy5sZW5ndGggPiAwKQogICAgewogICAgICB2YXIgc2xpZGUgPSB0aGlzLnNsaWRlc1t0aGlzLnNsaWRlX251bWJlcl07CiAgIAogICAgICBpZiAodGhpcy5zbGlkZV9udW1iZXIgPiAwKQogICAgICB7CiAgICAgICAgdGhpcy5zZXRfdmlzaWJpbGl0eV9hbGxfaW5jcmVtZW50YWwoInZpc2libGUiKTsKICAgICAgICB0aGlzLmxhc3Rfc2hvd24gPSB0aGlzLnByZXZpb3VzX2luY3JlbWVudGFsX2l0ZW0obnVsbCk7CiAgICAgICAgdGhpcy5zZXRfZW9zX3N0YXR1cyh0cnVlKTsKICAgICAgfQogICAgICBlbHNlCiAgICAgIHsKICAgICAgICB0aGlzLmxhc3Rfc2hvd24gPSBudWxsOwogICAgICAgIHRoaXMuc2V0X3Zpc2liaWxpdHlfYWxsX2luY3JlbWVudGFsKCJoaWRkZW4iKTsKICAgICAgICB0aGlzLnNldF9lb3Nfc3RhdHVzKCF0aGlzLm5leHRfaW5jcmVtZW50YWxfaXRlbSh0aGlzLmxhc3Rfc2hvd24pKTsKICAgICAgfQoKICAgICAgdGhpcy5zZXRfbG9jYXRpb24oKTsKICAgICAgdGhpcy5hZGRfY2xhc3ModGhpcy5zbGlkZXNbMF0sICJmaXJzdC1zbGlkZSIpOwogICAgICB3M2Nfc2xpZHkuc2hvd19zbGlkZShzbGlkZSk7CiAgICB9CgogICAgdGhpcy50b2MgPSB0aGlzLnRhYmxlX29mX2NvbnRlbnRzKCk7CgogICAgdGhpcy5hZGRfaW5pdGlhbF9wcm9tcHQoKTsKCiAgICAvLyBiaW5kIGV2ZW50IGhhbmRsZXJzIHdpdGhvdXQgaW50ZXJmZXJpbmcgd2l0aCBjdXN0b20gcGFnZSBzY3JpcHRzCiAgICAvLyBUYXAgZXZlbnRzIGJlaGF2ZSB0b28gd2VpcmRseSB0byBzdXBwb3J0IGNsaWNrcyByZWxpYWJseSBvbgogICAgLy8gaVBob25lIGFuZCBpUGFkLCBzbyBleGNsdWRlIHRoZXNlIGZyb20gY2xpY2sgaGFuZGxlcgoKICAgIGlmICghdGhpcy5rZXlib2FyZGxlc3MpCiAgICB7CiAgICAgIHRoaXMuYWRkX2xpc3RlbmVyKGRvY3VtZW50LmJvZHksICJjbGljayIsIHRoaXMubW91c2VfYnV0dG9uX2NsaWNrKTsKICAgICAgdGhpcy5hZGRfbGlzdGVuZXIoZG9jdW1lbnQuYm9keSwgIm1vdXNlZG93biIsIHRoaXMubW91c2VfYnV0dG9uX2Rvd24pOwogICAgfQoKICAgIHRoaXMuYWRkX2xpc3RlbmVyKGRvY3VtZW50LCAia2V5ZG93biIsIHRoaXMua2V5X2Rvd24pOwogICAgdGhpcy5hZGRfbGlzdGVuZXIoZG9jdW1lbnQsICJrZXlwcmVzcyIsIHRoaXMua2V5X3ByZXNzKTsKICAgIHRoaXMuYWRkX2xpc3RlbmVyKHdpbmRvdywgInJlc2l6ZSIsIHRoaXMucmVzaXplZCk7CiAgICB0aGlzLmFkZF9saXN0ZW5lcih3aW5kb3csICJzY3JvbGwiLCB0aGlzLnNjcm9sbGVkKTsKICAgIHRoaXMuYWRkX2xpc3RlbmVyKHdpbmRvdywgInVubG9hZCIsIHRoaXMudW5sb2FkZWQpOwoKICAgIHRoaXMuYWRkX2xpc3RlbmVyKGRvY3VtZW50LCAiZ2VzdHVyZWNoYW5nZSIsIGZ1bmN0aW9uICgpCiAgICB7CiAgICAgIHJldHVybiBmYWxzZTsKICAgIH0pOwoKICAgIHRoaXMuYXR0YWNoX3RvdWNoX2hhbmRlcnModGhpcy5zbGlkZXMpOwoKICAgIC8vIHRoaXMgc2VlbXMgdG8gYmUgYSBkZWJ1Z2dpbmcgaGFjawogICAgLy9pZiAoIWRvY3VtZW50LmJvZHkub25jbGljaykKICAgIC8vICBkb2N1bWVudC5ib2R5Lm9uY2xpY2sgPSBmdW5jdGlvbiAoKSB7IH07CgogICAgdGhpcy5zaW5nbGVfc2xpZGVfdmlldygpOwoKICAgIC8vdGhpcy5zZXRfbG9jYXRpb24oKTsKCiAgICB0aGlzLnJlc2l6ZWQoKTsKCiAgICBpZiAodGhpcy5pZTcpCiAgICAgIHNldFRpbWVvdXQodzNjX3NsaWR5LmllX2hhY2ssIDEwMCk7CgogICAgdGhpcy5zaG93X3Rvb2xiYXIoKTsKCiAgICAvLyBmb3IgYmFjayBidXR0b24gZGV0ZWN0aW9uCiAgICBzZXRJbnRlcnZhbChmdW5jdGlvbiAoKSB7IHczY19zbGlkeS5jaGVja19sb2NhdGlvbigpOyB9LCAyMDApOwogICAgdzNjX3NsaWR5LmluaXRpYWxpemVkID0gdHJ1ZTsKICB9LAoKICAvLyBjcmVhdGUgZGl2IGVsZW1lbnQgd2l0aCBsaW5rcyB0byBlYWNoIHNsaWRlCiAgdGFibGVfb2ZfY29udGVudHM6IGZ1bmN0aW9uICgpIHsKICAgIHZhciB0b2MgPSB0aGlzLmNyZWF0ZV9lbGVtZW50KCJkaXYiKTsKICAgIHRoaXMuYWRkX2NsYXNzKHRvYywgInNsaWR5X3RvYyBoaWRkZW4iKTsKICAgIC8vdG9jLnNldEF0dHJpYnV0ZSgidGFiaW5kZXgiLCAiMCIpOwoKICAgIHZhciBoZWFkaW5nID0gdGhpcy5jcmVhdGVfZWxlbWVudCgiZGl2Iik7CiAgICB0aGlzLmFkZF9jbGFzcyhoZWFkaW5nLCAidG9jLWhlYWRpbmciKTsKICAgIGhlYWRpbmcuaW5uZXJIVE1MID0gdGhpcy5sb2NhbGl6ZSgiVGFibGUgb2YgQ29udGVudHMiKTsKCiAgICB0b2MuYXBwZW5kQ2hpbGQoaGVhZGluZyk7CiAgICB2YXIgcHJldmlvdXMgPSBudWxsOwoKICAgIGZvciAodmFyIGkgPSAwOyBpIDwgdGhpcy5zbGlkZXMubGVuZ3RoOyArK2kpCiAgICB7CiAgICAgIHZhciB0aXRsZSA9IHRoaXMuaGFzX2NsYXNzKHRoaXMuc2xpZGVzW2ldLCAidGl0bGUiKTsKICAgICAgdmFyIG51bSA9IGRvY3VtZW50LmNyZWF0ZVRleHROb2RlKChpICsgMSkgKyAiLiAiKTsKCiAgICAgIHRvYy5hcHBlbmRDaGlsZChudW0pOwoKICAgICAgdmFyIGEgPSB0aGlzLmNyZWF0ZV9lbGVtZW50KCJhIik7CiAgICAgIGEuc2V0QXR0cmlidXRlKCJocmVmIiwgIiMoIiArIChpKzEpICsgIikiKTsKCiAgICAgIGlmICh0aXRsZSkKICAgICAgICB0aGlzLmFkZF9jbGFzcyhhLCAidGl0bGVzbGlkZSIpOwoKICAgICAgdmFyIG5hbWUgPSBkb2N1bWVudC5jcmVhdGVUZXh0Tm9kZSh0aGlzLnNsaWRlX25hbWUoaSkpOwogICAgICBhLmFwcGVuZENoaWxkKG5hbWUpOwogICAgICBhLm9uY2xpY2sgPSB3M2Nfc2xpZHkudG9jX2NsaWNrOwogICAgICBhLm9ua2V5ZG93biA9IHczY19zbGlkeS50b2Nfa2V5X2Rvd247CiAgICAgIGEucHJldmlvdXMgPSBwcmV2aW91czsKCiAgICAgIGlmIChwcmV2aW91cykKICAgICAgICBwcmV2aW91cy5uZXh0ID0gYTsKCiAgICAgIHRvYy5hcHBlbmRDaGlsZChhKTsKCiAgICAgIGlmIChpID09IDApCiAgICAgICAgdG9jLmZpcnN0ID0gYTsKCiAgICAgIGlmIChpIDwgdGhpcy5zbGlkZXMubGVuZ3RoIC0gMSkKICAgICAgewogICAgICAgIHZhciBiciA9IHRoaXMuY3JlYXRlX2VsZW1lbnQoImJyIik7CiAgICAgICAgdG9jLmFwcGVuZENoaWxkKGJyKTsKICAgICAgfQoKICAgICAgcHJldmlvdXMgPSBhOwogICAgfQoKICAgIHRvYy5mb2N1cyA9IGZ1bmN0aW9uICgpIHsKICAgICAgaWYgKHRoaXMuZmlyc3QpCiAgICAgICAgdGhpcy5maXJzdC5mb2N1cygpOwogICAgfQoKICAgIHRvYy5vbm1vdXNldXAgPSB3M2Nfc2xpZHkubW91c2VfYnV0dG9uX3VwOwoKICAgIHRvYy5vbmNsaWNrID0gZnVuY3Rpb24gKGUpIHsKICAgICAgZXx8KGU9d2luZG93LmV2ZW50KTsKCiAgICAgIGlmICh3M2Nfc2xpZHkuc2VsZWN0ZWRfdGV4dF9sZW4gPD0gMCkKICAgICAgICAgdzNjX3NsaWR5LmhpZGVfdGFibGVfb2ZfY29udGVudHModHJ1ZSk7CgogICAgICB3M2Nfc2xpZHkuc3RvcF9wcm9wYWdhdGlvbihlKTsKICAgIAogICAgICBpZiAoZS5jYW5jZWwgIT0gdW5kZWZpbmVkKQogICAgICAgIGUuY2FuY2VsID0gdHJ1ZTsKICAgICAgCiAgICAgIGlmIChlLnJldHVyblZhbHVlICE9IHVuZGVmaW5lZCkKICAgICAgICBlLnJldHVyblZhbHVlID0gZmFsc2U7CiAgICAgIAogICAgICByZXR1cm4gZmFsc2U7CiAgICB9OwoKICAgIGRvY3VtZW50LmJvZHkuaW5zZXJ0QmVmb3JlKHRvYywgZG9jdW1lbnQuYm9keS5maXJzdENoaWxkKTsKICAgIHJldHVybiB0b2M7CiAgfSwKCiAgaXNfc2hvd25fdG9jOiBmdW5jdGlvbiAoKSB7CiAgICByZXR1cm4gIXczY19zbGlkeS5oYXNfY2xhc3ModzNjX3NsaWR5LnRvYywgImhpZGRlbiIpOwogIH0sCgogIHNob3dfdGFibGVfb2ZfY29udGVudHM6IGZ1bmN0aW9uICgpIHsKICAgIHczY19zbGlkeS5yZW1vdmVfY2xhc3ModzNjX3NsaWR5LnRvYywgImhpZGRlbiIpOwogICAgdmFyIHRvYyA9IHczY19zbGlkeS50b2M7CiAgICB0b2MuZm9jdXMoKTsKCiAgICBpZiAodzNjX3NsaWR5LmllNyAmJiB3M2Nfc2xpZHkuc2xpZGVfbnVtYmVyID09IDApCiAgICAgIHNldFRpbWVvdXQodzNjX3NsaWR5LmllX2hhY2ssIDEwMCk7CiAgfSwKCiAgaGlkZV90YWJsZV9vZl9jb250ZW50czogZnVuY3Rpb24gKGZvY3VzKSB7CiAgICB3M2Nfc2xpZHkuYWRkX2NsYXNzKHczY19zbGlkeS50b2MsICJoaWRkZW4iKTsKCiAgICBpZiAoZm9jdXMgJiYgIXczY19zbGlkeS5vcGVyYSAmJgogICAgICAgICF3M2Nfc2xpZHkuaGFzX2NsYXNzKHczY19zbGlkeS50b2MsICJoaWRkZW4iKSkKICAgICAgdzNjX3NsaWR5LnNldF9mb2N1cygpOwogIH0sCgogIHRvZ2dsZV90YWJsZV9vZl9jb250ZW50czogZnVuY3Rpb24gKCkgewogICAgaWYgKHczY19zbGlkeS5pc19zaG93bl90b2MoKSkKICAgICAgdzNjX3NsaWR5LmhpZGVfdGFibGVfb2ZfY29udGVudHModHJ1ZSk7CiAgICBlbHNlCiAgICAgIHczY19zbGlkeS5zaG93X3RhYmxlX29mX2NvbnRlbnRzKCk7CiAgfSwKCiAgLy8gY2FsbGVkIG9uIGNsaWNraW5nIHRvYyBlbnRyeQogIHRvY19jbGljazogZnVuY3Rpb24gKGUpIHsKICAgIGlmICghZSkKICAgICAgZSA9IHdpbmRvdy5ldmVudDsKCiAgICB2YXIgdGFyZ2V0ID0gdzNjX3NsaWR5LmdldF90YXJnZXQoZSk7CgogICAgaWYgKHRhcmdldCAmJiB0YXJnZXQubm9kZVR5cGUgPT0gMSkKICAgIHsKICAgICAgdmFyIHVyaSA9IHRhcmdldC5nZXRBdHRyaWJ1dGUoImhyZWYiKTsKCiAgICAgIGlmICh1cmkpCiAgICAgIHsKICAgICAgICAvL2FsZXJ0KCJnb2luZyB0byAiICsgdXJpKTsKICAgICAgICB2YXIgc2xpZGUgPSB3M2Nfc2xpZHkuc2xpZGVzW3czY19zbGlkeS5zbGlkZV9udW1iZXJdOwogICAgICAgIHczY19zbGlkeS5oaWRlX3NsaWRlKHNsaWRlKTsKICAgICAgICB3M2Nfc2xpZHkuc2xpZGVfbnVtYmVyID0gdzNjX3NsaWR5LmZpbmRfc2xpZGVfbnVtYmVyKHVyaSk7CiAgICAgICAgc2xpZGUgPSB3M2Nfc2xpZHkuc2xpZGVzW3czY19zbGlkeS5zbGlkZV9udW1iZXJdOwogICAgICAgIHczY19zbGlkeS5sYXN0X3Nob3duID0gbnVsbDsKICAgICAgICB3M2Nfc2xpZHkuc2V0X2xvY2F0aW9uKCk7CiAgICAgICAgdzNjX3NsaWR5LnNldF92aXNpYmlsaXR5X2FsbF9pbmNyZW1lbnRhbCgiaGlkZGVuIik7CiAgICAgICAgdzNjX3NsaWR5LnNldF9lb3Nfc3RhdHVzKCF3M2Nfc2xpZHkubmV4dF9pbmNyZW1lbnRhbF9pdGVtKHczY19zbGlkeS5sYXN0X3Nob3duKSk7CiAgICAgICAgdzNjX3NsaWR5LnNob3dfc2xpZGUoc2xpZGUpOwogICAgICAgIC8vdGFyZ2V0LmZvY3VzKCk7CgogICAgICAgIHRyeQogICAgICAgIHsKICAgICAgICAgIGlmICghdzNjX3NsaWR5Lm9wZXJhKQogICAgICAgICAgICB3M2Nfc2xpZHkuc2V0X2ZvY3VzKCk7CiAgICAgICAgfQogICAgICAgIGNhdGNoIChlKQogICAgICAgIHsKICAgICAgICB9CiAgICAgIH0KICAgIH0KCiAgICB3M2Nfc2xpZHkuaGlkZV90YWJsZV9vZl9jb250ZW50cyh0cnVlKTsKICAgIGlmICh3M2Nfc2xpZHkuaWU3KSB3M2Nfc2xpZHkuaWVfaGFjaygpOwogICAgdzNjX3NsaWR5LnN0b3BfcHJvcGFnYXRpb24oZSk7CiAgICByZXR1cm4gdzNjX3NsaWR5LmNhbmNlbChlKTsKICB9LAoKICAvLyBjYWxsZWQgb25rZXlkb3duIGZvciB0b2MgZW50cnkKICB0b2Nfa2V5X2Rvd246IGZ1bmN0aW9uIChldmVudCkgewogICAgdmFyIGtleTsKCiAgICBpZiAoIWV2ZW50KQogICAgICB2YXIgZXZlbnQgPSB3aW5kb3cuZXZlbnQ7CgogICAgLy8ga2x1ZGdlIGFyb3VuZCBOUy9JRSBkaWZmZXJlbmNlcyAKICAgIGlmICh3aW5kb3cuZXZlbnQpCiAgICAgIGtleSA9IHdpbmRvdy5ldmVudC5rZXlDb2RlOwogICAgZWxzZSBpZiAoZXZlbnQud2hpY2gpCiAgICAgIGtleSA9IGV2ZW50LndoaWNoOwogICAgZWxzZQogICAgICByZXR1cm4gdHJ1ZTsgLy8gWWlrZXMhIHVua25vd24gYnJvd3NlcgoKICAgIC8vIGlnbm9yZSBldmVudCBpZiBrZXkgdmFsdWUgaXMgemVybwogICAgLy8gYXMgZm9yIGFsdCBvbiBPcGVyYSBhbmQgS29ucXVlcm9yCiAgICBpZiAoIWtleSkKICAgICAgcmV0dXJuIHRydWU7CgogICAgLy8gY2hlY2sgZm9yIGNvbmN1cnJlbnQgY29udHJvbC9jb21tYW5kL2FsdCBrZXkKICAgIC8vIGJ1dCBhcmUgdGhlc2Ugb25seSBwcmVzZW50IG9uIG1vdXNlIGV2ZW50cz8KCiAgICBpZiAoZXZlbnQuY3RybEtleSB8fCBldmVudC5hbHRLZXkpCiAgICAgIHJldHVybiB0cnVlOwoKICAgIGlmIChrZXkgPT0gMTMpCiAgICB7CiAgICAgIHZhciB1cmkgPSB0aGlzLmdldEF0dHJpYnV0ZSgiaHJlZiIpOwoKICAgICAgaWYgKHVyaSkKICAgICAgewogICAgICAgIC8vYWxlcnQoImdvaW5nIHRvICIgKyB1cmkpOwogICAgICAgdmFyIHNsaWRlID0gdzNjX3NsaWR5LnNsaWRlc1t3M2Nfc2xpZHkuc2xpZGVfbnVtYmVyXTsKICAgICAgICB3M2Nfc2xpZHkuaGlkZV9zbGlkZShzbGlkZSk7CiAgICAgICAgdzNjX3NsaWR5LnNsaWRlX251bWJlciA9IHczY19zbGlkeS5maW5kX3NsaWRlX251bWJlcih1cmkpOwogICAgICAgIHNsaWRlID0gdzNjX3NsaWR5LnNsaWRlc1t3M2Nfc2xpZHkuc2xpZGVfbnVtYmVyXTsKICAgICAgICB3M2Nfc2xpZHkubGFzdF9zaG93biA9IG51bGw7CiAgICAgICAgdzNjX3NsaWR5LnNldF9sb2NhdGlvbigpOwogICAgICAgIHczY19zbGlkeS5zZXRfdmlzaWJpbGl0eV9hbGxfaW5jcmVtZW50YWwoImhpZGRlbiIpOwogICAgICAgIHczY19zbGlkeS5zZXRfZW9zX3N0YXR1cyghdzNjX3NsaWR5Lm5leHRfaW5jcmVtZW50YWxfaXRlbSh3M2Nfc2xpZHkubGFzdF9zaG93bikpOwogICAgICAgIHczY19zbGlkeS5zaG93X3NsaWRlKHNsaWRlKTsKICAgICAgICAvL3RhcmdldC5mb2N1cygpOwoKICAgICAgICB0cnkKICAgICAgICB7CiAgICAgICAgICBpZiAoIXczY19zbGlkeS5vcGVyYSkKICAgICAgICAgICAgdzNjX3NsaWR5LnNldF9mb2N1cygpOwogICAgICAgIH0KICAgICAgICBjYXRjaCAoZSkKICAgICAgICB7CiAgICAgICAgfQogICAgICB9CgogICAgICB3M2Nfc2xpZHkuaGlkZV90YWJsZV9vZl9jb250ZW50cyh0cnVlKTsKCiAgICAgIGlmIChzZWxmLmllNykKICAgICAgIHczY19zbGlkeS5pZV9oYWNrKCk7CgogICAgICByZXR1cm4gdzNjX3NsaWR5LmNhbmNlbChldmVudCk7CiAgICB9CgogICAgaWYgKGtleSA9PSA0MCAmJiB0aGlzLm5leHQpCiAgICB7CiAgICAgIHRoaXMubmV4dC5mb2N1cygpOwogICAgICByZXR1cm4gdzNjX3NsaWR5LmNhbmNlbChldmVudCk7CiAgICB9CgogICAgaWYgKGtleSA9PSAzOCAmJiB0aGlzLnByZXZpb3VzKQogICAgewogICAgICB0aGlzLnByZXZpb3VzLmZvY3VzKCk7CiAgICAgIHJldHVybiB3M2Nfc2xpZHkuY2FuY2VsKGV2ZW50KTsKICAgIH0KCiAgICByZXR1cm4gdHJ1ZTsKICB9LAoKICB0b3VjaHN0YXJ0OiBmdW5jdGlvbiAoZSkKICB7CiAgICAvLyBhIGRvdWJsZSB0b3VjaCBvZnRlbiBzdGFydHMgd2l0aCBhCiAgICAvLyBzaW5nbGUgdG91Y2ggZHVlIHRvIGZpbmdlcnMgdG91Y2hpbmcKICAgIC8vIGRvd24gYXQgc2xpZ2h0bHkgZGlmZmVyZW50IHRpbWVzCiAgICAvLyB0aHVzIGF2b2lkIGNhbGxpbmcgcHJldmVudERlZmF1bHQgaGVyZQogICAgdGhpcy5wcmV2X3RhcCA9IHRoaXMubGFzdF90YXA7CiAgICB0aGlzLmxhc3RfdGFwID0gKG5ldyBEYXRlKS5nZXRUaW1lKCk7CgogICAgdmFyIHRhcF9kZWxheSA9IHRoaXMubGFzdF90YXAgLSB0aGlzLnByZXZfdGFwOwoKICAgIGlmICh0YXBfZGVsYXkgPD0gMjAwKQogICAgewogICAgICAvLyBkb3VibGUgdGFwCiAgICB9CgogICAgdmFyIHRvdWNoID0gZS50b3VjaGVzWzBdOwoKICAgIHRoaXMucGFnZVggPSB0b3VjaC5wYWdlWDsKICAgIHRoaXMucGFnZVkgPSB0b3VjaC5wYWdlWTsKICAgIHRoaXMuc2NyZWVuWCA9IHRvdWNoLnNjcmVlblg7CiAgICB0aGlzLnNjcmVlblkgPSB0b3VjaC5zY3JlZW5ZOwogICAgdGhpcy5jbGllbnRYID0gdG91Y2guY2xpZW50WDsKICAgIHRoaXMuY2xpZW50WSA9IHRvdWNoLmNsaWVudFk7CgogICAgdGhpcy5kZWx0YV94ID0gdGhpcy5kZWx0YV95ID0gMDsKICB9LAoKICB0b3VjaG1vdmU6IGZ1bmN0aW9uIChlKQogIHsKICAgIC8vIG92ZXJyaWRlIG5hdGl2ZSBnZXN0dXJlcyBmb3Igc2luZ2xlIHRvdWNoCiAgICBpZiAoZS50b3VjaGVzLmxlbmd0aCA+IDEpCiAgICAgIHJldHVybjsKCiAgICBlLnByZXZlbnREZWZhdWx0KCk7CiAgICB2YXIgdG91Y2ggPSBlLnRvdWNoZXNbMF07CiAgICB0aGlzLmRlbHRhX3ggPSB0b3VjaC5wYWdlWCAtIHRoaXMucGFnZVg7CiAgICB0aGlzLmRlbHRhX3kgPSB0b3VjaC5wYWdlWSAtIHRoaXMucGFnZVk7CiAgfSwKCiAgdG91Y2hlbmQ6IGZ1bmN0aW9uIChlKQogIHsKICAgIC8vIGRlZmF1bHQgYmVoYXZpb3IgZm9yIG11bHRpLXRvdWNoCiAgICBpZiAoZS50b3VjaGVzLmxlbmd0aCA+IDEpCiAgICAgIHJldHVybjsKCiAgICB2YXIgZGVsYXkgPSAobmV3IERhdGUpLmdldFRpbWUoKSAtIHRoaXMubGFzdF90YXA7CiAgICB2YXIgZHggPSB0aGlzLmRlbHRhX3g7CiAgICB2YXIgZHkgPSB0aGlzLmRlbHRhX3k7CiAgICB2YXIgYWJzX2R4ID0gTWF0aC5hYnMoZHgpOwogICAgdmFyIGFic19keSA9IE1hdGguYWJzKGR5KTsKCiAgICBpZiAoZGVsYXkgPCA1MDAgJiYgKGFic19keCA+IDEwMCB8fCBhYnNfZHkgPiAxMDApKQogICAgewogICAgICBpZiAoYWJzX2R4ID4gMC41ICogYWJzX2R5KQogICAgICB7CiAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpOwoKICAgICAgICBpZiAoZHggPCAwKQogICAgICAgICAgdzNjX3NsaWR5Lm5leHRfc2xpZGUodHJ1ZSk7CiAgICAgICAgZWxzZQogICAgICAgICAgdzNjX3NsaWR5LnByZXZpb3VzX3NsaWRlKHRydWUpOwogICAgICB9CiAgICAgIGVsc2UgaWYgKGFic19keSA+IDIgKiBhYnNfZHgpCiAgICAgIHsKICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7CiAgICAgICAgdzNjX3NsaWR5LnRvZ2dsZV90YWJsZV9vZl9jb250ZW50cygpOwogICAgICB9CiAgICB9CiAgfSwKCiAgLy8gIyMjIE9CU09MRVRFICMjIwogIGJlZm9yZV9wcmludDogZnVuY3Rpb24gKCkgewogICAgdGhpcy5zaG93X2FsbF9zbGlkZXMoKTsKICAgIHRoaXMuaGlkZV90b29sYmFyKCk7CiAgICBhbGVydCgiYmVmb3JlIHByaW50Iik7CiAgfSwKCiAgLy8gIyMjIE9CU09MRVRFICMjIwogIGFmdGVyX3ByaW50OiBmdW5jdGlvbiAoKSB7CiAgICBpZiAoIXRoaXMudmlld19hbGwpCiAgICB7CiAgICAgIHRoaXMuc2luZ2xlX3NsaWRlX3ZpZXcoKTsKICAgICAgdGhpcy5zaG93X3Rvb2xiYXIoKTsKICAgIH0KICAgIGFsZXJ0KCJhZnRlciBwcmludCIpOwogIH0sCgogIC8vICMjIyBPQlNPTEVURSAjIyMKICBwcmludF9zbGlkZXM6IGZ1bmN0aW9uICgpIHsKICAgIHRoaXMuYmVmb3JlX3ByaW50KCk7CiAgICB3aW5kb3cucHJpbnQoKTsKICAgIHRoaXMuYWZ0ZXJfcHJpbnQoKTsKICB9LAoKICAvLyAjIyMgT0JTT0xFVEUgPz8gIyMjCiAgdG9nZ2xlX3ZpZXc6IGZ1bmN0aW9uICgpIHsKICAgIGlmICh0aGlzLnZpZXdfYWxsKQogICAgewogICAgICB0aGlzLnNpbmdsZV9zbGlkZV92aWV3KCk7CiAgICAgIHRoaXMuc2hvd190b29sYmFyKCk7CiAgICAgIHRoaXMudmlld19hbGwgPSAwOwogICAgfQogICAgZWxzZQogICAgewogICAgICB0aGlzLnNob3dfYWxsX3NsaWRlcygpOwogICAgICB0aGlzLmhpZGVfdG9vbGJhcigpOwogICAgICB0aGlzLnZpZXdfYWxsID0gMTsKICAgIH0KICB9LAoKICAvLyBwcmVwYXJlIGZvciBwcmludGluZyAgIyMjIE9CU09MRVRFICMjIwogIHNob3dfYWxsX3NsaWRlczogZnVuY3Rpb24gKCkgewogICAgdGhpcy5yZW1vdmVfY2xhc3MoZG9jdW1lbnQuYm9keSwgInNpbmdsZV9zbGlkZSIpOwogICAgdGhpcy5zZXRfdmlzaWJpbGl0eV9hbGxfaW5jcmVtZW50YWwoInZpc2libGUiKTsKICB9LAoKICAvLyByZXN0b3JlIGFmdGVyIHByaW50aW5nICAjIyMgT0JTT0xFVEUgIyMjCiAgc2luZ2xlX3NsaWRlX3ZpZXc6IGZ1bmN0aW9uICgpIHsKICAgIHRoaXMuYWRkX2NsYXNzKGRvY3VtZW50LmJvZHksICJzaW5nbGVfc2xpZGUiKTsKICAgIHRoaXMuc2V0X3Zpc2liaWxpdHlfYWxsX2luY3JlbWVudGFsKCJ2aXNpYmxlIik7CiAgICB0aGlzLmxhc3Rfc2hvd24gPSB0aGlzLnByZXZpb3VzX2luY3JlbWVudGFsX2l0ZW0obnVsbCk7CiAgfSwKCiAgLy8gc3VwcHJlc3MgSUUncyBpbWFnZSB0b29sYmFyIHBvcCB1cAogIGhpZGVfaW1hZ2VfdG9vbGJhcjogZnVuY3Rpb24gKCkgewogICAgaWYgKCF0aGlzLm5zX3BvcykKICAgIHsKICAgICAgdmFyIGltYWdlcyA9IGRvY3VtZW50LmdldEVsZW1lbnRzQnlUYWdOYW1lKCJJTUciKTsKCiAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgaW1hZ2VzLmxlbmd0aDsgKytpKQogICAgICAgIGltYWdlc1tpXS5zZXRBdHRyaWJ1dGUoImdhbGxlcnlpbWciLCAibm8iKTsKICAgIH0KICB9LAoKICB1bmxvYWRlZDogZnVuY3Rpb24gKGUpIHsKICAgIC8vYWxlcnQoInVubG9hZGVkIik7CiAgfSwKCiAgLy8gU2FmYXJpIGFuZCBLb25xdWVyb3IgZG9uJ3QgeWV0IHN1cHBvcnQgZ2V0Q29tcHV0ZWRTdHlsZSgpCiAgLy8gYW5kIHRoZXkgYWx3YXlzIHJlbG9hZCBwYWdlIHdoZW4gbG9jYXRpb24uaHJlZiBpcyB1cGRhdGVkCiAgaXNfS0hUTUw6IGZ1bmN0aW9uICgpIHsKICAgIHZhciBhZ2VudCA9IG5hdmlnYXRvci51c2VyQWdlbnQ7CiAgICByZXR1cm4gKGFnZW50LmluZGV4T2YoIktIVE1MIikgPj0gMCA/IHRydWUgOiBmYWxzZSk7CiAgfSwKCiAgLy8gZmluZCBzbGlkZSBuYW1lIGZyb20gZmlyc3QgaDEgZWxlbWVudAogIC8vIGRlZmF1bHQgdG8gZG9jdW1lbnQgdGl0bGUgKyBzbGlkZSBudW1iZXIKICBzbGlkZV9uYW1lOiBmdW5jdGlvbiAoaW5kZXgpIHsKICAgIHZhciBuYW1lID0gbnVsbDsKICAgIHZhciBzbGlkZSA9IHRoaXMuc2xpZGVzW2luZGV4XTsKCiAgICB2YXIgaGVhZGluZyA9IHRoaXMuZmluZF9oZWFkaW5nKHNsaWRlKTsKCiAgICBpZiAoaGVhZGluZykKICAgICAgbmFtZSA9IHRoaXMuZXh0cmFjdF90ZXh0KGhlYWRpbmcpOwoKICAgIGlmICghbmFtZSkKICAgICAgbmFtZSA9IHRoaXMudGl0bGUgKyAiKCIgKyAoaW5kZXggKyAxKSArICIpIjsKCiAgICBuYW1lLnJlcGxhY2UoL1wmL2csICImYW1wOyIpOwogICAgbmFtZS5yZXBsYWNlKC9cPC9nLCAiJmx0OyIpOwogICAgbmFtZS5yZXBsYWNlKC9cPi9nLCAiJmd0OyIpOwoKICAgIHJldHVybiBuYW1lOwogIH0sCgogIC8vIGZpbmQgZmlyc3QgaDEgZWxlbWVudCBpbiBET00gdHJlZQogIGZpbmRfaGVhZGluZzogZnVuY3Rpb24gKG5vZGUpIHsKICAgIGlmICghbm9kZSB8fCBub2RlLm5vZGVUeXBlICE9IDEpCiAgICAgIHJldHVybiBudWxsOwoKICAgIGlmIChub2RlLm5vZGVOYW1lID09ICJIMSIgfHwgbm9kZS5ub2RlTmFtZSA9PSAiaDEiKQogICAgICByZXR1cm4gbm9kZTsKCiAgICB2YXIgY2hpbGQgPSBub2RlLmZpcnN0Q2hpbGQ7CgogICAgd2hpbGUgKGNoaWxkKQogICAgewogICAgICBub2RlID0gdGhpcy5maW5kX2hlYWRpbmcoY2hpbGQpOwoKICAgICAgaWYgKG5vZGUpCiAgICAgICAgcmV0dXJuIG5vZGU7CgogICAgICBjaGlsZCA9IGNoaWxkLm5leHRTaWJsaW5nOwogICAgfQoKICAgIHJldHVybiBudWxsOwogIH0sCgogIC8vIHJlY3Vyc2l2ZWx5IGV4dHJhY3QgdGV4dCBmcm9tIERPTSB0cmVlCiAgZXh0cmFjdF90ZXh0OiBmdW5jdGlvbiAobm9kZSkgewogICAgaWYgKCFub2RlKQogICAgICByZXR1cm4gIiI7CgogICAgLy8gdGV4dCBub2RlcwogICAgaWYgKG5vZGUubm9kZVR5cGUgPT0gMykKICAgICAgcmV0dXJuIG5vZGUubm9kZVZhbHVlOwoKICAgIC8vIGVsZW1lbnRzCiAgICBpZiAobm9kZS5ub2RlVHlwZSA9PSAxKQogICAgewogICAgICBub2RlID0gbm9kZS5maXJzdENoaWxkOwogICAgICB2YXIgdGV4dCA9ICIiOwoKICAgICAgd2hpbGUgKG5vZGUpCiAgICAgIHsKICAgICAgICB0ZXh0ID0gdGV4dCArIHRoaXMuZXh0cmFjdF90ZXh0KG5vZGUpOwogICAgICAgIG5vZGUgPSBub2RlLm5leHRTaWJsaW5nOwogICAgICB9CgogICAgICByZXR1cm4gdGV4dDsKICAgIH0KCiAgICByZXR1cm4gIiI7CiAgfSwKCiAgLy8gZmluZCBjb3B5cmlnaHQgdGV4dCBmcm9tIG1ldGEgZWxlbWVudAogIGZpbmRfY29weXJpZ2h0OiBmdW5jdGlvbiAoKSB7CiAgICB2YXIgbmFtZSwgY29udGVudDsKICAgIHZhciBtZXRhID0gZG9jdW1lbnQuZ2V0RWxlbWVudHNCeVRhZ05hbWUoIm1ldGEiKTsKCiAgICBmb3IgKHZhciBpID0gMDsgaSA8IG1ldGEubGVuZ3RoOyArK2kpCiAgICB7CiAgICAgIG5hbWUgPSBtZXRhW2ldLmdldEF0dHJpYnV0ZSgibmFtZSIpOwogICAgICBjb250ZW50ID0gbWV0YVtpXS5nZXRBdHRyaWJ1dGUoImNvbnRlbnQiKTsKCiAgICAgIGlmIChuYW1lID09ICJjb3B5cmlnaHQiKQogICAgICAgIHJldHVybiBjb250ZW50OwogICAgfQoKICAgIHJldHVybiBudWxsOwogIH0sCgogIGZpbmRfc2l6ZV9hZGp1c3Q6IGZ1bmN0aW9uICgpIHsKICAgIHZhciBuYW1lLCBjb250ZW50LCBvZmZzZXQ7CiAgICB2YXIgbWV0YSA9IGRvY3VtZW50LmdldEVsZW1lbnRzQnlUYWdOYW1lKCJtZXRhIik7CgogICAgZm9yICh2YXIgaSA9IDA7IGkgPCBtZXRhLmxlbmd0aDsgKytpKQogICAgewogICAgICBuYW1lID0gbWV0YVtpXS5nZXRBdHRyaWJ1dGUoIm5hbWUiKTsKICAgICAgY29udGVudCA9IG1ldGFbaV0uZ2V0QXR0cmlidXRlKCJjb250ZW50Iik7CgogICAgICBpZiAobmFtZSA9PSAiZm9udC1zaXplLWFkanVzdG1lbnQiKQogICAgICAgIHJldHVybiAxICogY29udGVudDsKICAgIH0KCiAgICByZXR1cm4gMTsKICB9LAoKICAvLyA8bWV0YSBuYW1lPSJkdXJhdGlvbiIgY29udGVudD0iMjAiIC8+ICBmb3IgMjAgbWludXRlcwogIGZpbmRfZHVyYXRpb246IGZ1bmN0aW9uICgpIHsKICAgIHZhciBuYW1lLCBjb250ZW50LCBvZmZzZXQ7CiAgICB2YXIgbWV0YSA9IGRvY3VtZW50LmdldEVsZW1lbnRzQnlUYWdOYW1lKCJtZXRhIik7CgogICAgZm9yICh2YXIgaSA9IDA7IGkgPCBtZXRhLmxlbmd0aDsgKytpKQogICAgewogICAgICBuYW1lID0gbWV0YVtpXS5nZXRBdHRyaWJ1dGUoIm5hbWUiKTsKICAgICAgY29udGVudCA9IG1ldGFbaV0uZ2V0QXR0cmlidXRlKCJjb250ZW50Iik7CgogICAgICBpZiAobmFtZSA9PSAiZHVyYXRpb24iKQogICAgICAgIHJldHVybiA2MDAwMCAqIGNvbnRlbnQ7CiAgICB9CgogICAgcmV0dXJuIG51bGw7CiAgfSwKCiAgcmVwbGFjZV9ieV9ub25fYnJlYWtpbmdfc3BhY2U6IGZ1bmN0aW9uIChzdHIpIHsKICAgIGZvciAodmFyIGkgPSAwOyBpIDwgc3RyLmxlbmd0aDsgKytpKQogICAgICBzdHJbaV0gPSAxNjA7CiAgfSwKCiAgLy8gIyMjIENIRUNLIE1FICMjIyBpcyB1c2Ugb2YgImxpIiBva2F5IGZvciB0ZXh0L2h0bWw/CiAgLy8gZm9yIFhIVE1MIGRvIHdlIGFsc28gbmVlZCB0byBzcGVjaWZ5IG5hbWVzcGFjZT8KICBpbml0X291dGxpbmVyOiBmdW5jdGlvbiAoKSB7CiAgICB2YXIgaXRlbXMgPSBkb2N1bWVudC5nZXRFbGVtZW50c0J5VGFnTmFtZSgibGkiKTsKCiAgICBmb3IgKHZhciBpID0gMDsgaSA8IGl0ZW1zLmxlbmd0aDsgKytpKQogICAgewogICAgICB2YXIgdGFyZ2V0ID0gaXRlbXNbaV07CgogICAgICBpZiAoIXRoaXMuaGFzX2NsYXNzKHRhcmdldC5wYXJlbnROb2RlLCAib3V0bGluZSIpKQogICAgICAgIGNvbnRpbnVlOwoKICAgICAgdGFyZ2V0Lm9uY2xpY2sgPSB0aGlzLm91dGxpbmVfY2xpY2s7Ci8qICMjIyBtb3JlIHdvcmsgbmVlZGVkIGZvciBJRTYKICAgICAgaWYgKCF0aGlzLm5zX3BvcykKICAgICAgewogICAgICAgIHRhcmdldC5vbm1vdXNlb3ZlciA9IHRoaXMuaG92ZXJfb3V0bGluZTsKICAgICAgICB0YXJnZXQub25tb3VzZW91dCA9IHRoaXMudW5ob3Zlcl9vdXRsaW5lOwogICAgICB9CiovCiAgICAgIGlmICh0aGlzLmZvbGRhYmxlKHRhcmdldCkpCiAgICAgIHsKICAgICAgICB0YXJnZXQuZm9sZGFibGUgPSB0cnVlOwogICAgICAgIHRhcmdldC5vbmZvY3VzID0gZnVuY3Rpb24gKCkge3czY19zbGlkeS5vdXRsaW5lID0gdGhpczt9OwogICAgICAgIHRhcmdldC5vbmJsdXIgPSBmdW5jdGlvbiAoKSB7dzNjX3NsaWR5Lm91dGxpbmUgPSBudWxsO307CgogICAgICAgIGlmICghdGFyZ2V0LmdldEF0dHJpYnV0ZSgidGFiaW5kZXgiKSkKICAgICAgICAgIHRhcmdldC5zZXRBdHRyaWJ1dGUoInRhYmluZGV4IiwgIjAiKTsKCiAgICAgICAgaWYgKHRoaXMuaGFzX2NsYXNzKHRhcmdldCwgImV4cGFuZCIpKQogICAgICAgICAgdGhpcy51bmZvbGQodGFyZ2V0KTsKICAgICAgICBlbHNlCiAgICAgICAgICB0aGlzLmZvbGQodGFyZ2V0KTsKICAgICAgfQogICAgICBlbHNlCiAgICAgIHsKICAgICAgICB0aGlzLmFkZF9jbGFzcyh0YXJnZXQsICJub2ZvbGQiKTsKICAgICAgICB0YXJnZXQudmlzaWJsZSA9IHRydWU7CiAgICAgICAgdGFyZ2V0LmZvbGRhYmxlID0gZmFsc2U7CiAgICAgIH0KICAgIH0KICB9LAoKICBmb2xkYWJsZTogZnVuY3Rpb24gKGl0ZW0pIHsKICAgIGlmICghaXRlbSB8fCBpdGVtLm5vZGVUeXBlICE9IDEpCiAgICAgIHJldHVybiBmYWxzZTsKCiAgICB2YXIgbm9kZSA9IGl0ZW0uZmlyc3RDaGlsZDsKCiAgICB3aGlsZSAobm9kZSkKICAgIHsKICAgICAgaWYgKG5vZGUubm9kZVR5cGUgPT0gMSAmJiB0aGlzLmlzX2Jsb2NrKG5vZGUpKQogICAgICAgIHJldHVybiB0cnVlOwoKICAgICAgbm9kZSA9IG5vZGUubmV4dFNpYmxpbmc7CiAgICB9CgogICAgcmV0dXJuIGZhbHNlOwogIH0sCgogIC8vICMjIyBDSEVDSyBNRSAjIyMgc3dpdGNoIHRvIGFkZC9yZW1vdmUgImhpZGRlbiIgY2xhc3MKICBmb2xkOiBmdW5jdGlvbiAoaXRlbSkgewogICAgaWYgKGl0ZW0pCiAgICB7CiAgICAgIHRoaXMucmVtb3ZlX2NsYXNzKGl0ZW0sICJ1bmZvbGRlZCIpOwogICAgICB0aGlzLmFkZF9jbGFzcyhpdGVtLCAiZm9sZGVkIik7CiAgICB9CgogICAgdmFyIG5vZGUgPSBpdGVtID8gaXRlbS5maXJzdENoaWxkIDogbnVsbDsKCiAgICB3aGlsZSAobm9kZSkKICAgIHsKICAgICAgaWYgKG5vZGUubm9kZVR5cGUgPT0gMSAmJiB0aGlzLmlzX2Jsb2NrKG5vZGUpKSAvLyBlbGVtZW50CiAgICAgIHsKICAgICAgICAgdzNjX3NsaWR5LmFkZF9jbGFzcyhub2RlLCAiaGlkZGVuIik7CiAgICAgIH0KCiAgICAgIG5vZGUgPSBub2RlLm5leHRTaWJsaW5nOwogICAgfQoKICAgIGl0ZW0udmlzaWJsZSA9IGZhbHNlOwogIH0sCgogIC8vICMjIyBDSEVDSyBNRSAjIyMgc3dpdGNoIHRvIGFkZC9yZW1vdmUgImhpZGRlbiIgY2xhc3MKICB1bmZvbGQ6IGZ1bmN0aW9uIChpdGVtKSB7CiAgICBpZiAoaXRlbSkKICAgIHsKICAgICAgdGhpcy5hZGRfY2xhc3MoaXRlbSwgInVuZm9sZGVkIik7CiAgICAgIHRoaXMucmVtb3ZlX2NsYXNzKGl0ZW0sICJmb2xkZWQiKTsKICAgIH0KCiAgICB2YXIgbm9kZSA9IGl0ZW0gPyBpdGVtLmZpcnN0Q2hpbGQgOiBudWxsOwoKICAgIHdoaWxlIChub2RlKQogICAgewogICAgICBpZiAobm9kZS5ub2RlVHlwZSA9PSAxICYmIHRoaXMuaXNfYmxvY2sobm9kZSkpIC8vIGVsZW1lbnQKICAgICAgewogICAgICAgIHczY19zbGlkeS5yZW1vdmVfY2xhc3Mobm9kZSwgImhpZGRlbiIpOwogICAgICB9CgogICAgICBub2RlID0gbm9kZS5uZXh0U2libGluZzsKICAgIH0KCiAgICBpdGVtLnZpc2libGUgPSB0cnVlOwogIH0sCgogIG91dGxpbmVfY2xpY2s6IGZ1bmN0aW9uIChlKSB7CiAgICBpZiAoIWUpCiAgICAgIGUgPSB3aW5kb3cuZXZlbnQ7CgogICAgdmFyIHJpZ2h0Y2xpY2sgPSBmYWxzZTsKICAgIHZhciB0YXJnZXQgPSB3M2Nfc2xpZHkuZ2V0X3RhcmdldChlKTsKCiAgICB3aGlsZSAodGFyZ2V0ICYmIHRhcmdldC52aXNpYmxlID09IHVuZGVmaW5lZCkKICAgICAgdGFyZ2V0ID0gdGFyZ2V0LnBhcmVudE5vZGU7CgogICAgaWYgKCF0YXJnZXQpCiAgICAgIHJldHVybiB0cnVlOwoKICAgIGlmIChlLndoaWNoKQogICAgICByaWdodGNsaWNrID0gKGUud2hpY2ggPT0gMyk7CiAgICBlbHNlIGlmIChlLmJ1dHRvbikKICAgICAgcmlnaHRjbGljayA9IChlLmJ1dHRvbiA9PSAyKTsKCiAgICBpZiAoIXJpZ2h0Y2xpY2sgJiYgdGFyZ2V0LnZpc2libGUgIT0gdW5kZWZpbmVkKQogICAgewogICAgICBpZiAodGFyZ2V0LmZvbGRhYmxlKQogICAgICB7CiAgICAgICAgaWYgKHRhcmdldC52aXNpYmxlKQogICAgICAgICAgdzNjX3NsaWR5LmZvbGQodGFyZ2V0KTsKICAgICAgICBlbHNlCiAgICAgICAgICB3M2Nfc2xpZHkudW5mb2xkKHRhcmdldCk7CiAgICAgIH0KCiAgICAgIHczY19zbGlkeS5zdG9wX3Byb3BhZ2F0aW9uKGUpOwogICAgICBlLmNhbmNlbCA9IHRydWU7CiAgICAgIGUucmV0dXJuVmFsdWUgPSBmYWxzZTsKICAgIH0KCiAgICByZXR1cm4gZmFsc2U7CiAgfSwKCiAgYWRkX2luaXRpYWxfcHJvbXB0OiBmdW5jdGlvbiAoKSB7CiAgICB2YXIgcHJvbXB0ID0gdGhpcy5jcmVhdGVfZWxlbWVudCgiZGl2Iik7CiAgICBwcm9tcHQuc2V0QXR0cmlidXRlKCJjbGFzcyIsICJpbml0aWFsX3Byb21wdCIpOwoKICAgIHZhciBwMSA9IHRoaXMuY3JlYXRlX2VsZW1lbnQoInAiKTsKICAgIHByb21wdC5hcHBlbmRDaGlsZChwMSk7CiAgICBwMS5zZXRBdHRyaWJ1dGUoImNsYXNzIiwgImhlbHAiKTsKCiAgICBpZiAodGhpcy5rZXlib2FyZGxlc3MpCiAgICAgIHAxLmlubmVySFRNTCA9ICJzd2lwZSBsZWZ0IHRvIG1vdmUgdG8gbmV4dCBzbGlkZSI7CiAgICBlbHNlCiAgICAgIHAxLmlubmVySFRNTCA9ICJTcGFjZSwgUmlnaHQgQXJyb3cgb3Igc3dpcGUgbGVmdCB0byBtb3ZlIHRvICIgKwogICAgICAgICAgICAgICAgICAgICAibmV4dCBzbGlkZSwgY2xpY2sgaGVscCBiZWxvdyBmb3IgbW9yZSBkZXRhaWxzIjsKCiAgICB0aGlzLmFkZF9saXN0ZW5lcihwcm9tcHQsICJjbGljayIsIGZ1bmN0aW9uIChlKSB7CiAgICAgIGRvY3VtZW50LmJvZHkucmVtb3ZlQ2hpbGQocHJvbXB0KTsKICAgICAgdzNjX3NsaWR5LnN0b3BfcHJvcGFnYXRpb24oZSk7CiAgICAKICAgICAgaWYgKGUuY2FuY2VsICE9IHVuZGVmaW5lZCkKICAgICAgICBlLmNhbmNlbCA9IHRydWU7CiAgICAgIAogICAgICBpZiAoZS5yZXR1cm5WYWx1ZSAhPSB1bmRlZmluZWQpCiAgICAgICAgZS5yZXR1cm5WYWx1ZSA9IGZhbHNlOwogICAgICAKICAgICAgcmV0dXJuIGZhbHNlOwogICAgfSk7CgogICAgZG9jdW1lbnQuYm9keS5hcHBlbmRDaGlsZChwcm9tcHQpOwogICAgdGhpcy5pbml0aWFsX3Byb21wdCA9IHByb21wdDsKICAgIHNldFRpbWVvdXQoZnVuY3Rpb24oKSB7ZG9jdW1lbnQuYm9keS5yZW1vdmVDaGlsZChwcm9tcHQpO30sIDUwMDApOwogIH0sCgogIGFkZF90b29sYmFyOiBmdW5jdGlvbiAoKSB7CiAgICB2YXIgY291bnRlciwgcGFnZTsKCiAgICAgdGhpcy50b29sYmFyID0gdGhpcy5jcmVhdGVfZWxlbWVudCgiZGl2Iik7CiAgICAgdGhpcy50b29sYmFyLnNldEF0dHJpYnV0ZSgiY2xhc3MiLCAidG9vbGJhciIpOwoKICAgICAvLyBhIHJlYXNvbmFibHkgYmVoYXZlZCBicm93c2VyCiAgICAgaWYgKHRoaXMubnNfcG9zIHx8ICF0aGlzLmllNikKICAgICB7CiAgICAgICB2YXIgcmlnaHQgPSB0aGlzLmNyZWF0ZV9lbGVtZW50KCJkaXYiKTsKICAgICAgIHJpZ2h0LnNldEF0dHJpYnV0ZSgic3R5bGUiLCAiZmxvYXQ6IHJpZ2h0OyB0ZXh0LWFsaWduOiByaWdodCIpOwoKICAgICAgIGNvdW50ZXIgPSB0aGlzLmNyZWF0ZV9lbGVtZW50KCJzcGFuIikKICAgICAgIGNvdW50ZXIuaW5uZXJIVE1MID0gdGhpcy5sb2NhbGl6ZSgic2xpZGUiKSArICIgbi9tIjsKICAgICAgIHJpZ2h0LmFwcGVuZENoaWxkKGNvdW50ZXIpOwogICAgICAgdGhpcy50b29sYmFyLmFwcGVuZENoaWxkKHJpZ2h0KTsKCiAgICAgICB2YXIgbGVmdCA9IHRoaXMuY3JlYXRlX2VsZW1lbnQoImRpdiIpOwogICAgICAgbGVmdC5zZXRBdHRyaWJ1dGUoInN0eWxlIiwgInRleHQtYWxpZ246IGxlZnQiKTsKCiAgICAgICAvLyBnbG9iYWwgZW5kIG9mIHNsaWRlIGluZGljYXRvcgogICAgICAgdGhpcy5lb3MgPSB0aGlzLmNyZWF0ZV9lbGVtZW50KCJzcGFuIik7CiAgICAgICB0aGlzLmVvcy5pbm5lckhUTUwgPSAiKiAiOwogICAgICAgbGVmdC5hcHBlbmRDaGlsZCh0aGlzLmVvcyk7CgogICAgICAgdmFyIGhlbHAgPSB0aGlzLmNyZWF0ZV9lbGVtZW50KCJhIik7CiAgICAgICBoZWxwLnNldEF0dHJpYnV0ZSgiaHJlZiIsIHRoaXMuaGVscF9wYWdlKTsKICAgICAgIGhlbHAuc2V0QXR0cmlidXRlKCJ0aXRsZSIsIHRoaXMubG9jYWxpemUodGhpcy5oZWxwX3RleHQpKTsKICAgICAgIGhlbHAuaW5uZXJIVE1MID0gdGhpcy5sb2NhbGl6ZSgiaGVscD8iKTsKICAgICAgIGxlZnQuYXBwZW5kQ2hpbGQoaGVscCk7CiAgICAgICBoZWxwLnN0eWxlLmRpc3BsYXk9Im5vbmUiOyAKICAgICAgIHRoaXMuaGVscF9hbmNob3IgPSBoZWxwOyAgLy8gc2F2ZSBmb3IgZm9jdXMgaGFjawoKICAgICAgIHZhciBnYXAxID0gZG9jdW1lbnQuY3JlYXRlVGV4dE5vZGUoIiAiKTsKICAgICAgIGxlZnQuYXBwZW5kQ2hpbGQoZ2FwMSk7CgogICAgICAgdmFyIGNvbnRlbnRzID0gdGhpcy5jcmVhdGVfZWxlbWVudCgiYSIpOwogICAgICAgY29udGVudHMuc2V0QXR0cmlidXRlKCJocmVmIiwgImphdmFzY3JpcHQ6dzNjX3NsaWR5LnRvZ2dsZV90YWJsZV9vZl9jb250ZW50cygpIik7CiAgICAgICBjb250ZW50cy5zZXRBdHRyaWJ1dGUoInRpdGxlIiwgdGhpcy5sb2NhbGl6ZSgidGFibGUgb2YgY29udGVudHMiKSk7CiAgICAgICBjb250ZW50cy5pbm5lckhUTUwgPSB0aGlzLmxvY2FsaXplKCJDb250ZW50cyIpOwogICAgICAgbGVmdC5hcHBlbmRDaGlsZChjb250ZW50cyk7CgogICAgICAgdmFyIGdhcDIgPSBkb2N1bWVudC5jcmVhdGVUZXh0Tm9kZSgiICIpOwogICAgICAgbGVmdC5hcHBlbmRDaGlsZChnYXAyKTsKCiAgICAgICB2YXIgY29weXJpZ2h0ID0gdGhpcy5maW5kX2NvcHlyaWdodCgpOwoKICAgICAgIGlmIChjb3B5cmlnaHQpCiAgICAgICB7CiAgICAgICAgIHZhciBzcGFuID0gdGhpcy5jcmVhdGVfZWxlbWVudCgic3BhbiIpOwogICAgICAgICBzcGFuLmNsYXNzTmFtZSA9ICJjb3B5cmlnaHQiOwogICAgICAgICBzcGFuLmlubmVySFRNTCA9IGNvcHlyaWdodDsKICAgICAgICAgbGVmdC5hcHBlbmRDaGlsZChzcGFuKTsKICAgICAgIH0KCiAgICAgICB0aGlzLnRvb2xiYXIuc2V0QXR0cmlidXRlKCJ0YWJpbmRleCIsICIwIik7CiAgICAgICB0aGlzLnRvb2xiYXIuYXBwZW5kQ2hpbGQobGVmdCk7CiAgICAgfQogICAgIGVsc2UgLy8gSUU2IHNvIG5lZWQgdG8gd29yayBhcm91bmQgaXRzIHBvb3IgQ1NTIHN1cHBvcnQKICAgICB7CiAgICAgICB0aGlzLnRvb2xiYXIuc3R5bGUucG9zaXRpb24gPSAodGhpcy5pZTcgPyAiZml4ZWQiIDogImFic29sdXRlIik7CiAgICAgICB0aGlzLnRvb2xiYXIuc3R5bGUuekluZGV4ID0gIjIwMCI7CiAgICAgICB0aGlzLnRvb2xiYXIuc3R5bGUud2lkdGggPSAiOTkuOSUiOwogICAgICAgdGhpcy50b29sYmFyLnN0eWxlLmhlaWdodCA9ICIxLjJlbSI7CiAgICAgICB0aGlzLnRvb2xiYXIuc3R5bGUudG9wID0gImF1dG8iOwogICAgICAgdGhpcy50b29sYmFyLnN0eWxlLmJvdHRvbSA9ICIwIjsKICAgICAgIHRoaXMudG9vbGJhci5zdHlsZS5sZWZ0ID0gIjAiOwogICAgICAgdGhpcy50b29sYmFyLnN0eWxlLnJpZ2h0ID0gIjAiOwogICAgICAgdGhpcy50b29sYmFyLnN0eWxlLnRleHRBbGlnbiA9ICJsZWZ0IjsKICAgICAgIHRoaXMudG9vbGJhci5zdHlsZS5mb250U2l6ZSA9ICI2MCUiOwogICAgICAgdGhpcy50b29sYmFyLnN0eWxlLmNvbG9yID0gInJlZCI7CiAgICAgICB0aGlzLnRvb2xiYXIuYm9yZGVyV2lkdGggPSAwOwogICAgICAgdGhpcy50b29sYmFyLmNsYXNzTmFtZSA9ICJ0b29sYmFyIjsKICAgICAgIHRoaXMudG9vbGJhci5zdHlsZS5iYWNrZ3JvdW5kID0gInJnYigyNDAsMjQwLDI0MCkiOwoKICAgICAgIC8vIHdvdWxkIGxpa2UgdG8gaGF2ZSBoZWxwIHRleHQgbGVmdCBhbGlnbmVkCiAgICAgICAvLyBhbmQgcGFnZSBjb3VudGVyIHJpZ2h0IGFsaWduZWQsIGZsb2F0aW5nCiAgICAgICAvLyBkaXYncyBkb24ndCB3b3JrLCBzbyBpbnN0ZWFkIHVzZSBuZXN0ZWQKICAgICAgIC8vIGFic29sdXRlbHkgcG9zaXRpb25lZCBkaXYncy4KCiAgICAgICB2YXIgc3AgPSB0aGlzLmNyZWF0ZV9lbGVtZW50KCJzcGFuIik7CiAgICAgICBzcC5pbm5lckhUTUwgPSAiJm5ic3A7Jm5ic3A7KiZuYnNwOyI7CiAgICAgICB0aGlzLnRvb2xiYXIuYXBwZW5kQ2hpbGQoc3ApOwogICAgICAgdGhpcy5lb3MgPSBzcDsgIC8vIGVuZCBvZiBzbGlkZSBpbmRpY2F0b3IKCiAgICAgICB2YXIgaGVscCA9IHRoaXMuY3JlYXRlX2VsZW1lbnQoImEiKTsKICAgICAgIGhlbHAuc2V0QXR0cmlidXRlKCJocmVmIiwgdGhpcy5oZWxwX3BhZ2UpOwogICAgICAgaGVscC5zZXRBdHRyaWJ1dGUoInRpdGxlIiwgdGhpcy5sb2NhbGl6ZSh0aGlzLmhlbHBfdGV4dCkpOwogICAgICAgaGVscC5pbm5lckhUTUwgPSB0aGlzLmxvY2FsaXplKCJoZWxwPyIpOwogICAgICAgdGhpcy50b29sYmFyLmFwcGVuZENoaWxkKGhlbHApOwogICAgICAgdGhpcy5oZWxwX2FuY2hvciA9IGhlbHA7ICAvLyBzYXZlIGZvciBmb2N1cyBoYWNrCgogICAgICAgdmFyIGdhcDEgPSBkb2N1bWVudC5jcmVhdGVUZXh0Tm9kZSgiICIpOwogICAgICAgdGhpcy50b29sYmFyLmFwcGVuZENoaWxkKGdhcDEpOwoKICAgICAgIHZhciBjb250ZW50cyA9IHRoaXMuY3JlYXRlX2VsZW1lbnQoImEiKTsKICAgICAgIGNvbnRlbnRzLnNldEF0dHJpYnV0ZSgiaHJlZiIsICJqYXZhc2NyaXB0OnRvZ2dsZVRhYmxlT2ZDb250ZW50cygpIik7CiAgICAgICBjb250ZW50cy5zZXRBdHRyaWJ1dGUoInRpdGxlIiwgdGhpcy5sb2NhbGl6ZSgidGFibGUgb2YgY29udGVudHMiLmxvY2FsaXplKSk7CiAgICAgICBjb250ZW50cy5pbm5lckhUTUwgPSB0aGlzLmxvY2FsaXplKCJjb250ZW50cz8iKTsKICAgICAgIHRoaXMudG9vbGJhci5hcHBlbmRDaGlsZChjb250ZW50cyk7CgogICAgICAgdmFyIGdhcDIgPSBkb2N1bWVudC5jcmVhdGVUZXh0Tm9kZSgiICIpOwogICAgICAgdGhpcy50b29sYmFyLmFwcGVuZENoaWxkKGdhcDIpOwoKICAgICAgIHZhciBjb3B5cmlnaHQgPSB0aGlzLmZpbmRfY29weXJpZ2h0KCk7CgogICAgICAgaWYgKGNvcHlyaWdodCkKICAgICAgIHsKICAgICAgICAgdmFyIHNwYW4gPSB0aGlzLmNyZWF0ZV9lbGVtZW50KCJzcGFuIik7CiAgICAgICAgIHNwYW4uaW5uZXJIVE1MID0gY29weXJpZ2h0OwogICAgICAgICBzcGFuLnN0eWxlLmNvbG9yID0gImJsYWNrIjsKICAgICAgICAgc3Bhbi5zdHlsZS5tYXJnaW5MZWZ0ID0gIjAuNWVtIjsKICAgICAgICAgdGhpcy50b29sYmFyLmFwcGVuZENoaWxkKHNwYW4pOwogICAgICAgfQoKICAgICAgIGNvdW50ZXIgPSB0aGlzLmNyZWF0ZV9lbGVtZW50KCJkaXYiKQogICAgICAgY291bnRlci5zdHlsZS5wb3NpdGlvbiA9ICJhYnNvbHV0ZSI7CiAgICAgICBjb3VudGVyLnN0eWxlLndpZHRoID0gImF1dG8iOyAvLyIyMCUiOwogICAgICAgY291bnRlci5zdHlsZS5oZWlnaHQgPSAiMS4yZW0iOwogICAgICAgY291bnRlci5zdHlsZS50b3AgPSAiYXV0byI7CiAgICAgICBjb3VudGVyLnN0eWxlLmJvdHRvbSA9IDA7CiAgICAgICBjb3VudGVyLnN0eWxlLnJpZ2h0ID0gIjAiOwogICAgICAgY291bnRlci5zdHlsZS50ZXh0QWxpZ24gPSAicmlnaHQiOwogICAgICAgY291bnRlci5zdHlsZS5jb2xvciA9ICJyZWQiOwogICAgICAgY291bnRlci5zdHlsZS5iYWNrZ3JvdW5kID0gInJnYigyNDAsMjQwLDI0MCkiOwoKICAgICAgIGNvdW50ZXIuaW5uZXJIVE1MID0gdGhpcy5sb2NhbGl6ZSgic2xpZGUiKSArICIgbi9tIjsKICAgICAgIHRoaXMudG9vbGJhci5hcHBlbmRDaGlsZChjb3VudGVyKTsKICAgICB9CgogICAgIC8vIGVuc3VyZSB0aGF0IGNsaWNrIGlzbid0IHBhc3NlZCB0aHJvdWdoIHRvIHRoZSBwYWdlCiAgICAgdGhpcy50b29sYmFyLm9uY2xpY2sgPQogICAgICAgICBmdW5jdGlvbiAoZSkgewogICAgICAgICAgIGlmICghZSkKICAgICAgICAgICAgIGUgPSB3aW5kb3cuZXZlbnQ7CgogICAgICAgICAgIHZhciB0YXJnZXQgPSBlLnRhcmdldDsKCiAgICAgICAgICAgaWYgKCF0YXJnZXQgJiYgZS5zcmNFbGVtZW50KQogICAgICAgICAgICAgdGFyZ2V0ID0gZS5zcmNFbGVtZW50OwoKICAgICAgICAgICAvLyB3b3JrIGFyb3VuZCBTYWZhcmkgYnVnCiAgICAgICAgICAgaWYgKHRhcmdldCAmJiB0YXJnZXQubm9kZVR5cGUgPT0gMykKICAgICAgICAgICAgIHRhcmdldCA9IHRhcmdldC5wYXJlbnROb2RlOwoKICAgICAgICAgICB3M2Nfc2xpZHkuc3RvcF9wcm9wYWdhdGlvbihlKTsKCiAgICAgICAgICAgaWYgKHRhcmdldCAmJiB0YXJnZXQubm9kZU5hbWUudG9Mb3dlckNhc2UoKSAhPSAiYSIpCiAgICAgICAgICAgICB3M2Nfc2xpZHkubW91c2VfYnV0dG9uX2NsaWNrKGUpOwogICAgICAgICB9OwoKICAgICB0aGlzLnNsaWRlX251bWJlcl9lbGVtZW50ID0gY291bnRlcjsKICAgICB0aGlzLnNldF9lb3Nfc3RhdHVzKGZhbHNlKTsKICAgICBkb2N1bWVudC5ib2R5LmFwcGVuZENoaWxkKHRoaXMudG9vbGJhcik7CiAgfSwKCiAgLy8gd3lzaXd5ZyBlZGl0b3JzIG1ha2UgaXQgaGFyZCB0byB1c2UgZGl2IGVsZW1lbnRzCiAgLy8gZS5nLiBhbWF5YSBsb3NlcyB0aGUgZGl2IHdoZW4geW91IGNvcHkgYW5kIHBhc3RlCiAgLy8gdGhpcyBmdW5jdGlvbiB3cmFwcyBkaXYgZWxlbWVudHMgYXJvdW5kIGltcGxpY2l0CiAgLy8gc2xpZGVzIHdoaWNoIHN0YXJ0IHdpdGggYW4gaDEgZWxlbWVudCBhbmQgY29udGludWUKICAvLyB1cCB0byB0aGUgbmV4dCBoZWFkaW5nIG9yIGRpdiBlbGVtZW50CiAgd3JhcF9pbXBsaWNpdF9zbGlkZXM6IGZ1bmN0aW9uICgpIHsKICAgIHZhciBpLCBoZWFkaW5nLCBub2RlLCBuZXh0LCBkaXY7CiAgICB2YXIgaGVhZGluZ3MgPSBkb2N1bWVudC5nZXRFbGVtZW50c0J5VGFnTmFtZSgiaDEiKTsKCiAgICBpZiAoIWhlYWRpbmdzKQogICAgICByZXR1cm47CgogICAgZm9yIChpID0gMDsgaSA8IGhlYWRpbmdzLmxlbmd0aDsgKytpKQogICAgewogICAgICBoZWFkaW5nID0gaGVhZGluZ3NbaV07CgogICAgICBpZiAoaGVhZGluZy5wYXJlbnROb2RlICE9IGRvY3VtZW50LmJvZHkpCiAgICAgICAgY29udGludWU7CgogICAgICBub2RlID0gaGVhZGluZy5uZXh0U2libGluZzsKCiAgICAgIGRpdiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoImRpdiIpOwogICAgICB0aGlzLmFkZF9jbGFzcyhkaXYsICJzbGlkZSIpOwogICAgICBkb2N1bWVudC5ib2R5LnJlcGxhY2VDaGlsZChkaXYsIGhlYWRpbmcpOwogICAgICBkaXYuYXBwZW5kQ2hpbGQoaGVhZGluZyk7CgogICAgICB3aGlsZSAobm9kZSkKICAgICAgewogICAgICAgIGlmIChub2RlLm5vZGVUeXBlID09IDEpIC8vIGFuIGVsZW1lbnQKICAgICAgICB7CiAgICAgICAgICAgaWYgKG5vZGUubm9kZU5hbWUgPT0gIkgxIiB8fCBub2RlLm5vZGVOYW1lID09ICJoMSIpCiAgICAgICAgICAgICBicmVhazsKCiAgICAgICAgICAgaWYgKG5vZGUubm9kZU5hbWUgPT0gIkRJViIgfHwgbm9kZS5ub2RlTmFtZSA9PSAiZGl2IikKICAgICAgICAgICB7CiAgICAgICAgICAgICBpZiAodGhpcy5oYXNfY2xhc3Mobm9kZSwgInNsaWRlIikpCiAgICAgICAgICAgICAgIGJyZWFrOwoKICAgICAgICAgICAgIGlmICh0aGlzLmhhc19jbGFzcyhub2RlLCAiaGFuZG91dCIpKQogICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICB9CiAgICAgICAgfQoKICAgICAgICBuZXh0ID0gbm9kZS5uZXh0U2libGluZzsKICAgICAgICBub2RlID0gZG9jdW1lbnQuYm9keS5yZW1vdmVDaGlsZChub2RlKTsKICAgICAgICBkaXYuYXBwZW5kQ2hpbGQobm9kZSk7CiAgICAgICAgbm9kZSA9IG5leHQ7CiAgICAgIH0gCiAgICB9CiAgfSwKCiAgYXR0YWNoX3RvdWNoX2hhbmRlcnM6IGZ1bmN0aW9uKHNsaWRlcykKICB7CiAgICB2YXIgaSwgc2xpZGU7CgogICAgZm9yIChpID0gMDsgaSA8IHNsaWRlcy5sZW5ndGg7ICsraSkKICAgIHsKICAgICAgc2xpZGUgPSBzbGlkZXNbaV07CiAgICAgIHRoaXMuYWRkX2xpc3RlbmVyKHNsaWRlLCAidG91Y2hzdGFydCIsIHRoaXMudG91Y2hzdGFydCk7CiAgICAgIHRoaXMuYWRkX2xpc3RlbmVyKHNsaWRlLCAidG91Y2htb3ZlIiwgdGhpcy50b3VjaG1vdmUpOwogICAgICB0aGlzLmFkZF9saXN0ZW5lcihzbGlkZSwgInRvdWNoZW5kIiwgdGhpcy50b3VjaGVuZCk7CiAgICB9CiAgfSwKCi8vIHJldHVybiBuZXcgYXJyYXkgb2YgYWxsIHNsaWRlcwogIGNvbGxlY3Rfc2xpZGVzOiBmdW5jdGlvbiAoKSB7CiAgICB2YXIgc2xpZGVzID0gbmV3IEFycmF5KCk7CiAgICB2YXIgZGl2cyA9IGRvY3VtZW50LmJvZHkuZ2V0RWxlbWVudHNCeVRhZ05hbWUoImRpdiIpOwoKICAgIGZvciAodmFyIGkgPSAwOyBpIDwgZGl2cy5sZW5ndGg7ICsraSkKICAgIHsKICAgICAgZGl2ID0gZGl2cy5pdGVtKGkpOwoKICAgICAgaWYgKHRoaXMuaGFzX2NsYXNzKGRpdiwgInNsaWRlIikpCiAgICAgIHsKICAgICAgICAvLyBhZGQgc2xpZGUgdG8gY29sbGVjdGlvbgogICAgICAgIHNsaWRlc1tzbGlkZXMubGVuZ3RoXSA9IGRpdjsKCiAgICAgICAgLy8gaGlkZSBlYWNoIHNsaWRlIGFzIGl0IGlzIGZvdW5kCiAgICAgICAgdGhpcy5hZGRfY2xhc3MoZGl2LCAiaGlkZGVuIik7CgogICAgICAgIC8vIGFkZCBkdW1teSA8YnIvPiBhdCBlbmQgZm9yIHNjcm9sbGluZyBoYWNrCiAgICAgICAgdmFyIG5vZGUxID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgiYnIiKTsKICAgICAgICBkaXYuYXBwZW5kQ2hpbGQobm9kZTEpOwogICAgICAgIHZhciBub2RlMiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoImJyIik7CiAgICAgICAgZGl2LmFwcGVuZENoaWxkKG5vZGUyKTsKICAgICAgfQogICAgICBlbHNlIGlmICh0aGlzLmhhc19jbGFzcyhkaXYsICJiYWNrZ3JvdW5kIikpCiAgICAgIHsgIC8vIHdvcmsgYXJvdW5kIGZvciBGaXJlZm94IFNWRyByZWxvYWQgYnVnCiAgICAgICAgLy8gd2hpY2ggb3RoZXJ3aXNlIHJlcGxhY2VzIDFzdCBTVkcgZ3JhcGhpYyB3aXRoIDJuZAogICAgICAgIGRpdi5zdHlsZS5kaXNwbGF5ID0gImJsb2NrIjsKICAgICAgfQogICAgfQoKICAgIHRoaXMuc2xpZGVzID0gc2xpZGVzOwogIH0sCgogIC8vIHJldHVybiBuZXcgYXJyYXkgb2YgYWxsIDxkaXYgY2xhc3M9ImhhbmRvdXQiPgogIGNvbGxlY3Rfbm90ZXM6IGZ1bmN0aW9uICgpIHsKICAgIHZhciBub3RlcyA9IG5ldyBBcnJheSgpOwogICAgdmFyIGRpdnMgPSBkb2N1bWVudC5ib2R5LmdldEVsZW1lbnRzQnlUYWdOYW1lKCJkaXYiKTsKCiAgICBmb3IgKHZhciBpID0gMDsgaSA8IGRpdnMubGVuZ3RoOyArK2kpCiAgICB7CiAgICAgIGRpdiA9IGRpdnMuaXRlbShpKTsKCiAgICAgIGlmICh0aGlzLmhhc19jbGFzcyhkaXYsICJoYW5kb3V0IikpCiAgICAgIHsKICAgICAgICAvLyBhZGQgbm90ZSB0byBjb2xsZWN0aW9uCiAgICAgICAgbm90ZXNbbm90ZXMubGVuZ3RoXSA9IGRpdjsKCiAgICAgICAgLy8gYW5kIGhpZGUgaXQKICAgICAgICB0aGlzLmFkZF9jbGFzcyhkaXYsICJoaWRkZW4iKTsKICAgICAgfQogICAgfQoKICAgIHRoaXMubm90ZXMgPSBub3RlczsKICB9LAoKICAvLyByZXR1cm4gbmV3IGFycmF5IG9mIGFsbCA8ZGl2IGNsYXNzPSJiYWNrZ3JvdW5kIj4KICAvLyBpbmNsdWRpbmcgbmFtZWQgYmFja2dyb3VuZHMgZS5nLiBjbGFzcz0iYmFja2dyb3VuZCB0aXRsZXBhZ2UiCiAgY29sbGVjdF9iYWNrZ3JvdW5kczogZnVuY3Rpb24gKCkgewogICAgdmFyIGJhY2tncm91bmRzID0gbmV3IEFycmF5KCk7CiAgICB2YXIgZGl2cyA9IGRvY3VtZW50LmJvZHkuZ2V0RWxlbWVudHNCeVRhZ05hbWUoImRpdiIpOwoKICAgIGZvciAodmFyIGkgPSAwOyBpIDwgZGl2cy5sZW5ndGg7ICsraSkKICAgIHsKICAgICAgZGl2ID0gZGl2cy5pdGVtKGkpOwoKICAgICAgaWYgKHRoaXMuaGFzX2NsYXNzKGRpdiwgImJhY2tncm91bmQiKSkKICAgICAgewogICAgICAgIC8vIGFkZCBiYWNrZ3JvdW5kIHRvIGNvbGxlY3Rpb24KICAgICAgICBiYWNrZ3JvdW5kc1tiYWNrZ3JvdW5kcy5sZW5ndGhdID0gZGl2OwoKICAgICAgICAvLyBhbmQgaGlkZSBpdAogICAgICAgIHRoaXMuYWRkX2NsYXNzKGRpdiwgImhpZGRlbiIpOwogICAgICB9CiAgICB9CgogICAgdGhpcy5iYWNrZ3JvdW5kcyA9IGJhY2tncm91bmRzOwogIH0sCgogIC8vIHNldCBjbGljayBoYW5kbGVycyBvbiBhbGwgYW5jaG9ycwogIHBhdGNoX2FuY2hvcnM6IGZ1bmN0aW9uICgpIHsKICAgIHZhciBzZWxmID0gdzNjX3NsaWR5OwogICAgdmFyIGhhbmRsZXIgPSBmdW5jdGlvbiAoZXZlbnQpIHsKICAgICAgLy8gY29tcGFyZSB0aGlzLmhyZWYgd2l0aCBsb2NhdGlvbi5ocmVmCiAgICAgIC8vIGZvciBsaW5rIHRvIGFub3RoZXIgc2xpZGUgaW4gdGhpcyBkb2MKCiAgICAgIGlmIChzZWxmLnBhZ2VfYWRkcmVzcyh0aGlzLmhyZWYpID09IHNlbGYucGFnZV9hZGRyZXNzKGxvY2F0aW9uLmhyZWYpKQogICAgICB7CiAgICAgICAgLy8geWVzLCBzbyBmaW5kIG5ldyBzbGlkZSBudW1iZXIKICAgICAgICB2YXIgbmV3c2xpZGVudW0gPSBzZWxmLmZpbmRfc2xpZGVfbnVtYmVyKHRoaXMuaHJlZik7CgogICAgICAgIGlmIChuZXdzbGlkZW51bSAhPSBzZWxmLnNsaWRlX251bWJlcikKICAgICAgICB7CiAgICAgICAgICB2YXIgc2xpZGUgPSBzZWxmLnNsaWRlc1tzZWxmLnNsaWRlX251bWJlcl07CiAgICAgICAgICBzZWxmLmhpZGVfc2xpZGUoc2xpZGUpOwogICAgICAgICAgc2VsZi5zbGlkZV9udW1iZXIgPSBuZXdzbGlkZW51bTsKICAgICAgICAgIHNsaWRlID0gc2VsZi5zbGlkZXNbc2VsZi5zbGlkZV9udW1iZXJdOwogICAgICAgICAgc2VsZi5zaG93X3NsaWRlKHNsaWRlKTsKICAgICAgICAgIHNlbGYuc2V0X2xvY2F0aW9uKCk7CiAgICAgICAgfQogICAgICB9CiAgICAgIGVsc2UKICAgICAgICB3M2Nfc2xpZHkuc3RvcF9wcm9wYWdhdGlvbihldmVudCk7CgovLyAgICAgIGVsc2UgaWYgKHRoaXMudGFyZ2V0ID09IG51bGwpCi8vICAgICAgICBsb2NhdGlvbi5ocmVmID0gdGhpcy5ocmVmOwoKICAgICAgdGhpcy5ibHVyKCk7CiAgICAgIHNlbGYuZGlzYWJsZV9zbGlkZV9jbGljayA9IHRydWU7CiAgICB9OwoKICAgIHZhciBhbmNob3JzID0gZG9jdW1lbnQuYm9keS5nZXRFbGVtZW50c0J5VGFnTmFtZSgiYSIpOwoKICAgIGZvciAodmFyIGkgPSAwOyBpIDwgYW5jaG9ycy5sZW5ndGg7ICsraSkKICAgIHsKICAgICAgaWYgKHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKQogICAgICAgIGFuY2hvcnNbaV0uYWRkRXZlbnRMaXN0ZW5lcigiY2xpY2siLCBoYW5kbGVyLCBmYWxzZSk7CiAgICAgIGVsc2UKICAgICAgICBhbmNob3JzW2ldLmF0dGFjaEV2ZW50KCJvbmNsaWNrIiwgaGFuZGxlcik7CiAgICB9CiAgfSwKCiAgLy8gIyMjIENIRUNLIE1FICMjIyBzZWUgd2hpY2ggZnVuY3Rpb25zIGFyZSBpbnZva2VkIHZpYSBzZXRUaW1lb3V0CiAgLy8gZWl0aGVyIGRpcmVjdGx5IG9yIGluZGlyZWN0bHkgZm9yIHVzZSBvZiB3M2Nfc2xpZHkgdnMgdGhpcwogIHNob3dfc2xpZGVfbnVtYmVyOiBmdW5jdGlvbiAoKSB7CiAgICB2YXIgdGltZXIgPSB3M2Nfc2xpZHkuZ2V0X3RpbWVyKCk7CiAgICB3M2Nfc2xpZHkuc2xpZGVfbnVtYmVyX2VsZW1lbnQuaW5uZXJIVE1MID0gdGltZXIgKyB3M2Nfc2xpZHkubG9jYWxpemUoInNsaWRlIikgKyAiICIgKwogICAgICAgICAgICh3M2Nfc2xpZHkuc2xpZGVfbnVtYmVyICsgMSkgKyAiLyIgKyB3M2Nfc2xpZHkuc2xpZGVzLmxlbmd0aDsKICB9LAoKICAvLyBldmVyeSAyMDBtUyBjaGVjayBpZiB0aGUgbG9jYXRpb24gaGFzIGJlZW4gY2hhbmdlZCBhcyBhCiAgLy8gcmVzdWx0IG9mIHRoZSB1c2VyIGFjdGl2YXRpbmcgdGhlIEJhY2sgYnV0dG9uL21lbnUgaXRlbQogIC8vIGRvZXNuJ3Qgd29yayBmb3IgT3BlcmEgPCA5LjUKICBjaGVja19sb2NhdGlvbjogZnVuY3Rpb24gKCkgewogICAgdmFyIGhhc2ggPSBsb2NhdGlvbi5oYXNoOwoKICAgIGlmICh3M2Nfc2xpZHkuc2xpZGVfbnVtYmVyID4gMCAmJiAoaGFzaCA9PSAiIiB8fCBoYXNoID09ICIjIikpCiAgICAgIHczY19zbGlkeS5nb3RvX3NsaWRlKDApOwogICAgZWxzZSBpZiAoaGFzaC5sZW5ndGggPiAyICYmIGhhc2ggIT0gIiMoIisodzNjX3NsaWR5LnNsaWRlX251bWJlcisxKSsiKSIpCiAgICB7CiAgICAgIHZhciBudW0gPSBwYXJzZUludChsb2NhdGlvbi5oYXNoLnN1YnN0cigyKSk7CgogICAgICBpZiAoIWlzTmFOKG51bSkpCiAgICAgICAgdzNjX3NsaWR5LmdvdG9fc2xpZGUobnVtLTEpOwogICAgfQoKICAgIGlmICh3M2Nfc2xpZHkudGltZV9sZWZ0ICYmIHczY19zbGlkeS5zbGlkZV9udW1iZXIgPiAwKQogICAgewogICAgICB3M2Nfc2xpZHkuc2hvd19zbGlkZV9udW1iZXIoKTsKCiAgICAgIGlmICh3M2Nfc2xpZHkudGltZV9sZWZ0ID4gMCkKICAgICAgICB3M2Nfc2xpZHkudGltZV9sZWZ0IC09IDIwMDsKICAgIH0gCiAgfSwKCiAgZ2V0X3RpbWVyOiBmdW5jdGlvbiAoKSB7CiAgICB2YXIgdGltZXIgPSAiIjsKICAgIGlmICh3M2Nfc2xpZHkudGltZV9sZWZ0KQogICAgewogICAgICB2YXIgbWlucywgc2VjczsKICAgICAgc2VjcyA9IE1hdGguZmxvb3IodzNjX3NsaWR5LnRpbWVfbGVmdC8xMDAwKTsKICAgICAgbWlucyA9IE1hdGguZmxvb3Ioc2VjcyAvIDYwKTsKICAgICAgc2VjcyA9IHNlY3MgJSA2MDsKICAgICAgdGltZXIgPSAobWlucyA/IG1pbnMrIm0iIDogIiIpICsgc2VjcyArICJzICI7CiAgICB9CgogICAgcmV0dXJuIHRpbWVyOwogIH0sCgogIC8vIHRoaXMgZG9lc24ndCBwdXNoIGxvY2F0aW9uIG9udG8gaGlzdG9yeSBzdGFjayBmb3IgSUUKICAvLyBmb3Igd2hpY2ggYSBoaWRkZW4gaWZyYW1lIGhhY2sgaXMgbmVlZGVkOiBsb2FkIHBhZ2UgaW50bwogIC8vIHRoZSBpZnJhbWUgd2l0aCBzY3JpcHQgdGhhdCBzZXQncyBwYXJlbnQncyBsb2NhdGlvbi5oYXNoCiAgLy8gYnV0IHRoYXQgd29uJ3Qgd29yayBmb3Igc3RhbmRhbG9uZSB1c2UgdW5sZXNzIHdlIGNhbgogIC8vIGNyZWF0ZSB0aGUgcGFnZSBkeW5hbWljYWxseSB2aWEgYSBqYXZhc2NyaXB0OiBVUkwKICAvLyAjIyMgdXNlIGhpc3RvcnkucHVzaFN0YXRlIGlmIGF2YWlsYWJsZQogIHNldF9sb2NhdGlvbjogZnVuY3Rpb24gKCkgewogICAgIHZhciB1cmkgPSB3M2Nfc2xpZHkucGFnZV9hZGRyZXNzKGxvY2F0aW9uLmhyZWYpOwogICAgIHZhciBoYXNoID0gIiMoIiArICh3M2Nfc2xpZHkuc2xpZGVfbnVtYmVyKzEpICsgIikiOwoKICAgICBpZiAodzNjX3NsaWR5LnNsaWRlX251bWJlciA+PSAwKQogICAgICAgdXJpID0gdXJpICsgaGFzaDsKCiAgICAgaWYgKHR5cGVvZihoaXN0b3J5LnB1c2hTdGF0ZSkgIT0gInVuZGVmaW5lZCIgJiYgbG9jYXRpb24ucHJvdG9jb2wgIT09ICJmaWxlOiIpCiAgICAgewogICAgICAgZG9jdW1lbnQudGl0bGUgPSB3M2Nfc2xpZHkudGl0bGUgKyAiICgiICsgKHczY19zbGlkeS5zbGlkZV9udW1iZXIrMSkgKyAiKSI7CiAgICAgICBoaXN0b3J5LnB1c2hTdGF0ZSgwLCBkb2N1bWVudC50aXRsZSwgaGFzaCk7CiAgICAgICB3M2Nfc2xpZHkuc2hvd19zbGlkZV9udW1iZXIoKTsKICAgICAgIHczY19zbGlkeS5ub3RpZnlfb2JzZXJ2ZXJzKCk7CiAgICAgICByZXR1cm47CiAgICAgfQoKICAgICBpZiAodzNjX3NsaWR5LmllICYmICh3M2Nfc2xpZHkuaWU2IHx8IHczY19zbGlkeS5pZTcpKQogICAgICAgdzNjX3NsaWR5LnB1c2hfaGFzaChoYXNoKTsKCiAgICAgaWYgKHVyaSAhPSBsb2NhdGlvbi5ocmVmKSAvLyAmJiAha2h0bWwKICAgICAgICBsb2NhdGlvbi5ocmVmID0gdXJpOwoKICAgICBpZiAodGhpcy5raHRtbCkKICAgICAgICBoYXNoID0gIigiICsgKHczY19zbGlkeS5zbGlkZV9udW1iZXIrMSkgKyAiKSI7CgogICAgIGlmICghdGhpcy5pZSAmJiBsb2NhdGlvbi5oYXNoICE9IGhhc2ggJiYgbG9jYXRpb24uaGFzaCAhPSAiIikKICAgICAgIGxvY2F0aW9uLmhhc2ggPSBoYXNoOwoKICAgICBkb2N1bWVudC50aXRsZSA9IHczY19zbGlkeS50aXRsZSArICIgKCIgKyAodzNjX3NsaWR5LnNsaWRlX251bWJlcisxKSArICIpIjsKICAgICB3M2Nfc2xpZHkuc2hvd19zbGlkZV9udW1iZXIoKTsKICAgICB3M2Nfc2xpZHkubm90aWZ5X29ic2VydmVycygpOwogIH0sCgogIG5vdGlmeV9vYnNlcnZlcnM6IGZ1bmN0aW9uICgpCiAgewogICAgdmFyIHNsaWRlID0gdGhpcy5zbGlkZXNbdGhpcy5zbGlkZV9udW1iZXJdOwoKICAgIGZvciAodmFyIGkgPSAwOyBpIDwgdGhpcy5vYnNlcnZlcnMubGVuZ3RoOyArK2kpCiAgICAgIHRoaXMub2JzZXJ2ZXJzW2ldKHRoaXMuc2xpZGVfbnVtYmVyKzEsIHRoaXMuZmluZF9oZWFkaW5nKHNsaWRlKS5pbm5lclRleHQsIGxvY2F0aW9uLmhyZWYpOwogIH0sCgogIGFkZF9vYnNlcnZlcjogZnVuY3Rpb24gKG9ic2VydmVyKQogIHsKICAgIGZvciAodmFyIGkgPSAwOyBpIDwgdGhpcy5vYnNlcnZlcnMubGVuZ3RoOyArK2kpCiAgICB7CiAgICAgIGlmIChvYnNlcnZlciA9PSB0aGlzLm9ic2VydmVyc1tpXSkKICAgICAgICByZXR1cm47CiAgICB9CgogICAgdGhpcy5vYnNlcnZlcnMucHVzaChvYnNlcnZlcik7CiAgfSwKCiAgcmVtb3ZlX29ic2VydmVyOiBmdW5jdGlvbiAobykKICB7CiAgICBmb3IgKHZhciBpID0gMDsgaSA8IHRoaXMub2JzZXJ2ZXJzLmxlbmd0aDsgKytpKQogICAgewogICAgICBpZiAob2JzZXJ2ZXIgPT0gdGhpcy5vYnNlcnZlcnNbaV0pCiAgICAgIHsKICAgICAgICB0aGlzLm9ic2VydmVycy5zcGxpY2UoaSwxKTsKICAgICAgICBicmVhazsKICAgICAgfQogICAgfQogIH0sCgogIHBhZ2VfYWRkcmVzczogZnVuY3Rpb24gKHVyaSkgewogICAgdmFyIGkgPSB1cmkuaW5kZXhPZigiIyIpOwoKICAgIGlmIChpIDwgMCkKICAgICAgaSA9IHVyaS5pbmRleE9mKCIlMjMiKTsKCiAgICAvLyBjaGVjayBpZiBhbmNob3IgaXMgZW50aXJlIHBhZ2UKCiAgICBpZiAoaSA8IDApCiAgICAgIHJldHVybiB1cmk7ICAvLyB5ZXMKCiAgICByZXR1cm4gdXJpLnN1YnN0cigwLCBpKTsKICB9LAoKICAvLyBvbmx5IHVzZWQgZm9yIElFNiBhbmQgSUU3CiAgb25fZnJhbWVfbG9hZGVkOiBmdW5jdGlvbiAoaGFzaCkgewogICAgbG9jYXRpb24uaGFzaCA9IGhhc2g7CiAgICB2YXIgdXJpID0gdzNjX3NsaWR5LnBhZ2VfYWRkcmVzcyhsb2NhdGlvbi5ocmVmKTsKICAgIGxvY2F0aW9uLmhyZWYgPSB1cmkgKyBoYXNoOwogIH0sCgogIC8vIGhpc3RvcnkgaGFjayB3aXRoIHRoYW5rcyB0byBCZXJ0cmFuZCBMZSBSb3kKICBwdXNoX2hhc2g6IGZ1bmN0aW9uIChoYXNoKSB7CiAgICBpZiAoaGFzaCA9PSAiIikgaGFzaCA9ICIjKDEpIjsKICAgICAgd2luZG93LmxvY2F0aW9uLmhhc2ggPSBoYXNoOwoKICAgIHZhciBkb2MgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgiaGlzdG9yeUZyYW1lIikuY29udGVudFdpbmRvdy5kb2N1bWVudDsKICAgIGRvYy5vcGVuKCJqYXZhc2NyaXB0Oic8aHRtbD48L2h0bWw+JyIpOwogICAgZG9jLndyaXRlKCI8aHRtbD48aGVhZD48c2NyaXB0IHR5cGU9XCJ0ZXh0L2phdmFzY3JpcHRcIj53aW5kb3cucGFyZW50LnczY19zbGlkeS5vbl9mcmFtZV9sb2FkZWQoJyIrCiAgICAgIChoYXNoKSArICInKTs8L3NjcmlwdD48L2hlYWQ+PGJvZHk+aGVsbG8gbXVtPC9ib2R5PjwvaHRtbD4iKTsKICAgICAgZG9jLmNsb3NlKCk7CiAgfSwKCiAgLy8gZmluZCBjdXJyZW50IHNsaWRlIGJhc2VkIHVwb24gbG9jYXRpb24KICAvLyBmaXJzdCBmaW5kIHRhcmdldCBhbmNob3IgYW5kIHRoZW4gbG9vawogIC8vIGZvciBhc3NvY2lhdGVkIGRpdiBlbGVtZW50IGVuY2xvc2luZyBpdAogIC8vIGZpbmFsbHkgbWFwIHRoYXQgdG8gc2xpZGUgbnVtYmVyCiAgZmluZF9zbGlkZV9udW1iZXI6IGZ1bmN0aW9uICh1cmkpIHsKICAgIC8vIGZpcnN0IGdldCBhbmNob3IgZnJvbSBwYWdlIGxvY2F0aW9uCgogICAgdmFyIGkgPSB1cmkuaW5kZXhPZigiIyIpOwoKICAgIC8vIGNoZWNrIGlmIGFuY2hvciBpcyBlbnRpcmUgcGFnZQogICAgaWYgKGkgPCAwKQogICAgICByZXR1cm4gMDsgIC8vIHllcwoKICAgIHZhciBhbmNob3IgPSB1bmVzY2FwZSh1cmkuc3Vic3RyKGkrMSkpOwoKICAgIC8vIG5vdyB1c2UgYW5jaG9yIGFzIFhNTCBJRCB0byBmaW5kIHRhcmdldAogICAgdmFyIHRhcmdldCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKGFuY2hvcik7CgogICAgaWYgKCF0YXJnZXQpCiAgICB7CiAgICAgIC8vIGRvZXMgYW5jaG9yIGxvb2sgbGlrZSAiKDIpIiBmb3Igc2xpZGUgMiA/PwogICAgICAvLyB3aGVyZSBmaXJzdCBzbGlkZSBpcyAoMSkKICAgICAgdmFyIHJlID0gL1woKFxkKStcKS87CgogICAgICBpZiAoYW5jaG9yLm1hdGNoKHJlKSkKICAgICAgewogICAgICAgIHZhciBudW0gPSBwYXJzZUludChhbmNob3Iuc3Vic3RyaW5nKDEsIGFuY2hvci5sZW5ndGgtMSkpOwoKICAgICAgICBpZiAobnVtID4gdGhpcy5zbGlkZXMubGVuZ3RoKQogICAgICAgICAgbnVtID0gMTsKCiAgICAgICAgaWYgKC0tbnVtIDwgMCkKICAgICAgICAgIG51bSA9IDA7CgogICAgICAgIHJldHVybiBudW07CiAgICAgIH0KCiAgICAgIC8vIGFjY2VwdCBbMl0gZm9yIGJhY2t3YXJkcyBjb21wYXRpYmlsaXR5CiAgICAgIHJlID0gL1xbKFxkKStcXS87CgogICAgICBpZiAoYW5jaG9yLm1hdGNoKHJlKSkKICAgICAgewogICAgICAgICB2YXIgbnVtID0gcGFyc2VJbnQoYW5jaG9yLnN1YnN0cmluZygxLCBhbmNob3IubGVuZ3RoLTEpKTsKCiAgICAgICAgIGlmIChudW0gPiB0aGlzLnNsaWRlcy5sZW5ndGgpCiAgICAgICAgICAgIG51bSA9IDE7CgogICAgICAgICBpZiAoLS1udW0gPCAwKQogICAgICAgICAgICBudW0gPSAwOwoKICAgICAgICAgcmV0dXJuIG51bTsKICAgICAgfQoKICAgICAgLy8gb2ggZGVhciB1bmtub3duIGFuY2hvcgogICAgICByZXR1cm4gMDsKICAgIH0KCiAgICAvLyBzZWFyY2ggZm9yIGVuY2xvc2luZyBzbGlkZQoKICAgIHdoaWxlICh0cnVlKQogICAgewogICAgICAvLyBicm93c2VyIGNvZXJjZXMgaHRtbCBlbGVtZW50cyB0byB1cHBlcmNhc2UhCiAgICAgIGlmICh0YXJnZXQubm9kZU5hbWUudG9Mb3dlckNhc2UoKSA9PSAiZGl2IiAmJgogICAgICAgICAgICB0aGlzLmhhc19jbGFzcyh0YXJnZXQsICJzbGlkZSIpKQogICAgICB7CiAgICAgICAgLy8gZm91bmQgdGhlIHNsaWRlIGVsZW1lbnQKICAgICAgICBicmVhazsKICAgICAgfQoKICAgICAgLy8gb3RoZXJ3aXNlIHRyeSBwYXJlbnQgZWxlbWVudCBpZiBhbnkKCiAgICAgIHRhcmdldCA9IHRhcmdldC5wYXJlbnROb2RlOwoKICAgICAgaWYgKCF0YXJnZXQpCiAgICAgIHsKICAgICAgICByZXR1cm4gMDsgICAvLyBubyBsdWNrIQogICAgICB9CiAgICB9OwoKICAgIGZvciAoaSA9IDA7IGkgPCBzbGlkZXMubGVuZ3RoOyArK2kpCiAgICB7CiAgICAgIGlmIChzbGlkZXNbaV0gPT0gdGFyZ2V0KQogICAgICAgIHJldHVybiBpOyAgLy8gc3VjY2VzcwogICAgfQoKICAgIC8vIG9oIGRlYXIgc3RpbGwgbm8gbHVjawogICAgcmV0dXJuIDA7CiAgfSwKCiAgcHJldmlvdXNfc2xpZGU6IGZ1bmN0aW9uIChpbmNyZW1lbnRhbCkgewogICAgaWYgKCF3M2Nfc2xpZHkudmlld19hbGwpCiAgICB7CiAgICAgIHZhciBzbGlkZTsKCiAgICAgIGlmICgoaW5jcmVtZW50YWwgfHwgdzNjX3NsaWR5LnNsaWRlX251bWJlciA9PSAwKSAmJiB3M2Nfc2xpZHkubGFzdF9zaG93biAhPSBudWxsKQogICAgICB7CiAgICAgICAgdzNjX3NsaWR5Lmxhc3Rfc2hvd24gPSB3M2Nfc2xpZHkuaGlkZV9wcmV2aW91c19pdGVtKHczY19zbGlkeS5sYXN0X3Nob3duKTsKICAgICAgICB3M2Nfc2xpZHkuc2V0X2Vvc19zdGF0dXMoZmFsc2UpOwogICAgICB9CiAgICAgIGVsc2UgaWYgKHczY19zbGlkeS5zbGlkZV9udW1iZXIgPiAwKQogICAgICB7CiAgICAgICAgc2xpZGUgPSB3M2Nfc2xpZHkuc2xpZGVzW3czY19zbGlkeS5zbGlkZV9udW1iZXJdOwogICAgICAgIHczY19zbGlkeS5oaWRlX3NsaWRlKHNsaWRlKTsKCiAgICAgICAgdzNjX3NsaWR5LnNsaWRlX251bWJlciA9IHczY19zbGlkeS5zbGlkZV9udW1iZXIgLSAxOwogICAgICAgIHNsaWRlID0gdzNjX3NsaWR5LnNsaWRlc1t3M2Nfc2xpZHkuc2xpZGVfbnVtYmVyXTsKICAgICAgICB3M2Nfc2xpZHkuc2V0X3Zpc2liaWxpdHlfYWxsX2luY3JlbWVudGFsKCJ2aXNpYmxlIik7CiAgICAgICAgdzNjX3NsaWR5Lmxhc3Rfc2hvd24gPSB3M2Nfc2xpZHkucHJldmlvdXNfaW5jcmVtZW50YWxfaXRlbShudWxsKTsKICAgICAgICB3M2Nfc2xpZHkuc2V0X2Vvc19zdGF0dXModHJ1ZSk7CiAgICAgICAgdzNjX3NsaWR5LnNob3dfc2xpZGUoc2xpZGUpOwogICAgICB9CgogICAgICB3M2Nfc2xpZHkuc2V0X2xvY2F0aW9uKCk7CgogICAgICBpZiAoIXczY19zbGlkeS5uc19wb3MpCiAgICAgICAgdzNjX3NsaWR5LnJlZnJlc2hfdG9vbGJhcigyMDApOwogICAgfQogIH0sCgogIG5leHRfc2xpZGU6IGZ1bmN0aW9uIChpbmNyZW1lbnRhbCkgewogICAgaWYgKCF3M2Nfc2xpZHkudmlld19hbGwpCiAgICB7CiAgICAgIHZhciBzbGlkZSwgbGFzdCA9IHczY19zbGlkeS5sYXN0X3Nob3duOwoKICAgICAgaWYgKGluY3JlbWVudGFsIHx8IHczY19zbGlkeS5zbGlkZV9udW1iZXIgPT0gdzNjX3NsaWR5LnNsaWRlcy5sZW5ndGggLSAxKQogICAgICAgICB3M2Nfc2xpZHkubGFzdF9zaG93biA9IHczY19zbGlkeS5yZXZlYWxfbmV4dF9pdGVtKHczY19zbGlkeS5sYXN0X3Nob3duKTsKCiAgICAgIGlmICgoIWluY3JlbWVudGFsIHx8IHczY19zbGlkeS5sYXN0X3Nob3duID09IG51bGwpICYmCiAgICAgICAgICAgICB3M2Nfc2xpZHkuc2xpZGVfbnVtYmVyIDwgdzNjX3NsaWR5LnNsaWRlcy5sZW5ndGggLSAxKQogICAgICB7CiAgICAgICAgIHNsaWRlID0gdzNjX3NsaWR5LnNsaWRlc1t3M2Nfc2xpZHkuc2xpZGVfbnVtYmVyXTsKICAgICAgICAgdzNjX3NsaWR5LmhpZGVfc2xpZGUoc2xpZGUpOwoKICAgICAgICAgdzNjX3NsaWR5LnNsaWRlX251bWJlciA9IHczY19zbGlkeS5zbGlkZV9udW1iZXIgKyAxOwogICAgICAgICBzbGlkZSA9IHczY19zbGlkeS5zbGlkZXNbdzNjX3NsaWR5LnNsaWRlX251bWJlcl07CiAgICAgICAgIHczY19zbGlkeS5sYXN0X3Nob3duID0gbnVsbDsKICAgICAgICAgdzNjX3NsaWR5LnNldF92aXNpYmlsaXR5X2FsbF9pbmNyZW1lbnRhbCgiaGlkZGVuIik7CiAgICAgICAgIHczY19zbGlkeS5zaG93X3NsaWRlKHNsaWRlKTsKICAgICAgfQogICAgICBlbHNlIGlmICghdzNjX3NsaWR5Lmxhc3Rfc2hvd24pCiAgICAgIHsKICAgICAgICAgaWYgKGxhc3QgJiYgaW5jcmVtZW50YWwpCiAgICAgICAgICAgdzNjX3NsaWR5Lmxhc3Rfc2hvd24gPSBsYXN0OwogICAgICB9CgogICAgICB3M2Nfc2xpZHkuc2V0X2xvY2F0aW9uKCk7CgogICAgICB3M2Nfc2xpZHkuc2V0X2Vvc19zdGF0dXMoIXczY19zbGlkeS5uZXh0X2luY3JlbWVudGFsX2l0ZW0odzNjX3NsaWR5Lmxhc3Rfc2hvd24pKTsKCiAgICAgIGlmICghdzNjX3NsaWR5Lm5zX3BvcykKICAgICAgICAgdzNjX3NsaWR5LnJlZnJlc2hfdG9vbGJhcigyMDApOwogICAgIH0KICB9LAoKICAvLyB0byBmaXJzdCBzbGlkZSB3aXRoIG5vdGhpbmcgcmV2ZWFsZWQKICAvLyBpLmUuIHN0YXRlIGF0IHN0YXJ0IG9mIHByZXNlbnRhdGlvbgogIGZpcnN0X3NsaWRlOiBmdW5jdGlvbiAoKSB7CiAgICAgaWYgKCF3M2Nfc2xpZHkudmlld19hbGwpCiAgICAgewogICAgICAgdmFyIHNsaWRlOwoKICAgICAgIGlmICh3M2Nfc2xpZHkuc2xpZGVfbnVtYmVyICE9IDApCiAgICAgICB7CiAgICAgICAgIHNsaWRlID0gdzNjX3NsaWR5LnNsaWRlc1t3M2Nfc2xpZHkuc2xpZGVfbnVtYmVyXTsKICAgICAgICAgdzNjX3NsaWR5LmhpZGVfc2xpZGUoc2xpZGUpOwoKICAgICAgICAgdzNjX3NsaWR5LnNsaWRlX251bWJlciA9IDA7CiAgICAgICAgIHNsaWRlID0gdzNjX3NsaWR5LnNsaWRlc1t3M2Nfc2xpZHkuc2xpZGVfbnVtYmVyXTsKICAgICAgICAgdzNjX3NsaWR5Lmxhc3Rfc2hvd24gPSBudWxsOwogICAgICAgICB3M2Nfc2xpZHkuc2V0X3Zpc2liaWxpdHlfYWxsX2luY3JlbWVudGFsKCJoaWRkZW4iKTsKICAgICAgICAgdzNjX3NsaWR5LnNob3dfc2xpZGUoc2xpZGUpOwogICAgICAgfQoKICAgICAgIHczY19zbGlkeS5zZXRfZW9zX3N0YXR1cygKICAgICAgICAgIXczY19zbGlkeS5uZXh0X2luY3JlbWVudGFsX2l0ZW0odzNjX3NsaWR5Lmxhc3Rfc2hvd24pKTsKICAgICAgIHczY19zbGlkeS5zZXRfbG9jYXRpb24oKTsKICAgICB9CiAgfSwKCiAgLy8gZ290byBsYXN0IHNsaWRlIHdpdGggZXZlcnl0aGluZyByZXZlYWxlZAogIC8vIGkuZS4gc3RhdGUgYXQgZW5kIG9mIHByZXNlbnRhdGlvbgogIGxhc3Rfc2xpZGU6IGZ1bmN0aW9uICgpIHsKICAgIGlmICghdzNjX3NsaWR5LnZpZXdfYWxsKQogICAgewogICAgICB2YXIgc2xpZGU7CgogICAgICB3M2Nfc2xpZHkubGFzdF9zaG93biA9IG51bGw7IC8vcmV2ZWFsTmV4dEl0ZW0obGFzdFNob3duKTsKCiAgICAgIGlmICh3M2Nfc2xpZHkubGFzdF9zaG93biA9PSBudWxsICYmCiAgICAgICAgICB3M2Nfc2xpZHkuc2xpZGVfbnVtYmVyIDwgdzNjX3NsaWR5LnNsaWRlcy5sZW5ndGggLSAxKQogICAgICB7CiAgICAgICAgIHNsaWRlID0gdzNjX3NsaWR5LnNsaWRlc1t3M2Nfc2xpZHkuc2xpZGVfbnVtYmVyXTsKICAgICAgICAgdzNjX3NsaWR5LmhpZGVfc2xpZGUoc2xpZGUpOwogICAgICAgICB3M2Nfc2xpZHkuc2xpZGVfbnVtYmVyID0gdzNjX3NsaWR5LnNsaWRlcy5sZW5ndGggLSAxOwogICAgICAgICBzbGlkZSA9IHczY19zbGlkeS5zbGlkZXNbdzNjX3NsaWR5LnNsaWRlX251bWJlcl07CiAgICAgICAgIHczY19zbGlkeS5zZXRfdmlzaWJpbGl0eV9hbGxfaW5jcmVtZW50YWwoInZpc2libGUiKTsKICAgICAgICAgdzNjX3NsaWR5Lmxhc3Rfc2hvd24gPSB3M2Nfc2xpZHkucHJldmlvdXNfaW5jcmVtZW50YWxfaXRlbShudWxsKTsKCiAgICAgICAgIHczY19zbGlkeS5zaG93X3NsaWRlKHNsaWRlKTsKICAgICAgfQogICAgICBlbHNlCiAgICAgIHsKICAgICAgICAgdzNjX3NsaWR5LnNldF92aXNpYmlsaXR5X2FsbF9pbmNyZW1lbnRhbCgidmlzaWJsZSIpOwogICAgICAgICB3M2Nfc2xpZHkubGFzdF9zaG93biA9IHczY19zbGlkeS5wcmV2aW91c19pbmNyZW1lbnRhbF9pdGVtKG51bGwpOwogICAgICB9CgogICAgICB3M2Nfc2xpZHkuc2V0X2Vvc19zdGF0dXModHJ1ZSk7CiAgICAgIHczY19zbGlkeS5zZXRfbG9jYXRpb24oKTsKICAgIH0KICB9LAoKCiAgLy8gIyMjIGNoZWNrIHRoaXMgYW5kIGNvbnNpZGVyIGFkZC9yZW1vdmUgY2xhc3MKICBzZXRfZW9zX3N0YXR1czogZnVuY3Rpb24gKHN0YXRlKSB7CiAgICBpZiAodGhpcy5lb3MpCiAgICAgIHRoaXMuZW9zLnN0eWxlLmNvbG9yID0gKHN0YXRlID8gInJnYigyNDAsMjQwLDI0MCkiIDogInJlZCIpOwogIH0sCgogIC8vIGZpcnN0IHNsaWRlIGlzIDAKICBnb3RvX3NsaWRlOiBmdW5jdGlvbiAobnVtKSB7CiAgICAvL2FsZXJ0KCJnb2luZyB0byBzbGlkZSAiICsgKG51bSsxKSk7CiAgICB2YXIgc2xpZGUgPSB3M2Nfc2xpZHkuc2xpZGVzW3czY19zbGlkeS5zbGlkZV9udW1iZXJdOwogICAgdzNjX3NsaWR5LmhpZGVfc2xpZGUoc2xpZGUpOwogICAgdzNjX3NsaWR5LnNsaWRlX251bWJlciA9IG51bTsKICAgIHNsaWRlID0gdzNjX3NsaWR5LnNsaWRlc1t3M2Nfc2xpZHkuc2xpZGVfbnVtYmVyXTsKICAgIHczY19zbGlkeS5sYXN0X3Nob3duID0gbnVsbDsKICAgIHczY19zbGlkeS5zZXRfdmlzaWJpbGl0eV9hbGxfaW5jcmVtZW50YWwoImhpZGRlbiIpOwogICAgdzNjX3NsaWR5LnNldF9lb3Nfc3RhdHVzKCF3M2Nfc2xpZHkubmV4dF9pbmNyZW1lbnRhbF9pdGVtKHczY19zbGlkeS5sYXN0X3Nob3duKSk7CiAgICBkb2N1bWVudC50aXRsZSA9IHczY19zbGlkeS50aXRsZSArICIgKCIgKyAodzNjX3NsaWR5LnNsaWRlX251bWJlcisxKSArICIpIjsKICAgIHczY19zbGlkeS5zaG93X3NsaWRlKHNsaWRlKTsKICAgIHczY19zbGlkeS5zaG93X3NsaWRlX251bWJlcigpOwogIH0sCgoKICBzaG93X3NsaWRlOiBmdW5jdGlvbiAoc2xpZGUpIHsKICAgIHRoaXMuc3luY19iYWNrZ3JvdW5kKHNsaWRlKTsKICAgIHRoaXMucmVtb3ZlX2NsYXNzKHNsaWRlLCAiaGlkZGVuIik7CgogICAgLy8gd29yayBhcm91bmQgSUU5IG9iamVjdCByZW5kZXJpbmcgYnVnCiAgICBzZXRUaW1lb3V0KCJ3aW5kb3cuc2Nyb2xsVG8oMCwwKTsiLCAxKTsKICB9LAoKICBoaWRlX3NsaWRlOiBmdW5jdGlvbiAoc2xpZGUpIHsKICAgIHRoaXMuYWRkX2NsYXNzKHNsaWRlLCAiaGlkZGVuIik7CiAgfSwKCiAgc2V0X2ZvY3VzOiBmdW5jdGlvbiAoZWxlbWVudCkKICB7CiAgICBpZiAoZWxlbWVudCkKICAgICAgZWxlbWVudC5mb2N1cygpOwogICAgZWxzZQogICAgewogICAgICB3M2Nfc2xpZHkuaGVscF9hbmNob3IuZm9jdXMoKTsKCiAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24oKSB7CiAgICAgICAgdzNjX3NsaWR5LmhlbHBfYW5jaG9yLmJsdXIoKTsKICAgICAgfSwgMSk7CiAgICB9CiAgfSwKCiAgLy8gc2hvdyBqdXN0IHRoZSBiYWNrZ3JvdW5kcyBwZXJ0aW5lbnQgdG8gdGhpcyBzbGlkZQogIC8vIHdoZW4gc2xpZGUgYmFja2dyb3VuZC1jb2xvciBpcyB0cmFuc3BhcmVudAogIC8vIHRoaXMgc2hvdWxkIG5vdyB3b3JrIHdpdGggcmdiYSBjb2xvciB2YWx1ZXMKICBzeW5jX2JhY2tncm91bmQ6IGZ1bmN0aW9uIChzbGlkZSkgewogICAgdmFyIGJhY2tncm91bmQ7CiAgICB2YXIgYmdDb2xvcjsKCiAgICBpZiAoc2xpZGUuY3VycmVudFN0eWxlKQogICAgICBiZ0NvbG9yID0gc2xpZGUuY3VycmVudFN0eWxlWyJiYWNrZ3JvdW5kQ29sb3IiXTsKICAgIGVsc2UgaWYgKGRvY3VtZW50LmRlZmF1bHRWaWV3KQogICAgewogICAgICB2YXIgc3R5bGVzID0gZG9jdW1lbnQuZGVmYXVsdFZpZXcuZ2V0Q29tcHV0ZWRTdHlsZShzbGlkZSxudWxsKTsKCiAgICAgIGlmIChzdHlsZXMpCiAgICAgICAgYmdDb2xvciA9IHN0eWxlcy5nZXRQcm9wZXJ0eVZhbHVlKCJiYWNrZ3JvdW5kLWNvbG9yIik7CiAgICAgIGVsc2UgLy8gYnJva2VuIGltcGxlbWVudGF0aW9uIHByb2JhYmx5IGR1ZSBTYWZhcmkgb3IgS29ucXVlcm9yCiAgICAgIHsKICAgICAgICAvL2FsZXJ0KCJkZWZlY3RpdmUgaW1wbGVtZW50YXRpb24gb2YgZ2V0Q29tcHV0ZWRTdHlsZSgpIik7CiAgICAgICAgYmdDb2xvciA9ICJ0cmFuc3BhcmVudCI7CiAgICAgIH0KICAgIH0KICAgIGVsc2UKICAgICAgYmdDb2xvciA9PSAidHJhbnNwYXJlbnQiOwoKICAgIGlmIChiZ0NvbG9yID09ICJ0cmFuc3BhcmVudCIgfHwKICAgICAgICBiZ0NvbG9yLmluZGV4T2YoInJnYmEiKSA+PSAwIHx8CiAgICAgICAgYmdDb2xvci5pbmRleE9mKCJvcGFjaXR5IikgPj0gMCkKICAgIHsKICAgICAgdmFyIHNsaWRlQ2xhc3MgPSB0aGlzLmdldF9jbGFzc19saXN0KHNsaWRlKTsKCiAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgdGhpcy5iYWNrZ3JvdW5kcy5sZW5ndGg7IGkrKykKICAgICAgewogICAgICAgIGJhY2tncm91bmQgPSB0aGlzLmJhY2tncm91bmRzW2ldOwoKICAgICAgICB2YXIgYmdDbGFzcyA9IHRoaXMuZ2V0X2NsYXNzX2xpc3QoYmFja2dyb3VuZCk7CgogICAgICAgIGlmICh0aGlzLm1hdGNoaW5nX2JhY2tncm91bmQoc2xpZGVDbGFzcywgYmdDbGFzcykpCiAgICAgICAgICB0aGlzLnJlbW92ZV9jbGFzcyhiYWNrZ3JvdW5kLCAiaGlkZGVuIik7CiAgICAgICAgZWxzZQogICAgICAgICAgdGhpcy5hZGRfY2xhc3MoYmFja2dyb3VuZCwgImhpZGRlbiIpOwogICAgICB9CiAgICB9CiAgICBlbHNlIC8vIGZvcmNpYmx5IGhpZGUgYWxsIGJhY2tncm91bmRzCiAgICAgIHRoaXMuaGlkZV9iYWNrZ3JvdW5kcygpOwogIH0sCgogIGhpZGVfYmFja2dyb3VuZHM6IGZ1bmN0aW9uICgpIHsKICAgIGZvciAodmFyIGkgPSAwOyBpIDwgdGhpcy5iYWNrZ3JvdW5kcy5sZW5ndGg7IGkrKykKICAgIHsKICAgICAgYmFja2dyb3VuZCA9IHRoaXMuYmFja2dyb3VuZHNbaV07CiAgICAgIHRoaXMuYWRkX2NsYXNzKGJhY2tncm91bmQsICJoaWRkZW4iKTsKICAgIH0KICB9LAoKICAvLyBjb21wYXJlIGNsYXNzZXMgZm9yIHNsaWRlIGFuZCBiYWNrZ3JvdW5kCiAgbWF0Y2hpbmdfYmFja2dyb3VuZDogZnVuY3Rpb24gKHNsaWRlQ2xhc3MsIGJnQ2xhc3MpIHsKICAgIHZhciBpLCBjb3VudCwgcGF0dGVybiwgcmVzdWx0OwoKICAgIC8vIGRlZmluZSBwYXR0ZXJuIGFzIHJlZ3VsYXIgZXhwcmVzc2lvbgogICAgcGF0dGVybiA9IC9cdysvZzsKCiAgICAvLyBjaGVjayBiYWNrZ3JvdW5kIGNsYXNzIG5hbWVzCiAgICByZXN1bHQgPSBiZ0NsYXNzLm1hdGNoKHBhdHRlcm4pOwoKICAgIGZvciAoaSA9IGNvdW50ID0gMDsgaSA8IHJlc3VsdC5sZW5ndGg7IGkrKykKICAgIHsKICAgICAgaWYgKHJlc3VsdFtpXSA9PSAiaGlkZGVuIikKICAgICAgICBjb250aW51ZTsKCiAgICAgIGlmIChyZXN1bHRbaV0gPT0gImJhY2tncm91bmQiKQoJY29udGludWU7CgogICAgICArK2NvdW50OwogICAgfQoKICAgIGlmIChjb3VudCA9PSAwKSAgLy8gZGVmYXVsdCBtYXRjaAogICAgICByZXR1cm4gdHJ1ZTsKCiAgICAvLyBjaGVjayBmb3IgbWF0Y2hlcyBhbmQgcGxhY2UgcmVzdWx0IGluIGFycmF5CiAgICByZXN1bHQgPSBzbGlkZUNsYXNzLm1hdGNoKHBhdHRlcm4pOwoKICAgIC8vIG5vdyBjaGVjayBpZiBkZXNpcmVkIG5hbWUgaXMgcHJlc2VudCBmb3IgYmFja2dyb3VuZAogICAgZm9yIChpID0gY291bnQgPSAwOyBpIDwgcmVzdWx0Lmxlbmd0aDsgaSsrKQogICAgewogICAgICBpZiAocmVzdWx0W2ldID09ICJoaWRkZW4iKQogICAgICAgIGNvbnRpbnVlOwoKICAgICAgaWYgKHRoaXMuaGFzX3Rva2VuKGJnQ2xhc3MsIHJlc3VsdFtpXSkpCiAgICAgICAgcmV0dXJuIHRydWU7CiAgICB9CgogICAgcmV0dXJuIGZhbHNlOwogIH0sCgogIHJlc2l6ZWQ6IGZ1bmN0aW9uICgpIHsKICAgICB2YXIgd2lkdGggPSAwOwoKICAgICBpZiAoIHR5cGVvZiggd2luZG93LmlubmVyV2lkdGggKSA9PSAnbnVtYmVyJyApCiAgICAgICB3aWR0aCA9IHdpbmRvdy5pbm5lcldpZHRoOyAgLy8gTm9uIElFIGJyb3dzZXIKICAgICBlbHNlIGlmIChkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQgJiYgZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LmNsaWVudFdpZHRoKQogICAgICAgd2lkdGggPSBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQuY2xpZW50V2lkdGg7ICAvLyBJRTYKICAgICBlbHNlIGlmIChkb2N1bWVudC5ib2R5ICYmIGRvY3VtZW50LmJvZHkuY2xpZW50V2lkdGgpCiAgICAgICB3aWR0aCA9IGRvY3VtZW50LmJvZHkuY2xpZW50V2lkdGg7IC8vIElFNAoKICAgICB2YXIgaGVpZ2h0ID0gMDsKCiAgICAgaWYgKCB0eXBlb2YoIHdpbmRvdy5pbm5lckhlaWdodCApID09ICdudW1iZXInICkKICAgICAgIGhlaWdodCA9IHdpbmRvdy5pbm5lckhlaWdodDsgIC8vIE5vbiBJRSBicm93c2VyCiAgICAgZWxzZSBpZiAoZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50ICYmIGRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5jbGllbnRIZWlnaHQpCiAgICAgICBoZWlnaHQgPSBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQuY2xpZW50SGVpZ2h0OyAgLy8gSUU2CiAgICAgZWxzZSBpZiAoZG9jdW1lbnQuYm9keSAmJiBkb2N1bWVudC5ib2R5LmNsaWVudEhlaWdodCkKICAgICAgIGhlaWdodCA9IGRvY3VtZW50LmJvZHkuY2xpZW50SGVpZ2h0OyAvLyBJRTQKCiAgICAgaWYgKGhlaWdodCAmJiAod2lkdGgvaGVpZ2h0ID4gMS4wNSoxMDI0Lzc2OCkpCiAgICAgewogICAgICAgd2lkdGggPSBoZWlnaHQgKiAxMDI0LjAvNzY4OwogICAgIH0KCiAgICAgLy8gSUUgZmlyZXMgb25yZXNpemUgZXZlbiB3aGVuIG9ubHkgZm9udCBzaXplIGlzIGNoYW5nZWQhCiAgICAgLy8gc28gd2UgZG8gYSBjaGVjayB0byBhdm9pZCBibG9ja2luZyA8IGFuZCA+IGFjdGlvbnMKICAgICBpZiAod2lkdGggIT0gdzNjX3NsaWR5Lmxhc3Rfd2lkdGggfHwgaGVpZ2h0ICE9IHczY19zbGlkeS5sYXN0X2hlaWdodCkKICAgICB7CiAgICAgICBpZiAod2lkdGggPj0gMTEwMCkKICAgICAgICAgdzNjX3NsaWR5LnNpemVfaW5kZXggPSA1OyAgICAvLyA0CiAgICAgICBlbHNlIGlmICh3aWR0aCA+PSAxMDAwKQogICAgICAgICB3M2Nfc2xpZHkuc2l6ZV9pbmRleCA9IDQ7ICAgIC8vIDMKICAgICAgIGVsc2UgaWYgKHdpZHRoID49IDgwMCkKICAgICAgICAgdzNjX3NsaWR5LnNpemVfaW5kZXggPSAzOyAgICAvLyAyCiAgICAgICBlbHNlIGlmICh3aWR0aCA+PSA2MDApCiAgICAgICAgIHczY19zbGlkeS5zaXplX2luZGV4ID0gMjsgICAgLy8gMQogICAgICAgZWxzZSBpZiAod2lkdGgpCiAgICAgICAgIHczY19zbGlkeS5zaXplX2luZGV4ID0gMDsKCiAgICAgICAvLyBhZGQgaW4gZm9udCBzaXplIGFkanVzdG1lbnQgZnJvbSBtZXRhIGVsZW1lbnQgZS5nLgogICAgICAgLy8gPG1ldGEgbmFtZT0iZm9udC1zaXplLWFkanVzdG1lbnQiIGNvbnRlbnQ9Ii0yIiAvPgogICAgICAgLy8gdXNlZnVsIHdoZW4gc2xpZGVzIGhhdmUgdG9vIG11Y2ggY29udGVudCA7LSkKCiAgICAgICBpZiAoMCA8PSB3M2Nfc2xpZHkuc2l6ZV9pbmRleCArIHczY19zbGlkeS5zaXplX2FkanVzdG1lbnQgJiYKICAgICAgICAgICAgIHczY19zbGlkeS5zaXplX2luZGV4ICsgdzNjX3NsaWR5LnNpemVfYWRqdXN0bWVudCA8IHczY19zbGlkeS5zaXplcy5sZW5ndGgpCiAgICAgICAgIHczY19zbGlkeS5zaXplX2luZGV4ID0gdzNjX3NsaWR5LnNpemVfaW5kZXggKyB3M2Nfc2xpZHkuc2l6ZV9hZGp1c3RtZW50OwoKICAgICAgIC8vIGVuYWJsZXMgY3Jvc3MgYnJvd3NlciB1c2Ugb2YgcmVsYXRpdmUgd2lkdGgvaGVpZ2h0CiAgICAgICAvLyBvbiBvYmplY3QgZWxlbWVudHMgZm9yIHVzZSB3aXRoIFNWRyBhbmQgRmxhc2ggbWVkaWEKICAgICAgIHczY19zbGlkeS5hZGp1c3Rfb2JqZWN0X2RpbWVuc2lvbnMod2lkdGgsIGhlaWdodCk7CgogICAgICAgaWYgKGRvY3VtZW50LmJvZHkuc3R5bGUuZm9udFNpemUgIT0gdzNjX3NsaWR5LnNpemVzW3czY19zbGlkeS5zaXplX2luZGV4XSkKICAgICAgIHsKICAgICAgICAgZG9jdW1lbnQuYm9keS5zdHlsZS5mb250U2l6ZSA9IHczY19zbGlkeS5zaXplc1t3M2Nfc2xpZHkuc2l6ZV9pbmRleF07CiAgICAgICB9CgogICAgICAgdzNjX3NsaWR5Lmxhc3Rfd2lkdGggPSB3aWR0aDsKICAgICAgIHczY19zbGlkeS5sYXN0X2hlaWdodCA9IGhlaWdodDsKCiAgICAgICAvLyBmb3JjZSByZWZsb3cgdG8gd29yayBhcm91bmQgTW96aWxsYSBidWcKICAgICAgIGlmICh3M2Nfc2xpZHkubnNfcG9zKQogICAgICAgewogICAgICAgICB2YXIgc2xpZGUgPSB3M2Nfc2xpZHkuc2xpZGVzW3czY19zbGlkeS5zbGlkZV9udW1iZXJdOwogICAgICAgICB3M2Nfc2xpZHkuaGlkZV9zbGlkZShzbGlkZSk7CiAgICAgICAgIHczY19zbGlkeS5zaG93X3NsaWRlKHNsaWRlKTsKICAgICAgIH0KCiAgICAgICAvLyBmb3JjZSBjb3JyZWN0IHBvc2l0aW9uaW5nIG9mIHRvb2xiYXIKICAgICAgIHczY19zbGlkeS5yZWZyZXNoX3Rvb2xiYXIoMjAwKTsKICAgICB9CiAgfSwKCiAgc2Nyb2xsZWQ6IGZ1bmN0aW9uICgpIHsKICAgIGlmICh3M2Nfc2xpZHkudG9vbGJhciAmJiAhdzNjX3NsaWR5Lm5zX3BvcyAmJiAhdzNjX3NsaWR5LmllNykKICAgIHsKICAgICAgdzNjX3NsaWR5LmhhY2tfb2Zmc2V0ID0gdzNjX3NsaWR5LnNjcm9sbF94X29mZnNldCgpOwogICAgICAvLyBoaWRlIHRvb2xiYXIKICAgICAgdzNjX3NsaWR5LnRvb2xiYXIuc3R5bGUuZGlzcGxheSA9ICJub25lIjsKCiAgICAgIC8vIG1ha2UgaXQgcmVhcHBlYXIgbGF0ZXIKICAgICAgaWYgKHczY19zbGlkeS5zY3JvbGxoYWNrID09IDAgJiYgIXczY19zbGlkeS52aWV3X2FsbCkKICAgICAgewogICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24gKCkge3czY19zbGlkeS5zaG93X3Rvb2xiYXIoKTsgfSwgMTAwMCk7CiAgICAgICAgdzNjX3NsaWR5LnNjcm9sbGhhY2sgPSAxOwogICAgICB9CiAgICB9CiAgfSwKCiAgaGlkZV90b29sYmFyOiBmdW5jdGlvbiAoKSB7CiAgICB3M2Nfc2xpZHkuYWRkX2NsYXNzKHczY19zbGlkeS50b29sYmFyLCAiaGlkZGVuIik7CiAgICB3aW5kb3cuZm9jdXMoKTsKICB9LAoKICAvLyB1c2VkIHRvIGVuc3VyZSBJRSByZWZyZXNoZXMgdG9vbGJhciBpbiBjb3JyZWN0IHBvc2l0aW9uCiAgcmVmcmVzaF90b29sYmFyOiBmdW5jdGlvbiAoaW50ZXJ2YWwpIHsKICAgIGlmICghdzNjX3NsaWR5Lm5zX3BvcyAmJiAhdzNjX3NsaWR5LmllNykKICAgIHsKICAgICAgdzNjX3NsaWR5LmhpZGVfdG9vbGJhcigpOwogICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHt3M2Nfc2xpZHkuc2hvd190b29sYmFyKCk7fSwgaW50ZXJ2YWwpOwogICAgfQogIH0sCgogIC8vIHJlc3RvcmVzIHRvb2xiYXIgYWZ0ZXIgc2hvcnQgZGVsYXkKICBzaG93X3Rvb2xiYXI6IGZ1bmN0aW9uICgpIHsKICAgIGlmICh3M2Nfc2xpZHkud2FudF90b29sYmFyKQogICAgewogICAgICB3M2Nfc2xpZHkudG9vbGJhci5zdHlsZS5kaXNwbGF5ID0gImJsb2NrIjsKCiAgICAgIGlmICghdzNjX3NsaWR5Lm5zX3BvcykKICAgICAgewogICAgICAgIC8vIGFkanVzdCBwb3NpdGlvbiB0byBhbGxvdyBmb3Igc2Nyb2xsaW5nCiAgICAgICAgdmFyIHhvZmZzZXQgPSB3M2Nfc2xpZHkuc2Nyb2xsX3hfb2Zmc2V0KCk7CiAgICAgICAgdzNjX3NsaWR5LnRvb2xiYXIuc3R5bGUubGVmdCA9IHhvZmZzZXQ7CiAgICAgICAgdzNjX3NsaWR5LnRvb2xiYXIuc3R5bGUucmlnaHQgPSB4b2Zmc2V0OwoKICAgICAgICAvLyBkZXRlcm1pbmUgdmVydGljYWwgc2Nyb2xsIG9mZnNldAogICAgICAgIC8vdmFyIHlvZmZzZXQgPSBzY3JvbGxZT2Zmc2V0KCk7CgogICAgICAgIC8vIGJvdHRvbSBpcyBkb2MgaGVpZ2h0IC0gd2luZG93IGhlaWdodCAtIHNjcm9sbCBvZmZzZXQKICAgICAgICAvL3ZhciBib3R0b20gPSBkb2N1bWVudEhlaWdodCgpIC0gbGFzdEhlaWdodCAtIHlvZmZzZXQKCiAgICAgICAgLy9pZiAoeW9mZnNldCA+IDAgfHwgZG9jdW1lbnRIZWlnaHQoKSA+IGxhc3RIZWlnaHQpCiAgICAgICAgLy8gICBib3R0b20gKz0gMTY7ICAvLyBhbGxvdyBmb3IgaGVpZ2h0IG9mIHNjcm9sbGJhcgoKICAgICAgICB3M2Nfc2xpZHkudG9vbGJhci5zdHlsZS5ib3R0b20gPSAwOyAvL2JvdHRvbTsKICAgICAgfQoKICAgICAgdzNjX3NsaWR5LnJlbW92ZV9jbGFzcyh3M2Nfc2xpZHkudG9vbGJhciwgImhpZGRlbiIpOwogICAgfQoKICAgIHczY19zbGlkeS5zY3JvbGxoYWNrID0gMDsKCgogICAgLy8gc2V0IHRoZSBrZXlib2FyZCBmb2N1cyB0byB0aGUgaGVscCBsaW5rIG9uIHRoZQogICAgLy8gdG9vbGJhciB0byBlbnN1cmUgdGhhdCBkb2N1bWVudCBoYXMgdGhlIGZvY3VzCiAgICAvLyBJRSBkb2Vzbid0IGFsd2F5cyB3b3JrIHdpdGggd2luZG93LmZvY3VzKCkKICAgIC8vIGFuZCB0aGlzIGhhY2sgaGFzIGJlbmVmaXQgb2YgRW50ZXIgZm9yIGhlbHAKCiAgICB0cnkKICAgIHsKICAgICAgaWYgKCF3M2Nfc2xpZHkub3BlcmEpCiAgICAgICAgdzNjX3NsaWR5LnNldF9mb2N1cygpOwogICAgfQogICAgY2F0Y2ggKGUpCiAgICB7CiAgICB9CiAgfSwKCi8vIGludm9rZWQgdmlhIEYga2V5CiAgdG9nZ2xlX3Rvb2xiYXI6IGZ1bmN0aW9uICgpIHsKICAgIGlmICghdzNjX3NsaWR5LnZpZXdfYWxsKQogICAgewogICAgICBpZiAodzNjX3NsaWR5Lmhhc19jbGFzcyh3M2Nfc2xpZHkudG9vbGJhciwgImhpZGRlbiIpKQogICAgICB7CiAgICAgICAgdzNjX3NsaWR5LnJlbW92ZV9jbGFzcyh3M2Nfc2xpZHkudG9vbGJhciwgImhpZGRlbiIpCiAgICAgICAgdzNjX3NsaWR5LndhbnRfdG9vbGJhciA9IDE7CiAgICAgIH0KICAgICAgZWxzZQogICAgICB7CiAgICAgICAgdzNjX3NsaWR5LmFkZF9jbGFzcyh3M2Nfc2xpZHkudG9vbGJhciwgImhpZGRlbiIpCiAgICAgICAgdzNjX3NsaWR5LndhbnRfdG9vbGJhciA9IDA7CiAgICAgIH0KICAgIH0KICB9LAoKICBzY3JvbGxfeF9vZmZzZXQ6IGZ1bmN0aW9uICgpIHsKICAgIGlmICh3aW5kb3cucGFnZVhPZmZzZXQpCiAgICAgIHJldHVybiBzZWxmLnBhZ2VYT2Zmc2V0OwoKICAgIGlmIChkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQgJiYgCiAgICAgICAgICAgICBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQuc2Nyb2xsTGVmdCkKICAgICAgcmV0dXJuIGRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5zY3JvbGxMZWZ0OwoKICAgIGlmIChkb2N1bWVudC5ib2R5KQogICAgICByZXR1cm4gZG9jdW1lbnQuYm9keS5zY3JvbGxMZWZ0OwoKICAgIHJldHVybiAwOwogIH0sCgogIHNjcm9sbF95X29mZnNldDogZnVuY3Rpb24gKCkgewogICAgaWYgKHdpbmRvdy5wYWdlWU9mZnNldCkKICAgICAgcmV0dXJuIHNlbGYucGFnZVlPZmZzZXQ7CgogICAgaWYgKGRvY3VtZW50LmRvY3VtZW50RWxlbWVudCAmJiAKICAgICAgICAgICAgIGRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5zY3JvbGxUb3ApCiAgICAgIHJldHVybiBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQuc2Nyb2xsVG9wOwoKICAgIGlmIChkb2N1bWVudC5ib2R5KQogICAgICByZXR1cm4gZG9jdW1lbnQuYm9keS5zY3JvbGxUb3A7CgogICAgcmV0dXJuIDA7CiAgfSwKCiAgLy8gbG9va2luZyBmb3IgYSB3YXkgdG8gZGV0ZXJtaW5lIGhlaWdodCBvZiBzbGlkZSBjb250ZW50CiAgLy8gdGhlIHNsaWRlIGl0c2VsZiBpcyBzZXQgdG8gdGhlIGhlaWdodCBvZiB0aGUgd2luZG93CiAgb3B0aW1pemVfZm9udF9zaXplOiBmdW5jdGlvbiAoKSB7CiAgICB2YXIgc2xpZGUgPSB3M2Nfc2xpZHkuc2xpZGVzW3czY19zbGlkeS5zbGlkZV9udW1iZXJdOwoKICAgIC8vdmFyIGRoID0gZG9jdW1lbnRIZWlnaHQoKTsgLy9nZXREb2NIZWlnaHQoZG9jdW1lbnQpOwogICAgdmFyIGRoID0gc2xpZGUuc2Nyb2xsSGVpZ2h0OwogICAgdmFyIHdoID0gZ2V0V2luZG93SGVpZ2h0KCk7CiAgICB2YXIgdSA9IDEwMCAqIGRoIC8gd2g7CgogICAgYWxlcnQoIndpbmRvdyB1dGlsaXphdGlvbiA9ICIgKyB1ICsgIiUgKGRvYyAiCiAgICAgICsgZGggKyAiIHdpbiAiICsgd2ggKyAiKSIpOwogIH0sCgogIC8vIGZyb20gZG9jdW1lbnQgb2JqZWN0CiAgZ2V0X2RvY19oZWlnaHQ6IGZ1bmN0aW9uIChkb2MpIHsKICAgIGlmICghZG9jKQogICAgICBkb2MgPSBkb2N1bWVudDsKCiAgICBpZiAoZG9jICYmIGRvYy5ib2R5ICYmIGRvYy5ib2R5Lm9mZnNldEhlaWdodCkKICAgICAgcmV0dXJuIGRvYy5ib2R5Lm9mZnNldEhlaWdodDsgIC8vIG5zL2dlY2tvIHN5bnRheAoKICAgIGlmIChkb2MgJiYgZG9jLmJvZHkgJiYgZG9jLmJvZHkuc2Nyb2xsSGVpZ2h0KQogICAgICByZXR1cm4gZG9jLmJvZHkuc2Nyb2xsSGVpZ2h0OwoKICAgIGFsZXJ0KCJjb3VsZG4ndCBkZXRlcm1pbmUgZG9jdW1lbnQgaGVpZ2h0Iik7CiAgfSwKCiAgZ2V0X3dpbmRvd19oZWlnaHQ6IGZ1bmN0aW9uICgpIHsKICAgIGlmICggdHlwZW9mKCB3aW5kb3cuaW5uZXJIZWlnaHQgKSA9PSAnbnVtYmVyJyApCiAgICAgIHJldHVybiB3aW5kb3cuaW5uZXJIZWlnaHQ7ICAvLyBOb24gSUUgYnJvd3NlcgoKICAgIGlmIChkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQgJiYgZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LmNsaWVudEhlaWdodCkKICAgICAgcmV0dXJuIGRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5jbGllbnRIZWlnaHQ7ICAvLyBJRTYKCiAgICBpZiAoZG9jdW1lbnQuYm9keSAmJiBkb2N1bWVudC5ib2R5LmNsaWVudEhlaWdodCkKICAgICAgcmV0dXJuIGRvY3VtZW50LmJvZHkuY2xpZW50SGVpZ2h0OyAvLyBJRTQKICB9LAoKICBkb2N1bWVudF9oZWlnaHQ6IGZ1bmN0aW9uICgpIHsKICAgIHZhciBzaCwgb2g7CgogICAgc2ggPSBkb2N1bWVudC5ib2R5LnNjcm9sbEhlaWdodDsKICAgIG9oID0gZG9jdW1lbnQuYm9keS5vZmZzZXRIZWlnaHQ7CgogICAgaWYgKHNoICYmIG9oKQogICAgewogICAgICByZXR1cm4gKHNoID4gb2ggPyBzaCA6IG9oKTsKICAgIH0KCiAgICAvLyBubyBpZGVhIQogICAgcmV0dXJuIDA7CiAgfSwKCiAgc21hbGxlcjogZnVuY3Rpb24gKCkgewogICAgaWYgKHczY19zbGlkeS5zaXplX2luZGV4ID4gMCkKICAgIHsKICAgICAgLS13M2Nfc2xpZHkuc2l6ZV9pbmRleDsKICAgIH0KCiAgICB3M2Nfc2xpZHkudG9vbGJhci5zdHlsZS5kaXNwbGF5ID0gIm5vbmUiOwogICAgZG9jdW1lbnQuYm9keS5zdHlsZS5mb250U2l6ZSA9IHczY19zbGlkeS5zaXplc1t3M2Nfc2xpZHkuc2l6ZV9pbmRleF07CiAgICB2YXIgc2xpZGUgPSB3M2Nfc2xpZHkuc2xpZGVzW3czY19zbGlkeS5zbGlkZV9udW1iZXJdOwogICAgdzNjX3NsaWR5LmhpZGVfc2xpZGUoc2xpZGUpOwogICAgdzNjX3NsaWR5LnNob3dfc2xpZGUoc2xpZGUpOwogICAgc2V0VGltZW91dChmdW5jdGlvbiAoKSB7dzNjX3NsaWR5LnNob3dfdG9vbGJhcigpOyB9LCA1MCk7CiAgfSwKCiAgYmlnZ2VyOiBmdW5jdGlvbiAoKSB7CiAgICBpZiAodzNjX3NsaWR5LnNpemVfaW5kZXggPCB3M2Nfc2xpZHkuc2l6ZXMubGVuZ3RoIC0gMSkKICAgIHsKICAgICAgKyt3M2Nfc2xpZHkuc2l6ZV9pbmRleDsKICAgIH0KCiAgICB3M2Nfc2xpZHkudG9vbGJhci5zdHlsZS5kaXNwbGF5ID0gIm5vbmUiOwogICAgZG9jdW1lbnQuYm9keS5zdHlsZS5mb250U2l6ZSA9IHczY19zbGlkeS5zaXplc1t3M2Nfc2xpZHkuc2l6ZV9pbmRleF07CiAgICB2YXIgc2xpZGUgPSB3M2Nfc2xpZHkuc2xpZGVzW3czY19zbGlkeS5zbGlkZV9udW1iZXJdOwogICAgdzNjX3NsaWR5LmhpZGVfc2xpZGUoc2xpZGUpOwogICAgdzNjX3NsaWR5LnNob3dfc2xpZGUoc2xpZGUpOwogICAgc2V0VGltZW91dChmdW5jdGlvbiAoKSB7dzNjX3NsaWR5LnNob3dfdG9vbGJhcigpOyB9LCA1MCk7CiAgfSwKCiAgLy8gZW5hYmxlcyBjcm9zcyBicm93c2VyIHVzZSBvZiByZWxhdGl2ZSB3aWR0aC9oZWlnaHQKICAvLyBvbiBvYmplY3QgZWxlbWVudHMgZm9yIHVzZSB3aXRoIFNWRyBhbmQgRmxhc2ggbWVkaWEKICAvLyB3aXRoIHRoYW5rcyB0byBJdmFuIEhlcm1hbiBmb3IgdGhlIHN1Z2dlc3Rpb24KICBhZGp1c3Rfb2JqZWN0X2RpbWVuc2lvbnM6IGZ1bmN0aW9uICh3aWR0aCwgaGVpZ2h0KSB7CiAgICBmb3IoIHZhciBpID0gMDsgaSA8IHczY19zbGlkeS5vYmplY3RzLmxlbmd0aDsgaSsrICkKICAgIHsKICAgICAgdmFyIG9iaiA9IHRoaXMub2JqZWN0c1tpXTsKICAgICAgdmFyIG1pbWVUeXBlID0gb2JqLmdldEF0dHJpYnV0ZSgidHlwZSIpOwoKICAgICAgaWYgKG1pbWVUeXBlID09ICJpbWFnZS9zdmcreG1sIiB8fCBtaW1lVHlwZSA9PSAiYXBwbGljYXRpb24veC1zaG9ja3dhdmUtZmxhc2giKQogICAgICB7CiAgICAgICAgaWYgKCAhb2JqLmluaXRpYWxXaWR0aCApIAogICAgICAgICAgb2JqLmluaXRpYWxXaWR0aCA9IG9iai5nZXRBdHRyaWJ1dGUoIndpZHRoIik7CgogICAgICAgIGlmICggIW9iai5pbml0aWFsSGVpZ2h0ICkgCiAgICAgICAgICBvYmouaW5pdGlhbEhlaWdodCA9IG9iai5nZXRBdHRyaWJ1dGUoImhlaWdodCIpOwoKICAgICAgICBpZiAoIG9iai5pbml0aWFsV2lkdGggJiYgb2JqLmluaXRpYWxXaWR0aC5jaGFyQXQob2JqLmluaXRpYWxXaWR0aC5sZW5ndGgtMSkgPT0gIiUiICkKICAgICAgICB7CiAgICAgICAgICB2YXIgdyA9IHBhcnNlSW50KG9iai5pbml0aWFsV2lkdGguc2xpY2UoMCwgb2JqLmluaXRpYWxXaWR0aC5sZW5ndGgtMSkpOwogICAgICAgICAgdmFyIG5ld1cgPSB3aWR0aCAqICh3LzEwMC4wKTsKICAgICAgICAgIG9iai5zZXRBdHRyaWJ1dGUoIndpZHRoIixuZXdXKTsKICAgICAgICB9CgogICAgICAgIGlmICggb2JqLmluaXRpYWxIZWlnaHQgJiYKICAgICAgICAgICAgIG9iai5pbml0aWFsSGVpZ2h0LmNoYXJBdChvYmouaW5pdGlhbEhlaWdodC5sZW5ndGgtMSkgPT0gIiUiICkKICAgICAgICB7CiAgICAgICAgICB2YXIgaCA9IHBhcnNlSW50KG9iai5pbml0aWFsSGVpZ2h0LnNsaWNlKDAsIG9iai5pbml0aWFsSGVpZ2h0Lmxlbmd0aC0xKSk7CiAgICAgICAgICB2YXIgbmV3SCA9IGhlaWdodCAqIChoLzEwMC4wKTsKICAgICAgICAgIG9iai5zZXRBdHRyaWJ1dGUoImhlaWdodCIsIG5ld0gpOwogICAgICAgIH0KICAgICAgfQogICAgfQogIH0sCgogIC8vIG5lZWRlZCBmb3IgT3BlcmEgdG8gaW5oaWJpdCBkZWZhdWx0IGJlaGF2aW9yCiAgLy8gc2luY2UgT3BlcmEgZGVsaXZlcnMga2V5UHJlc3MgZXZlbiBpZiBrZXlEb3duCiAgLy8gd2FzIGNhbmNlbGxlZAogIGtleV9wcmVzczogZnVuY3Rpb24gKGV2ZW50KSB7CiAgICBpZiAoIWV2ZW50KQogICAgICBldmVudCA9IHdpbmRvdy5ldmVudDsKCiAgICBpZiAoIXczY19zbGlkeS5rZXlfd2FudGVkKQogICAgICByZXR1cm4gdzNjX3NsaWR5LmNhbmNlbChldmVudCk7CgogICAgcmV0dXJuIHRydWU7CiAgfSwKCiAgLy8gIFNlZSBlLmcuIGh0dHA6Ly93d3cucXVpcmtzbW9kZS5vcmcvanMvZXZlbnRzL2tleXMuaHRtbCBmb3Iga2V5Y29kZXMKICBrZXlfZG93bjogZnVuY3Rpb24gKGV2ZW50KSB7CiAgICB2YXIga2V5LCB0YXJnZXQsIHRhZzsKCiAgICB3M2Nfc2xpZHkua2V5X3dhbnRlZCA9IHRydWU7CgogICAgaWYgKCFldmVudCkKICAgICAgZXZlbnQgPSB3aW5kb3cuZXZlbnQ7CgogICAgLy8ga2x1ZGdlIGFyb3VuZCBOUy9JRSBkaWZmZXJlbmNlcyAKICAgIGlmICh3aW5kb3cuZXZlbnQpCiAgICB7CiAgICAgIGtleSA9IHdpbmRvdy5ldmVudC5rZXlDb2RlOwogICAgICB0YXJnZXQgPSB3aW5kb3cuZXZlbnQuc3JjRWxlbWVudDsKICAgIH0KICAgIGVsc2UgaWYgKGV2ZW50LndoaWNoKQogICAgewogICAgICBrZXkgPSBldmVudC53aGljaDsKICAgICAgdGFyZ2V0ID0gZXZlbnQudGFyZ2V0OwogICAgfQogICAgZWxzZQogICAgICByZXR1cm4gdHJ1ZTsgLy8gWWlrZXMhIHVua25vd24gYnJvd3NlcgoKICAgIC8vIGlnbm9yZSBldmVudCBpZiBrZXkgdmFsdWUgaXMgemVybwogICAgLy8gYXMgZm9yIGFsdCBvbiBPcGVyYSBhbmQgS29ucXVlcm9yCiAgICBpZiAoIWtleSkKICAgICAgIHJldHVybiB0cnVlOwoKICAgIC8vIGF2b2lkIGludGVyZmVyaW5nIHdpdGgga2V5c3Ryb2tlCiAgICAvLyBiZWhhdmlvciBmb3Igbm9uLXNsaWR5IGNocm9tZSBlbGVtZW50cwogICAgaWYgKCF3M2Nfc2xpZHkuc2xpZHlfY2hyb21lKHRhcmdldCkgJiYKICAgICAgICB3M2Nfc2xpZHkuc3BlY2lhbF9lbGVtZW50KHRhcmdldCkpCiAgICAgIHJldHVybiB0cnVlOwoKICAgIC8vIGNoZWNrIGZvciBjb25jdXJyZW50IGNvbnRyb2wvY29tbWFuZC9hbHQga2V5CiAgICAvLyBidXQgYXJlIHRoZXNlIG9ubHkgcHJlc2VudCBvbiBtb3VzZSBldmVudHM/CgogICAgaWYgKGV2ZW50LmN0cmxLZXkgfHwgZXZlbnQuYWx0S2V5IHx8IGV2ZW50Lm1ldGFLZXkpCiAgICAgICByZXR1cm4gdHJ1ZTsKCiAgICAvLyBkaXNtaXNzIHRhYmxlIG9mIGNvbnRlbnRzIGlmIHZpc2libGUKICAgIGlmICh3M2Nfc2xpZHkuaXNfc2hvd25fdG9jKCkgJiYga2V5ICE9IDkgJiYga2V5ICE9IDE2ICYmIGtleSAhPSAzOCAmJiBrZXkgIT0gNDApCiAgICB7CiAgICAgIHczY19zbGlkeS5oaWRlX3RhYmxlX29mX2NvbnRlbnRzKHRydWUpOwoKICAgICAgaWYgKGtleSA9PSAyNyB8fCBrZXkgPT0gODQgfHwga2V5ID09IDY3KQogICAgICAgIHJldHVybiB3M2Nfc2xpZHkuY2FuY2VsKGV2ZW50KTsKICAgIH0KCiAgICBpZiAoa2V5ID09IDM0KSAvLyBQYWdlIERvd24KICAgIHsKICAgICAgaWYgKHczY19zbGlkeS52aWV3X2FsbCkKICAgICAgICByZXR1cm4gdHJ1ZTsKCiAgICAgIHczY19zbGlkeS5uZXh0X3NsaWRlKGZhbHNlKTsKICAgICAgcmV0dXJuIHczY19zbGlkeS5jYW5jZWwoZXZlbnQpOwogICAgfQogICAgZWxzZSBpZiAoa2V5ID09IDMzKSAvLyBQYWdlIFVwCiAgICB7CiAgICAgIGlmICh3M2Nfc2xpZHkudmlld19hbGwpCiAgICAgICAgcmV0dXJuIHRydWU7CgogICAgICB3M2Nfc2xpZHkucHJldmlvdXNfc2xpZGUoZmFsc2UpOwogICAgICByZXR1cm4gdzNjX3NsaWR5LmNhbmNlbChldmVudCk7CiAgICB9CiAgICBlbHNlIGlmIChrZXkgPT0gMzIpIC8vIHNwYWNlIGJhcgogICAgewogICAgICB3M2Nfc2xpZHkubmV4dF9zbGlkZSh0cnVlKTsKICAgICAgcmV0dXJuIHczY19zbGlkeS5jYW5jZWwoZXZlbnQpOwogICAgfQogICAgZWxzZSBpZiAoa2V5ID09IDM3KSAvLyBMZWZ0IGFycm93CiAgICB7CiAgICAgIHczY19zbGlkeS5wcmV2aW91c19zbGlkZSghZXZlbnQuc2hpZnRLZXkpOwogICAgICByZXR1cm4gdzNjX3NsaWR5LmNhbmNlbChldmVudCk7CiAgICB9CiAgICBlbHNlIGlmIChrZXkgPT0gMzYpIC8vIEhvbWUKICAgIHsKICAgICAgdzNjX3NsaWR5LmZpcnN0X3NsaWRlKCk7CiAgICAgIHJldHVybiB3M2Nfc2xpZHkuY2FuY2VsKGV2ZW50KTsKICAgIH0KICAgIGVsc2UgaWYgKGtleSA9PSAzNSkgLy8gRW5kCiAgICB7CiAgICAgIHczY19zbGlkeS5sYXN0X3NsaWRlKCk7CiAgICAgIHJldHVybiB3M2Nfc2xpZHkuY2FuY2VsKGV2ZW50KTsKICAgIH0KICAgIGVsc2UgaWYgKGtleSA9PSAzOSkgLy8gUmlnaHQgYXJyb3cKICAgIHsKICAgICAgdzNjX3NsaWR5Lm5leHRfc2xpZGUoIWV2ZW50LnNoaWZ0S2V5KTsKICAgICAgcmV0dXJuIHczY19zbGlkeS5jYW5jZWwoZXZlbnQpOwogICAgfQogICAgZWxzZSBpZiAoa2V5ID09IDEzKSAvLyBFbnRlcgogICAgewogICAgICBpZiAodzNjX3NsaWR5Lm91dGxpbmUpCiAgICAgIHsKICAgICAgICBpZiAodzNjX3NsaWR5Lm91dGxpbmUudmlzaWJsZSkKICAgICAgICAgIHczY19zbGlkeS5mb2xkKHczY19zbGlkeS5vdXRsaW5lKTsKICAgICAgICBlbHNlCiAgICAgICAgICB3M2Nfc2xpZHkudW5mb2xkKHczY19zbGlkeS5vdXRsaW5lKTsKICAgICAgICAgIAogICAgICAgcmV0dXJuIHczY19zbGlkeS5jYW5jZWwoZXZlbnQpOwogICAgICB9CiAgICB9CiAgICBlbHNlIGlmIChrZXkgPT0gMTg4KSAgLy8gPCBmb3Igc21hbGxlciBmb250cwogICAgewogICAgICB3M2Nfc2xpZHkuc21hbGxlcigpOwogICAgICByZXR1cm4gdzNjX3NsaWR5LmNhbmNlbChldmVudCk7CiAgICB9CiAgICBlbHNlIGlmIChrZXkgPT0gMTkwKSAgLy8gPiBmb3IgbGFyZ2VyIGZvbnRzCiAgICB7CiAgICAgIHczY19zbGlkeS5iaWdnZXIoKTsKICAgICAgcmV0dXJuIHczY19zbGlkeS5jYW5jZWwoZXZlbnQpOwogICAgfQogICAgZWxzZSBpZiAoa2V5ID09IDE4OSB8fCBrZXkgPT0gMTA5KSAgLy8gLSBmb3Igc21hbGxlciBmb250cwogICAgewogICAgICB3M2Nfc2xpZHkuc21hbGxlcigpOwogICAgICByZXR1cm4gdzNjX3NsaWR5LmNhbmNlbChldmVudCk7CiAgICB9CiAgICBlbHNlIGlmIChrZXkgPT0gMTg3IHx8IGtleSA9PSAxOTEgfHwga2V5ID09IDEwNykgIC8vID0gKyAgZm9yIGxhcmdlciBmb250cwogICAgewogICAgICB3M2Nfc2xpZHkuYmlnZ2VyKCk7CiAgICAgIHJldHVybiB3M2Nfc2xpZHkuY2FuY2VsKGV2ZW50KTsKICAgIH0KICAgIGVsc2UgaWYgKGtleSA9PSA4MykgIC8vIFMgZm9yIHNtYWxsZXIgZm9udHMKICAgIHsKICAgICAgdzNjX3NsaWR5LnNtYWxsZXIoKTsKICAgICAgcmV0dXJuIHczY19zbGlkeS5jYW5jZWwoZXZlbnQpOwogICAgfQogICAgZWxzZSBpZiAoa2V5ID09IDY2KSAgLy8gQiBmb3IgbGFyZ2VyIGZvbnRzCiAgICB7CiAgICAgIHczY19zbGlkeS5iaWdnZXIoKTsKICAgICAgcmV0dXJuIHczY19zbGlkeS5jYW5jZWwoZXZlbnQpOwogICAgfQogICAgZWxzZSBpZiAoa2V5ID09IDkwKSAgLy8gWiBmb3IgbGFzdCBzbGlkZQogICAgewogICAgICB3M2Nfc2xpZHkubGFzdF9zbGlkZSgpOwogICAgICByZXR1cm4gdzNjX3NsaWR5LmNhbmNlbChldmVudCk7CiAgICB9CiAgICBlbHNlIGlmIChrZXkgPT0gNzApICAvLyBGIGZvciB0b2dnbGUgdG9vbGJhcgogICAgewogICAgICB3M2Nfc2xpZHkudG9nZ2xlX3Rvb2xiYXIoKTsKICAgICAgcmV0dXJuIHczY19zbGlkeS5jYW5jZWwoZXZlbnQpOwogICAgfQogICAgZWxzZSBpZiAoa2V5ID09IDY1KSAgLy8gQSBmb3IgdG9nZ2xlIHZpZXcgc2luZ2xlL2FsbCBzbGlkZXMKICAgIHsKICAgICAgdzNjX3NsaWR5LnRvZ2dsZV92aWV3KCk7CiAgICAgIHJldHVybiB3M2Nfc2xpZHkuY2FuY2VsKGV2ZW50KTsKICAgIH0KICAgIGVsc2UgaWYgKGtleSA9PSA3NSkgIC8vIHRvZ2dsZSBhY3Rpb24gb2YgbGVmdCBjbGljayBmb3IgbmV4dCBwYWdlCiAgICB7CiAgICAgIHczY19zbGlkeS5tb3VzZV9jbGlja19lbmFibGVkID0gIXczY19zbGlkeS5tb3VzZV9jbGlja19lbmFibGVkOwogICAgICB2YXIgYWxlcnRfbXNnID0gKHczY19zbGlkeS5tb3VzZV9jbGlja19lbmFibGVkID8KICAgICAgICAgICAgICAgICJlbmFibGVkIiA6ICJkaXNhYmxlZCIpICsgICIgbW91c2UgY2xpY2sgYWR2YW5jZSI7CgogICAgICBhbGVydCh3M2Nfc2xpZHkubG9jYWxpemUoYWxlcnRfbXNnKSk7CiAgICAgIHJldHVybiB3M2Nfc2xpZHkuY2FuY2VsKGV2ZW50KTsKICAgIH0KICAgIGVsc2UgaWYgKGtleSA9PSA4NCB8fCBrZXkgPT0gNjcpICAvLyBUIG9yIEMgZm9yIHRhYmxlIG9mIGNvbnRlbnRzCiAgICB7CiAgICAgIGlmICh3M2Nfc2xpZHkudG9jKQogICAgICAgIHczY19zbGlkeS50b2dnbGVfdGFibGVfb2ZfY29udGVudHMoKTsKCiAgICAgIHJldHVybiB3M2Nfc2xpZHkuY2FuY2VsKGV2ZW50KTsKICAgIH0KICAgIGVsc2UgaWYgKGtleSA9PSA3MikgLy8gSCBmb3IgaGVscAogICAgewogICAgICB3aW5kb3cubG9jYXRpb24gPSB3M2Nfc2xpZHkuaGVscF9wYWdlOwogICAgICByZXR1cm4gdzNjX3NsaWR5LmNhbmNlbChldmVudCk7CiAgICB9CiAgICAvL2Vsc2UgYWxlcnQoImtleSBjb2RlIGlzICIrIGtleSk7CgogICAgcmV0dXJuIHRydWU7CiAgfSwKCiAgLy8gc2FmZSBmb3IgYm90aCB0ZXh0L2h0bWwgYW5kIGFwcGxpY2F0aW9uL3hodG1sK3htbAogIGNyZWF0ZV9lbGVtZW50OiBmdW5jdGlvbiAobmFtZSkgewogICAgaWYgKHRoaXMueGh0bWwgJiYgKHR5cGVvZiBkb2N1bWVudC5jcmVhdGVFbGVtZW50TlMgIT0gJ3VuZGVmaW5lZCcpKQogICAgICByZXR1cm4gZG9jdW1lbnQuY3JlYXRlRWxlbWVudE5TKCJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hodG1sIiwgbmFtZSkKCiAgICByZXR1cm4gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChuYW1lKTsKICB9LAoKICBnZXRfZWxlbWVudF9zdHlsZTogZnVuY3Rpb24gKGVsZW0sIElFU3R5bGVQcm9wLCBDU1NTdHlsZVByb3ApIHsKICAgIGlmIChlbGVtLmN1cnJlbnRTdHlsZSkKICAgIHsKICAgICAgcmV0dXJuIGVsZW0uY3VycmVudFN0eWxlW0lFU3R5bGVQcm9wXTsKICAgIH0KICAgIGVsc2UgaWYgKHdpbmRvdy5nZXRDb21wdXRlZFN0eWxlKQogICAgewogICAgICB2YXIgY29tcFN0eWxlID0gd2luZG93LmdldENvbXB1dGVkU3R5bGUoZWxlbSwgIiIpOwogICAgICByZXR1cm4gY29tcFN0eWxlLmdldFByb3BlcnR5VmFsdWUoQ1NTU3R5bGVQcm9wKTsKICAgIH0KICAgIHJldHVybiAiIjsKICB9LAoKICAvLyB0aGUgc3RyaW5nIHN0ciBpcyBhIHdoaXRlc3BhY2Ugc2VwYXJhdGVkIGxpc3Qgb2YgdG9rZW5zCiAgLy8gdGVzdCBpZiBzdHIgY29udGFpbnMgYSBwYXJ0aWN1bGFyIHRva2VuLCBlLmcuICJzbGlkZSIKICBoYXNfdG9rZW46IGZ1bmN0aW9uIChzdHIsIHRva2VuKSB7CiAgICBpZiAoc3RyKQogICAgewogICAgICAvLyBkZWZpbmUgcGF0dGVybiBhcyByZWd1bGFyIGV4cHJlc3Npb24KICAgICAgdmFyIHBhdHRlcm4gPSAvXHcrL2c7CgogICAgICAvLyBjaGVjayBmb3IgbWF0Y2hlcwogICAgICAvLyBwbGFjZSByZXN1bHQgaW4gYXJyYXkKICAgICAgdmFyIHJlc3VsdCA9IHN0ci5tYXRjaChwYXR0ZXJuKTsKCiAgICAgIC8vIG5vdyBjaGVjayBpZiBkZXNpcmVkIHRva2VuIGlzIHByZXNlbnQKICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCByZXN1bHQubGVuZ3RoOyBpKyspCiAgICAgIHsKICAgICAgICBpZiAocmVzdWx0W2ldID09IHRva2VuKQogICAgICAgICAgcmV0dXJuIHRydWU7CiAgICAgIH0KICAgIH0KCiAgICByZXR1cm4gZmFsc2U7CiAgfSwKCiAgZ2V0X2NsYXNzX2xpc3Q6IGZ1bmN0aW9uIChlbGVtZW50KSB7CiAgICBpZiAodHlwZW9mIGVsZW1lbnQuY2xhc3NOYW1lICE9ICd1bmRlZmluZWQnKQogICAgICByZXR1cm4gZWxlbWVudC5jbGFzc05hbWU7CgogICAgcmV0dXJuIGVsZW1lbnQuZ2V0QXR0cmlidXRlKCJjbGFzcyIpOwogIH0sCgogIGhhc19jbGFzczogZnVuY3Rpb24gKGVsZW1lbnQsIG5hbWUpIHsKICAgIGlmIChlbGVtZW50Lm5vZGVUeXBlICE9IDEpCiAgICAgIHJldHVybiBmYWxzZTsKCiAgICB2YXIgcmVnZXhwID0gbmV3IFJlZ0V4cCgiKF58ICkiICsgbmFtZSArICJcVyoiKTsKCiAgICBpZiAodHlwZW9mIGVsZW1lbnQuY2xhc3NOYW1lICE9ICd1bmRlZmluZWQnKQogICAgICByZXR1cm4gcmVnZXhwLnRlc3QoZWxlbWVudC5jbGFzc05hbWUpOwoKICAgIHJldHVybiByZWdleHAudGVzdChlbGVtZW50LmdldEF0dHJpYnV0ZSgiY2xhc3MiKSk7CiAgfSwKCiAgcmVtb3ZlX2NsYXNzOiBmdW5jdGlvbiAoZWxlbWVudCwgbmFtZSkgewogICAgdmFyIHJlZ2V4cCA9IG5ldyBSZWdFeHAoIihefCApIiArIG5hbWUgKyAiXFcqIik7CiAgICB2YXIgY2xzdmFsID0gIiI7CgogICAgaWYgKHR5cGVvZiBlbGVtZW50LmNsYXNzTmFtZSAhPSAndW5kZWZpbmVkJykKICAgIHsKICAgICAgY2xzdmFsID0gZWxlbWVudC5jbGFzc05hbWU7CgogICAgICBpZiAoY2xzdmFsKQogICAgICB7CiAgICAgICAgY2xzdmFsID0gY2xzdmFsLnJlcGxhY2UocmVnZXhwLCAiIik7CiAgICAgICAgZWxlbWVudC5jbGFzc05hbWUgPSBjbHN2YWw7CiAgICAgIH0KICAgIH0KICAgIGVsc2UKICAgIHsKICAgICAgY2xzdmFsID0gZWxlbWVudC5nZXRBdHRyaWJ1dGUoImNsYXNzIik7CgogICAgICBpZiAoY2xzdmFsKQogICAgICB7CiAgICAgICAgY2xzdmFsID0gY2xzdmFsLnJlcGxhY2UocmVnZXhwLCAiIik7CiAgICAgICAgZWxlbWVudC5zZXRBdHRyaWJ1dGUoImNsYXNzIiwgY2xzdmFsKTsKICAgICAgfQogICAgfQogIH0sCgogIGFkZF9jbGFzczogZnVuY3Rpb24gKGVsZW1lbnQsIG5hbWUpIHsKICAgIGlmICghdGhpcy5oYXNfY2xhc3MoZWxlbWVudCwgbmFtZSkpCiAgICB7CiAgICAgIGlmICh0eXBlb2YgZWxlbWVudC5jbGFzc05hbWUgIT0gJ3VuZGVmaW5lZCcpCiAgICAgICAgZWxlbWVudC5jbGFzc05hbWUgKz0gIiAiICsgbmFtZTsKICAgICAgZWxzZQogICAgICB7CiAgICAgICAgdmFyIGNsc3ZhbCA9IGVsZW1lbnQuZ2V0QXR0cmlidXRlKCJjbGFzcyIpOwogICAgICAgIGNsc3ZhbCA9IGNsc3ZhbCA/IGNsc3ZhbCArICIgIiArIG5hbWUgOiBuYW1lOwogICAgICAgIGVsZW1lbnQuc2V0QXR0cmlidXRlKCJjbGFzcyIsIGNsc3ZhbCk7CiAgICAgIH0KICAgIH0KICB9LAoKICAvLyBIVE1MIGVsZW1lbnRzIHRoYXQgY2FuIGJlIHVzZWQgd2l0aCBjbGFzcz0iaW5jcmVtZW50YWwiCiAgLy8gbm90ZSB0aGF0IHlvdSBjYW4gYWxzbyBwdXQgdGhlIGNsYXNzIG9uIGNvbnRhaW5lcnMgbGlrZQogIC8vIHVwLCBvbCwgZGwsIGFuZCBkaXYgdG8gbWFrZSB0aGVpciBjb250ZW50cyBhcHBlYXIKICAvLyBpbmNyZW1lbnRhbGx5LiBVcHBlciBjYXNlIGlzIHVzZWQgc2luY2UgdGhpcyBpcyB3aGF0CiAgLy8gYnJvd3NlcnMgcmVwb3J0IGZvciBIVE1MIG5vZGUgbmFtZXMgKHRleHQvaHRtbCkuCiAgaW5jcmVtZW50YWxfZWxlbWVudHM6IG51bGwsCiAgb2theV9mb3JfaW5jcmVtZW50YWw6IGZ1bmN0aW9uIChuYW1lKSB7CiAgICBpZiAoIXRoaXMuaW5jcmVtZW50YWxfZWxlbWVudHMpCiAgICB7CiAgICAgIHZhciBpbmNsaXN0ID0gbmV3IEFycmF5KCk7CiAgICAgIGluY2xpc3RbInAiXSA9IHRydWU7CiAgICAgIGluY2xpc3RbInByZSJdID0gdHJ1ZTsKICAgICAgaW5jbGlzdFsibGkiXSA9IHRydWU7CiAgICAgIGluY2xpc3RbImJsb2NrcXVvdGUiXSA9IHRydWU7CiAgICAgIGluY2xpc3RbImR0Il0gPSB0cnVlOwogICAgICBpbmNsaXN0WyJkZCJdID0gdHJ1ZTsKICAgICAgaW5jbGlzdFsiaDIiXSA9IHRydWU7CiAgICAgIGluY2xpc3RbImgzIl0gPSB0cnVlOwogICAgICBpbmNsaXN0WyJoNCJdID0gdHJ1ZTsKICAgICAgaW5jbGlzdFsiaDUiXSA9IHRydWU7CiAgICAgIGluY2xpc3RbImg2Il0gPSB0cnVlOwogICAgICBpbmNsaXN0WyJzcGFuIl0gPSB0cnVlOwogICAgICBpbmNsaXN0WyJhZGRyZXNzIl0gPSB0cnVlOwogICAgICBpbmNsaXN0WyJ0YWJsZSJdID0gdHJ1ZTsKICAgICAgaW5jbGlzdFsidHIiXSA9IHRydWU7CiAgICAgIGluY2xpc3RbInRoIl0gPSB0cnVlOwogICAgICBpbmNsaXN0WyJ0ZCJdID0gdHJ1ZTsKICAgICAgaW5jbGlzdFsiaW1nIl0gPSB0cnVlOwogICAgICBpbmNsaXN0WyJvYmplY3QiXSA9IHRydWU7CiAgICAgIHRoaXMuaW5jcmVtZW50YWxfZWxlbWVudHMgPSBpbmNsaXN0OwogICAgfQogICAgcmV0dXJuIHRoaXMuaW5jcmVtZW50YWxfZWxlbWVudHNbbmFtZS50b0xvd2VyQ2FzZSgpXTsKICB9LAoKICBuZXh0X2luY3JlbWVudGFsX2l0ZW06IGZ1bmN0aW9uIChub2RlKSB7CiAgICB2YXIgYnIgPSB0aGlzLmlzX3hodG1sID8gImJyIiA6ICJCUiI7CiAgICB2YXIgc2xpZGUgPSB3M2Nfc2xpZHkuc2xpZGVzW3czY19zbGlkeS5zbGlkZV9udW1iZXJdOwoKICAgIGZvciAoOzspCiAgICB7CiAgICAgIG5vZGUgPSB3M2Nfc2xpZHkubmV4dF9ub2RlKHNsaWRlLCBub2RlKTsKCiAgICAgIGlmIChub2RlID09IG51bGwgfHwgbm9kZS5wYXJlbnROb2RlID09IG51bGwpCiAgICAgICAgYnJlYWs7CgogICAgICBpZiAobm9kZS5ub2RlVHlwZSA9PSAxKSAgLy8gRUxFTUVOVAogICAgICB7CiAgICAgICAgaWYgKG5vZGUubm9kZU5hbWUgPT0gYnIpCiAgICAgICAgICBjb250aW51ZTsKCiAgICAgICAgaWYgKHczY19zbGlkeS5oYXNfY2xhc3Mobm9kZSwgImluY3JlbWVudGFsIikKICAgICAgICAgICAgICYmIHczY19zbGlkeS5va2F5X2Zvcl9pbmNyZW1lbnRhbChub2RlLm5vZGVOYW1lKSkKICAgICAgICAgIHJldHVybiBub2RlOwoKICAgICAgICBpZiAodzNjX3NsaWR5Lmhhc19jbGFzcyhub2RlLnBhcmVudE5vZGUsICJpbmNyZW1lbnRhbCIpCiAgICAgICAgICAgICAmJiAhdzNjX3NsaWR5Lmhhc19jbGFzcyhub2RlLCAibm9uLWluY3JlbWVudGFsIikpCiAgICAgICAgICByZXR1cm4gbm9kZTsKICAgICAgfQogICAgfQoKICAgIHJldHVybiBub2RlOwogIH0sCgogIHByZXZpb3VzX2luY3JlbWVudGFsX2l0ZW06IGZ1bmN0aW9uIChub2RlKSB7CiAgICB2YXIgYnIgPSB0aGlzLmlzX3hodG1sID8gImJyIiA6ICJCUiI7CiAgICB2YXIgc2xpZGUgPSB3M2Nfc2xpZHkuc2xpZGVzW3czY19zbGlkeS5zbGlkZV9udW1iZXJdOwoKICAgIGZvciAoOzspCiAgICB7CiAgICAgIG5vZGUgPSB3M2Nfc2xpZHkucHJldmlvdXNfbm9kZShzbGlkZSwgbm9kZSk7CgogICAgICBpZiAobm9kZSA9PSBudWxsIHx8IG5vZGUucGFyZW50Tm9kZSA9PSBudWxsKQogICAgICAgIGJyZWFrOwoKICAgICAgaWYgKG5vZGUubm9kZVR5cGUgPT0gMSkKICAgICAgewogICAgICAgIGlmIChub2RlLm5vZGVOYW1lID09IGJyKQogICAgICAgICAgY29udGludWU7CgogICAgICAgIGlmICh3M2Nfc2xpZHkuaGFzX2NsYXNzKG5vZGUsICJpbmNyZW1lbnRhbCIpCiAgICAgICAgICAgICAmJiB3M2Nfc2xpZHkub2theV9mb3JfaW5jcmVtZW50YWwobm9kZS5ub2RlTmFtZSkpCiAgICAgICAgICByZXR1cm4gbm9kZTsKCiAgICAgICAgaWYgKHczY19zbGlkeS5oYXNfY2xhc3Mobm9kZS5wYXJlbnROb2RlLCAiaW5jcmVtZW50YWwiKQogICAgICAgICAgICAgJiYgIXczY19zbGlkeS5oYXNfY2xhc3Mobm9kZSwgIm5vbi1pbmNyZW1lbnRhbCIpKQogICAgICAgICAgcmV0dXJuIG5vZGU7CiAgICAgIH0KICAgIH0KCiAgICByZXR1cm4gbm9kZTsKICB9LAoKICAvLyBzZXQgdmlzaWJpbGl0eSBmb3IgYWxsIGVsZW1lbnRzIG9uIGN1cnJlbnQgc2xpZGUgd2l0aAogIC8vIGEgcGFyZW50IGVsZW1lbnQgd2l0aCBhdHRyaWJ1dGUgY2xhc3M9ImluY3JlbWVudGFsIgogIHNldF92aXNpYmlsaXR5X2FsbF9pbmNyZW1lbnRhbDogZnVuY3Rpb24gKHZhbHVlKSB7CiAgICB2YXIgbm9kZSA9IHRoaXMubmV4dF9pbmNyZW1lbnRhbF9pdGVtKG51bGwpOwoKICAgIGlmICh2YWx1ZSA9PSAiaGlkZGVuIikKICAgIHsKICAgICAgd2hpbGUgKG5vZGUpCiAgICAgIHsKICAgICAgICB3M2Nfc2xpZHkuYWRkX2NsYXNzKG5vZGUsICJpbnZpc2libGUiKTsKICAgICAgICBub2RlID0gdzNjX3NsaWR5Lm5leHRfaW5jcmVtZW50YWxfaXRlbShub2RlKTsKICAgICAgfQogICAgfQogICAgZWxzZSAvLyB2YWx1ZSA9PSAidmlzaWJsZSIKICAgIHsKICAgICAgd2hpbGUgKG5vZGUpCiAgICAgIHsKICAgICAgICB3M2Nfc2xpZHkucmVtb3ZlX2NsYXNzKG5vZGUsICJpbnZpc2libGUiKTsKICAgICAgICBub2RlID0gdzNjX3NsaWR5Lm5leHRfaW5jcmVtZW50YWxfaXRlbShub2RlKTsKICAgICAgfQogICAgfQogIH0sCgogIC8vIHJldmVhbCB0aGUgbmV4dCBoaWRkZW4gaXRlbSBvbiB0aGUgc2xpZGUKICAvLyBub2RlIGlzIG51bGwgb3IgdGhlIG5vZGUgdGhhdCB3YXMgbGFzdCByZXZlYWxlZAogIHJldmVhbF9uZXh0X2l0ZW06IGZ1bmN0aW9uIChub2RlKSB7CiAgICBub2RlID0gdzNjX3NsaWR5Lm5leHRfaW5jcmVtZW50YWxfaXRlbShub2RlKTsKCiAgICBpZiAobm9kZSAmJiBub2RlLm5vZGVUeXBlID09IDEpICAvLyBhbiBlbGVtZW50CiAgICAgIHczY19zbGlkeS5yZW1vdmVfY2xhc3Mobm9kZSwgImludmlzaWJsZSIpOwoKICAgIHJldHVybiBub2RlOwogIH0sCgogIC8vIGV4YWN0IGludmVyc2Ugb2YgcmV2ZWFsTmV4dEl0ZW0obm9kZSkKICBoaWRlX3ByZXZpb3VzX2l0ZW06IGZ1bmN0aW9uIChub2RlKSB7CiAgICBpZiAobm9kZSAmJiBub2RlLm5vZGVUeXBlID09IDEpICAvLyBhbiBlbGVtZW50CiAgICAgIHczY19zbGlkeS5hZGRfY2xhc3Mobm9kZSwgImludmlzaWJsZSIpOwoKICAgIHJldHVybiB0aGlzLnByZXZpb3VzX2luY3JlbWVudGFsX2l0ZW0obm9kZSk7CiAgfSwKCiAgLy8gbGVmdCB0byByaWdodCB0cmF2ZXJzYWwgb2Ygcm9vdCdzIGNvbnRlbnQKICBuZXh0X25vZGU6IGZ1bmN0aW9uIChyb290LCBub2RlKSB7CiAgICBpZiAobm9kZSA9PSBudWxsKQogICAgICByZXR1cm4gcm9vdC5maXJzdENoaWxkOwoKICAgIGlmIChub2RlLmZpcnN0Q2hpbGQpCiAgICAgIHJldHVybiBub2RlLmZpcnN0Q2hpbGQ7CgogICAgaWYgKG5vZGUubmV4dFNpYmxpbmcpCiAgICAgIHJldHVybiBub2RlLm5leHRTaWJsaW5nOwoKICAgIGZvciAoOzspCiAgICB7CiAgICAgIG5vZGUgPSBub2RlLnBhcmVudE5vZGU7CgogICAgICBpZiAoIW5vZGUgfHwgbm9kZSA9PSByb290KQogICAgICAgIGJyZWFrOwoKICAgICAgaWYgKG5vZGUgJiYgbm9kZS5uZXh0U2libGluZykKICAgICAgICByZXR1cm4gbm9kZS5uZXh0U2libGluZzsKICAgIH0KCiAgICByZXR1cm4gbnVsbDsKICB9LAoKICAvLyByaWdodCB0byBsZWZ0IHRyYXZlcnNhbCBvZiByb290J3MgY29udGVudAogIHByZXZpb3VzX25vZGU6IGZ1bmN0aW9uIChyb290LCBub2RlKSB7CiAgICBpZiAobm9kZSA9PSBudWxsKQogICAgewogICAgICBub2RlID0gcm9vdC5sYXN0Q2hpbGQ7CgogICAgICBpZiAobm9kZSkKICAgICAgewogICAgICAgIHdoaWxlIChub2RlLmxhc3RDaGlsZCkKICAgICAgICAgIG5vZGUgPSBub2RlLmxhc3RDaGlsZDsKICAgICAgfQoKICAgICAgcmV0dXJuIG5vZGU7CiAgICB9CgogICAgaWYgKG5vZGUucHJldmlvdXNTaWJsaW5nKQogICAgewogICAgICBub2RlID0gbm9kZS5wcmV2aW91c1NpYmxpbmc7CgogICAgICB3aGlsZSAobm9kZS5sYXN0Q2hpbGQpCiAgICAgICAgbm9kZSA9IG5vZGUubGFzdENoaWxkOwoKICAgICAgcmV0dXJuIG5vZGU7CiAgICB9CgogICAgaWYgKG5vZGUucGFyZW50Tm9kZSAhPSByb290KQogICAgICByZXR1cm4gbm9kZS5wYXJlbnROb2RlOwoKICAgIHJldHVybiBudWxsOwogIH0sCgogIHByZXZpb3VzX3NpYmxpbmdfZWxlbWVudDogZnVuY3Rpb24gKGVsKSB7CiAgICBlbCA9IGVsLnByZXZpb3VzU2libGluZzsKCiAgICB3aGlsZSAoZWwgJiYgZWwubm9kZVR5cGUgIT0gMSkKICAgICAgZWwgPSBlbC5wcmV2aW91c1NpYmxpbmc7CgogICAgcmV0dXJuIGVsOwogIH0sCgogIG5leHRfc2libGluZ19lbGVtZW50OiBmdW5jdGlvbiAoZWwpIHsKICAgIGVsID0gZWwubmV4dFNpYmxpbmc7CgogICAgd2hpbGUgKGVsICYmIGVsLm5vZGVUeXBlICE9IDEpCiAgICAgIGVsID0gZWwubmV4dFNpYmxpbmc7CgogICAgcmV0dXJuIGVsOwogIH0sCgogIGZpcnN0X2NoaWxkX2VsZW1lbnQ6IGZ1bmN0aW9uIChlbCkgewogICAgdmFyIG5vZGU7CgogICAgZm9yIChub2RlID0gZWwuZmlyc3RDaGlsZDsgbm9kZTsgbm9kZSA9IG5vZGUubmV4dFNpYmxpbmcpCiAgICB7CiAgICAgIGlmIChub2RlLm5vZGVUeXBlID09IDEpCiAgICAgICAgYnJlYWs7CiAgICB9CgogICAgcmV0dXJuIG5vZGU7CiAgfSwKCiAgZmlyc3RfdGFnOiBmdW5jdGlvbiAoZWxlbWVudCwgdGFnKSB7CiAgICB2YXIgbm9kZTsKCiAgICBpZiAoIXRoaXMuaXNfeGh0bWwpCiAgICAgIHRhZyA9IHRhZy50b1VwcGVyQ2FzZSgpOwoKICAgIGZvciAobm9kZSA9IGVsZW1lbnQuZmlyc3RDaGlsZDsgbm9kZTsgbm9kZSA9IG5vZGUubmV4dFNpYmxpbmcpCiAgICB7CiAgICAgIGlmIChub2RlLm5vZGVUeXBlID09IDEgJiYgbm9kZS5ub2RlTmFtZSA9PSB0YWcpCiAgICAgICAgYnJlYWs7CiAgICB9CgogICAgcmV0dXJuIG5vZGU7CiAgfSwKCiAgaGlkZV9zZWxlY3Rpb246IGZ1bmN0aW9uICgpIHsKICAgIGlmICh3aW5kb3cuZ2V0U2VsZWN0aW9uKSAvLyBGaXJlZm94LCBDaHJvbWl1bSwgU2FmYXJpLCBPcGVyYQogICAgewogICAgICB2YXIgc2VsZWN0aW9uID0gd2luZG93LmdldFNlbGVjdGlvbigpOwoKICAgICAgaWYgKHNlbGVjdGlvbi5yYW5nZUNvdW50ID4gMCkKICAgICAgewogICAgICAgIHZhciByYW5nZSA9IHNlbGVjdGlvbi5nZXRSYW5nZUF0KDApOwogICAgICAgIHJhbmdlLmNvbGxhcHNlIChmYWxzZSk7CiAgICAgIH0KICAgIH0KICAgIGVsc2UgLy8gSW50ZXJuZXQgRXhwbG9yZXIKICAgIHsKICAgICAgdmFyIHRleHRSYW5nZSA9IGRvY3VtZW50LnNlbGVjdGlvbi5jcmVhdGVSYW5nZSAoKTsKICAgICAgdGV4dFJhbmdlLmNvbGxhcHNlIChmYWxzZSk7CiAgICB9CiAgfSwKCiAgZ2V0X3NlbGVjdGVkX3RleHQ6IGZ1bmN0aW9uICgpIHsKICAgIHRyeQogICAgewogICAgICBpZiAod2luZG93LmdldFNlbGVjdGlvbikKICAgICAgICByZXR1cm4gd2luZG93LmdldFNlbGVjdGlvbigpLnRvU3RyaW5nKCk7CgogICAgICBpZiAoZG9jdW1lbnQuZ2V0U2VsZWN0aW9uKQogICAgICAgIHJldHVybiBkb2N1bWVudC5nZXRTZWxlY3Rpb24oKS50b1N0cmluZygpOwoKICAgICAgaWYgKGRvY3VtZW50LnNlbGVjdGlvbikKICAgICAgICByZXR1cm4gZG9jdW1lbnQuc2VsZWN0aW9uLmNyZWF0ZVJhbmdlKCkudGV4dDsKICAgIH0KICAgIGNhdGNoIChlKQogICAgewogICAgfQoKICAgIHJldHVybiAiIjsKICB9LAoKICAvLyBtYWtlIG5vdGUgb2YgbGVuZ3RoIG9mIHNlbGVjdGVkIHRleHQKICAvLyBhcyB0aGlzIGV2YWx1YXRlcyB0byB6ZXJvIGluIGNsaWNrIGV2ZW50CiAgbW91c2VfYnV0dG9uX3VwOiBmdW5jdGlvbiAoZSkgewogICAgdzNjX3NsaWR5LnNlbGVjdGVkX3RleHRfbGVuID0gdzNjX3NsaWR5LmdldF9zZWxlY3RlZF90ZXh0KCkubGVuZ3RoOwogIH0sCgogIG1vdXNlX2J1dHRvbl9kb3duOiBmdW5jdGlvbiAoZSkgewogICAgdzNjX3NsaWR5LnNlbGVjdGVkX3RleHRfbGVuID0gdzNjX3NsaWR5LmdldF9zZWxlY3RlZF90ZXh0KCkubGVuZ3RoOwogICAgdzNjX3NsaWR5Lm1vdXNlX3ggPSBlLmNsaWVudFg7CiAgICB3M2Nfc2xpZHkubW91c2VfeSA9IGUuY2xpZW50WTsKICB9LAoKICAvLyByaWdodCBtb3VzZSBidXR0b24gY2xpY2sgaXMgcmVzZXJ2ZWQgZm9yIGNvbnRleHQgbWVudXMKICAvLyBpdCBpcyBtb3JlIHJlbGlhYmxlIHRvIGRldGVjdCByaWdodGNsaWNrIHRoYW4gbGVmdGNsaWNrCiAgbW91c2VfYnV0dG9uX2NsaWNrOiBmdW5jdGlvbiAoZSkgewogICAgaWYgKCFlKQogICAgICB2YXIgZSA9IHdpbmRvdy5ldmVudDsKCiAgICBpZiAoTWF0aC5hYnMoZS5jbGllbnRYIC13M2Nfc2xpZHkubW91c2VfeCkgKwogICAgICAgIE1hdGguYWJzKGUuY2xpZW50WSAtdzNjX3NsaWR5Lm1vdXNlX3kpID4gMTApCiAgICAgIHJldHVybiB0cnVlOwoKICAgIGlmICh3M2Nfc2xpZHkuc2VsZWN0ZWRfdGV4dF9sZW4gPiAwKQogICAgICByZXR1cm4gdHJ1ZTsKCiAgICB2YXIgcmlnaHRjbGljayA9IGZhbHNlOwogICAgdmFyIGxlZnRjbGljayA9IGZhbHNlOwogICAgdmFyIG1pZGRsZWNsaWNrID0gZmFsc2U7CiAgICB2YXIgdGFyZ2V0OwoKICAgIGlmICghZSkKICAgICAgdmFyIGUgPSB3aW5kb3cuZXZlbnQ7CgogICAgaWYgKGUudGFyZ2V0KQogICAgICB0YXJnZXQgPSBlLnRhcmdldDsKICAgIGVsc2UgaWYgKGUuc3JjRWxlbWVudCkKICAgICAgdGFyZ2V0ID0gZS5zcmNFbGVtZW50OwoKICAgIC8vIHdvcmsgYXJvdW5kIFNhZmFyaSBidWcKICAgIGlmICh0YXJnZXQubm9kZVR5cGUgPT0gMykKICAgICAgdGFyZ2V0ID0gdGFyZ2V0LnBhcmVudE5vZGU7CgogICAgaWYgKGUud2hpY2gpIC8vIGFsbCBicm93c2VycyBleGNlcHQgSUUKICAgIHsKICAgICAgbGVmdGNsaWNrID0gKGUud2hpY2ggPT0gMSk7CiAgICAgIG1pZGRsZWNsaWNrID0gKGUud2hpY2ggPT0gMik7CiAgICAgIHJpZ2h0Y2xpY2sgPSAoZS53aGljaCA9PSAzKTsKICAgIH0KICAgIGVsc2UgaWYgKGUuYnV0dG9uKQogICAgewogICAgICAvLyBLb25xdWVyb3IgZ2l2ZXMgMSBmb3IgbGVmdCwgNCBmb3IgbWlkZGxlCiAgICAgIC8vIElFNiBnaXZlcyAwIGZvciBsZWZ0IGFuZCBub3QgMSBhcyBJIGV4cGVjdGVkCgogICAgICBpZiAoZS5idXR0b24gPT0gNCkKICAgICAgICBtaWRkbGVjbGljayA9IHRydWU7CgogICAgICAvLyBhbGwgYnJvd3NlcnMgYWdyZWUgb24gMiBmb3IgcmlnaHQgYnV0dG9uCiAgICAgIHJpZ2h0Y2xpY2sgPSAoZS5idXR0b24gPT0gMik7CiAgICB9CiAgICBlbHNlCiAgICAgIGxlZnRjbGljayA9IHRydWU7CgogICAgaWYgKHczY19zbGlkeS5zZWxlY3RlZF90ZXh0X2xlbiA+IDApCiAgICB7CiAgICAgIHczY19zbGlkeS5zdG9wX3Byb3BhZ2F0aW9uKGUpOwogICAgICBlLmNhbmNlbCA9IHRydWU7CiAgICAgIGUucmV0dXJuVmFsdWUgPSBmYWxzZTsKICAgICAgcmV0dXJuIGZhbHNlOwogICAgfQoKICAgIC8vIGRpc21pc3MgdGFibGUgb2YgY29udGVudHMKICAgIHczY19zbGlkeS5oaWRlX3RhYmxlX29mX2NvbnRlbnRzKGZhbHNlKTsKCiAgICAvLyBjaGVjayBpZiB0YXJnZXQgaXMgc29tZXRoaW5nIHRoYXQgcHJvYmFibHkgd2FudCdzIGNsaWNrcwogICAgLy8gZS5nLiBhLCBlbWJlZCwgb2JqZWN0LCBpbnB1dCwgdGV4dGFyZWEsIHNlbGVjdCwgb3B0aW9uCiAgICB2YXIgdGFnID0gdGFyZ2V0Lm5vZGVOYW1lLnRvTG93ZXJDYXNlKCk7CgogICAgaWYgKHczY19zbGlkeS5tb3VzZV9jbGlja19lbmFibGVkICYmIGxlZnRjbGljayAmJgogICAgICAgICF3M2Nfc2xpZHkuc3BlY2lhbF9lbGVtZW50KHRhcmdldCkgJiYKICAgICAgICAhdGFyZ2V0Lm9uY2xpY2spCiAgICB7CiAgICAgIHczY19zbGlkeS5uZXh0X3NsaWRlKHRydWUpOwogICAgICB3M2Nfc2xpZHkuc3RvcF9wcm9wYWdhdGlvbihlKTsKICAgICAgZS5jYW5jZWwgPSB0cnVlOwogICAgICBlLnJldHVyblZhbHVlID0gZmFsc2U7CiAgICAgIHJldHVybiBmYWxzZTsKICAgIH0KCiAgICByZXR1cm4gdHJ1ZTsKICB9LAoKICBzcGVjaWFsX2VsZW1lbnQ6IGZ1bmN0aW9uIChlbGVtZW50KSB7CiAgICBpZiAodGhpcy5oYXNfY2xhc3MoZWxlbWVudCwgIm5vbi1pbnRlcmFjdGl2ZSIpKQogICAgICByZXR1cm4gZmFsc2U7CgogICAgdmFyIHRhZyA9IGVsZW1lbnQubm9kZU5hbWUudG9Mb3dlckNhc2UoKTsKCiAgICByZXR1cm4gZWxlbWVudC5vbmtleWRvd24gfHwKICAgICAgZWxlbWVudC5vbmNsaWNrIHx8CiAgICAgIHRhZyA9PSAiYSIgfHwKICAgICAgdGFnID09ICJlbWJlZCIgfHwKICAgICAgdGFnID09ICJvYmplY3QiIHx8CiAgICAgIHRhZyA9PSAidmlkZW8iIHx8CiAgICAgIHRhZyA9PSAiYXVkaW8iIHx8CiAgICAgIHRhZyA9PSAic3ZnIiB8fAogICAgICB0YWcgPT0gImNhbnZhcyIgfHwKICAgICAgdGFnID09ICJpbnB1dCIgfHwKICAgICAgdGFnID09ICJ0ZXh0YXJlYSIgfHwKICAgICAgdGFnID09ICJzZWxlY3QiIHx8CiAgICAgIHRhZyA9PSAib3B0aW9uIjsKICB9LAoKICBzbGlkeV9jaHJvbWU6IGZ1bmN0aW9uIChlbCkgewogICAgd2hpbGUgKGVsKQogICAgewogICAgICBpZiAoZWwgPT0gdzNjX3NsaWR5LnRvYyB8fAogICAgICAgICAgZWwgPT0gdzNjX3NsaWR5LnRvb2xiYXIgfHwKICAgICAgICAgIHczY19zbGlkeS5oYXNfY2xhc3MoZWwsICJvdXRsaW5lIikpCiAgICAgICAgcmV0dXJuIHRydWU7CgogICAgICBlbCA9IGVsLnBhcmVudE5vZGU7CiAgICB9CgogICAgcmV0dXJuIGZhbHNlOwogIH0sCgogIGdldF9rZXk6IGZ1bmN0aW9uIChlKQogIHsKICAgIHZhciBrZXk7CgogICAgLy8ga2x1ZGdlIGFyb3VuZCBOUy9JRSBkaWZmZXJlbmNlcyAKICAgIGlmICh0eXBlb2Ygd2luZG93LmV2ZW50ICE9ICJ1bmRlZmluZWQiKQogICAgICBrZXkgPSB3aW5kb3cuZXZlbnQua2V5Q29kZTsKICAgIGVsc2UgaWYgKGUud2hpY2gpCiAgICAgIGtleSA9IGUud2hpY2g7CgogICAgcmV0dXJuIGtleTsKICB9LAoKICBnZXRfdGFyZ2V0OiBmdW5jdGlvbiAoZSkgewogICAgdmFyIHRhcmdldDsKCiAgICBpZiAoIWUpCiAgICAgIGUgPSB3aW5kb3cuZXZlbnQ7CgogICAgaWYgKGUudGFyZ2V0KQogICAgICB0YXJnZXQgPSBlLnRhcmdldDsKICAgIGVsc2UgaWYgKGUuc3JjRWxlbWVudCkKICAgICAgdGFyZ2V0ID0gZS5zcmNFbGVtZW50OwoKICAgIGlmICh0YXJnZXQubm9kZVR5cGUgIT0gMSkKICAgICAgdGFyZ2V0ID0gdGFyZ2V0LnBhcmVudE5vZGU7CgogICAgcmV0dXJuIHRhcmdldDsKICB9LAoKICAvLyBkb2VzIGRpc3BsYXkgcHJvcGVydHkgcHJvdmlkZSBjb3JyZWN0IGRlZmF1bHRzPwogIGlzX2Jsb2NrOiBmdW5jdGlvbiAoZWxlbSkgewogICAgdmFyIHRhZyA9IGVsZW0ubm9kZU5hbWUudG9Mb3dlckNhc2UoKTsKCiAgICByZXR1cm4gdGFnID09ICJvbCIgfHwgdGFnID09ICJ1bCIgfHwgdGFnID09ICJwIiB8fCB0YWcgPT0gImRsIiB8fAogICAgICAgICAgIHRhZyA9PSAibGkiIHx8IHRhZyA9PSAidGFibGUiIHx8IHRhZyA9PSAicHJlIiB8fAogICAgICAgICAgIHRhZyA9PSAiaDEiIHx8IHRhZyA9PSAiaDIiIHx8IHRhZyA9PSAiaDMiIHx8CiAgICAgICAgICAgdGFnID09ICJoNCIgfHwgdGFnID09ICJoNSIgfHwgdGFnID09ICJoNiIgfHwKICAgICAgICAgICB0YWcgPT0gImJsb2NrcXVvdGUiIHx8IHRhZyA9PSAiYWRkcmVzcyI7IAogIH0sCgogIGFkZF9saXN0ZW5lcjogZnVuY3Rpb24gKGVsZW1lbnQsIGV2ZW50LCBoYW5kbGVyKSB7CiAgICBpZiAod2luZG93LmFkZEV2ZW50TGlzdGVuZXIpCiAgICAgIGVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihldmVudCwgaGFuZGxlciwgZmFsc2UpOwogICAgZWxzZQogICAgICBlbGVtZW50LmF0dGFjaEV2ZW50KCJvbiIrZXZlbnQsIGhhbmRsZXIpOwogIH0sCgogIC8vIHVzZWQgdG8gcHJldmVudCBldmVudCBwcm9wYWdhdGlvbiBmcm9tIGZpZWxkIGNvbnRyb2xzCiAgc3RvcF9wcm9wYWdhdGlvbjogZnVuY3Rpb24gKGV2ZW50KSB7CiAgICBldmVudCA9IGV2ZW50ID8gZXZlbnQgOiB3aW5kb3cuZXZlbnQ7CiAgICBldmVudC5jYW5jZWxCdWJibGUgPSB0cnVlOyAgLy8gZm9yIElFCgogICAgaWYgKGV2ZW50LnN0b3BQcm9wYWdhdGlvbikKICAgICAgZXZlbnQuc3RvcFByb3BhZ2F0aW9uKCk7CgogICAgcmV0dXJuIHRydWU7CiAgfSwKCiAgY2FuY2VsOiBmdW5jdGlvbiAoZXZlbnQpIHsKICAgIGlmIChldmVudCkKICAgIHsKICAgICAgIGV2ZW50LmNhbmNlbCA9IHRydWU7CiAgICAgICBldmVudC5yZXR1cm5WYWx1ZSA9IGZhbHNlOwoKICAgICAgaWYgKGV2ZW50LnByZXZlbnREZWZhdWx0KQogICAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7CiAgICB9CgogICAgdzNjX3NsaWR5LmtleV93YW50ZWQgPSBmYWxzZTsKICAgIHJldHVybiBmYWxzZTsKICB9LAoKLy8gZm9yIGVhY2ggbGFuZ3VhZ2UgZGVmaW5lIGFuIGFzc29jaWF0aXZlIGFycmF5Ci8vIGFuZCBhbHNvIHRoZSBoZWxwIHRleHQgd2hpY2ggaXMgbG9uZ2VyCgogIHN0cmluZ3NfZXM6IHsKICAgICJzbGlkZSI6InDDoWcuIiwKICAgICJoZWxwPyI6IkF5dWRhIiwKICAgICJjb250ZW50cz8iOiLDjW5kaWNlIiwKICAgICJ0YWJsZSBvZiBjb250ZW50cyI6InRhYmxhIGRlIGNvbnRlbmlkb3MiLAogICAgIlRhYmxlIG9mIENvbnRlbnRzIjoiVGFibGEgZGUgQ29udGVuaWRvcyIsCiAgICAicmVzdGFydCBwcmVzZW50YXRpb24iOiJSZWluaWNpYXIgcHJlc2VudGFjacOzbiIsCiAgICAicmVzdGFydD8iOiJJbmljaW8iCiAgfSwKICBoZWxwX2VzOgogICAgIlV0aWxpY2UgZWwgcmF0w7NuLCBiYXJyYSBlc3BhY2lhZG9yYSwgdGVjbGFzIEl6ZGEvRGNoYSwgIiArCiAgICAibyBSZSBww6FnIHkgQXYgcMOhZy4gVXNlIFMgeSBCIHBhcmEgY2FtYmlhciBlbCB0YW1hw7FvIGRlIGZ1ZW50ZS4iLAoKICBzdHJpbmdzX2NhOiB7CiAgICAic2xpZGUiOiJww6BnLi4iLAogICAgImhlbHA/IjoiQWp1ZGEiLAogICAgImNvbnRlbnRzPyI6IsONbmRleCIsCiAgICAidGFibGUgb2YgY29udGVudHMiOiJ0YXVsYSBkZSBjb250aW5ndXRzIiwKICAgICJUYWJsZSBvZiBDb250ZW50cyI6IlRhdWxhIGRlIENvbnRpbmd1dHMiLAogICAgInJlc3RhcnQgcHJlc2VudGF0aW9uIjoiUmVpbmljaWFyIHByZXNlbnRhY2nDsyIsCiAgICAicmVzdGFydD8iOiJJbmljaSIKICB9LAogIGhlbHBfY2E6CiAgICAiVXRpbGl0emkgZWwgcmF0b2zDrSwgYmFycmEgZXNwYWlhZG9yYSwgdGVjbGVzIEVzcS4vRHRhLiAiICsKICAgICJvIFJlIHDDoGcgeSBBdiBww6BnLiBVc2kgUyBpIEIgcGVyIGNhbnZpYXIgZ3JhbmTDoHJpYSBkZSBmb250LiIsCgogIHN0cmluZ3NfY3M6IHsKICAgICJzbGlkZSI6InNuw61tZWsiLAogICAgImhlbHA/IjoibsOhcG92xJtkYSIsCiAgICAiY29udGVudHM/Ijoib2JzYWgiLAogICAgInRhYmxlIG9mIGNvbnRlbnRzIjoib2JzYWggcHJlemVudGFjZSIsCiAgICAiVGFibGUgb2YgQ29udGVudHMiOiJPYnNhaCBwcmV6ZW50YWNlIiwKICAgICJyZXN0YXJ0IHByZXNlbnRhdGlvbiI6Inpub3Z1IHNwdXN0aXQgcHJlemVudGFjaSIsCiAgICAicmVzdGFydD8iOiJyZXN0YXJ0IgogIH0sCiAgaGVscF9jczoKICAgICJQcmV6ZW50YWNpIG3Fr8W+ZXRlIHByb2Now6F6ZXQgcG9tb2PDrSBrbGlrbnV0w60gbXnFoWksIG1lemVybsOta3UsICIgKwogICAgIsWhaXBlayB2bGV2byBhIHZwcmF2byBuZWJvIGtsw6F2ZXMgUGFnZVVwIGEgUGFnZURvd24uIFDDrXNtbyBzZSAiICsKICAgICJkw6EgenbEm3TFoWl0IGEgem1lbsWhaXQgcG9tb2PDrSBrbMOhdmVzIEIgYSBTLiIsCgogIHN0cmluZ3Nfbmw6IHsKICAgICJzbGlkZSI6InBhZ2luYSIsCiAgICAiaGVscD8iOiJIZWxwPyIsCiAgICAiY29udGVudHM/IjoiSW5ob3VkPyIsCiAgICAidGFibGUgb2YgY29udGVudHMiOiJpbmhvdWRzb3BnYXZlIiwKICAgICJUYWJsZSBvZiBDb250ZW50cyI6IkluaG91ZHNvcGdhdmUiLAogICAgInJlc3RhcnQgcHJlc2VudGF0aW9uIjoiaGVyc3RhcnQgcHJlc2VudGF0aWUiLAogICAgInJlc3RhcnQ/IjoiSGVyc3RhcnQ/IgogIH0sCiAgaGVscF9ubDoKICAgICAiTmF2aWdlZXIgZC5tLnYuIGhldCBtdWlzLCBzcGF0aWViYXIsIExpbmtzL1JlY2h0cyB0b2V0c2VuLCAiICsKICAgICAib2YgUGdVcCBlbiBQZ0RuLiBHZWJydWlrIFMgZW4gQiBvbSBkZSBrYXJha3Rlcmdyb290dGUgdGUgdmVyYW5kZXJlbi4iLAoKICBzdHJpbmdzX2RlOiB7CiAgICAic2xpZGUiOiJTZWl0ZSIsCiAgICAiaGVscD8iOiJIaWxmZSIsCiAgICAiY29udGVudHM/Ijoiw5xiZXJzaWNodCIsCiAgICAidGFibGUgb2YgY29udGVudHMiOiJJbmhhbHRzdmVyemVpY2huaXMiLAogICAgIlRhYmxlIG9mIENvbnRlbnRzIjoiSW5oYWx0c3ZlcnplaWNobmlzIiwKICAgICJyZXN0YXJ0IHByZXNlbnRhdGlvbiI6IlByw6RzZW50YXRpb24gbmV1IHN0YXJ0ZW4iLAogICAgInJlc3RhcnQ/IjoiTmV1c3RhcnQiCiAgfSwKICBoZWxwX2RlOgogICAgIkJlbnV0emVuIFNpZSBkaWUgTWF1cywgTGVlcnNjaGxhZywgZGllIEN1cnNvcnRhc3RlbiBsaW5rcy9yZWNodHMgb2RlciAiICsKICAgICJQYWdlIHVwL1BhZ2UgRG93biB6dW0gV2VjaHNlbG4gZGVyIFNlaXRlbiB1bmQgUyB1bmQgQiBmw7xyIGRpZSBTY2hyaWZ0Z3LDtnNzZS4iLAoKICBzdHJpbmdzX3BsOiB7CiAgICAic2xpZGUiOiJzbGFqZCIsCiAgICAiaGVscD8iOiJwb21vYz8iLAogICAgImNvbnRlbnRzPyI6InNwaXMgdHJlxZtjaT8iLAogICAgInRhYmxlIG9mIGNvbnRlbnRzIjoic3BpcyB0cmXFm2NpIiwKICAgICJUYWJsZSBvZiBDb250ZW50cyI6IlNwaXMgVHJlxZtjaSIsCiAgICAicmVzdGFydCBwcmVzZW50YXRpb24iOiJSZXN0YXJ0dWogcHJlemVudGFjasSZIiwKICAgICJyZXN0YXJ0PyI6InJlc3RhcnQ/IgogIH0sCiAgaGVscF9wbDoKICAgICJabWllbmlhaiBzbGFqZHkga2xpa2FqxIVjIG15c3rEhSwgbmFjaXNrYWrEhWMgc3BhY2rEmSwgc3RyemHFgmtpIGxld28vcHJhd28iICsKICAgICJsdWIgUGdVcCAvIFBnRG4uIFXFvHlqIGtsYXdpc3p5IFMgaSBCLCBhYnkgem1pZW5pxIcgcm96bWlhciBjemN6aW9ua2kuIiwKCiAgc3RyaW5nc19mcjogewogICAgInNsaWRlIjoicGFnZSIsCiAgICAiaGVscD8iOiJBaWRlIiwKICAgICJjb250ZW50cz8iOiJJbmRleCIsCiAgICAidGFibGUgb2YgY29udGVudHMiOiJ0YWJsZSBkZXMgbWF0acOocmVzIiwKICAgICJUYWJsZSBvZiBDb250ZW50cyI6IlRhYmxlIGRlcyBtYXRpw6hyZXMiLAogICAgInJlc3RhcnQgcHJlc2VudGF0aW9uIjoiUmVjb21tZW5jZXIgbCdleHBvc8OpIiwKICAgICJyZXN0YXJ0PyI6IkTDqWJ1dCIKICB9LAogIGhlbHBfZnI6CiAgICAiTmF2aWd1ZXogYXZlYyBsYSBzb3VyaXMsIGxhIGJhcnJlIGQnZXNwYWNlLCBsZXMgZmzDqGNoZXMgIiArCiAgICAiZ2F1Y2hlL2Ryb2l0ZSBvdSBsZXMgdG91Y2hlcyBQZyBVcCwgUGcgRG4uIFV0aWxpc2V6ICIgKwogICAgImxlcyB0b3VjaGVzIFMgZXQgQiBwb3VyIG1vZGlmaWVyIGxhIHRhaWxsZSBkZSBsYSBwb2xpY2UuIiwKCiAgc3RyaW5nc19odTogewogICAgInNsaWRlIjoib2xkYWwiLAogICAgImhlbHA/Ijoic2Vnw610c8OpZyIsCiAgICAiY29udGVudHM/IjoidGFydGFsb20iLAogICAgInRhYmxlIG9mIGNvbnRlbnRzIjoidGFydGFsb21qZWd5esOpayIsCiAgICAiVGFibGUgb2YgQ29udGVudHMiOiJUYXJ0YWxvbWplZ3l6w6lrIiwKICAgICJyZXN0YXJ0IHByZXNlbnRhdGlvbiI6ImJlbXV0YXTDsyDDumpyYWluZMOtdMOhc2EiLAogICAgInJlc3RhcnQ/Ijoiw7pqcmFpbmTDrXTDoXMiCiAgfSwKICBoZWxwX2h1OgogICAgIkF6IG9sZGFsYWsga8O2enRpIGzDqXBrZWTDqXNoZXoga2F0dGludHNvbiBheiBlZ8OpcnJlbCwgdmFneSAiICsKICAgICJoYXN6bsOhbGphIGEgc3rDs2vDtnosIGEgYmFsLCB2YWd5IGEgam9iYiBuecOtbCwgaWxsZXR2ZSBhIFBhZ2UgRG93biwgIiArCiAgICAiUGFnZSBVcCBiaWxsZW50ecWxa2V0LiBBeiBTIMOpcyBhIEIgYmlsbGVudHnFsWtrZWwgdsOhbHRvenRhdGhhdGphICIgKwogICAgImEgc3rDtnZlZyBtw6lyZXTDqXQuIiwKCiAgc3RyaW5nc19pdDogewogICAgInNsaWRlIjoicGFnLiIsCiAgICAiaGVscD8iOiJBaXV0byIsCiAgICAiY29udGVudHM/IjoiSW5kaWNlIiwKICAgICJ0YWJsZSBvZiBjb250ZW50cyI6ImluZGljZSIsCiAgICAiVGFibGUgb2YgQ29udGVudHMiOiJJbmRpY2UiLAogICAgInJlc3RhcnQgcHJlc2VudGF0aW9uIjoiUmljb21pbmNpYXJlIGxhIHByZXNlbnRhemlvbmUiLAogICAgInJlc3RhcnQ/IjoiSW5pemlvIgogIH0sCiAgaGVscF9pdDoKICAgICJOYXZpZ2FyZSBjb24gbW91c2UsIGJhcnJhIHNwYXppbywgZnJlY2NlIHNpbmlzdHJhL2Rlc3RyYSBvICIgKwogICAgIlBnVXAgZSBQZ0RuLiBVc2FyZSBTIGUgQiBwZXIgY2FtYmlhcmUgbGEgZGltZW5zaW9uZSBkZWkgY2FyYXR0ZXJpLiIsCgogIHN0cmluZ3NfZWw6IHsKICAgICJzbGlkZSI6Is+DzrXOu86vzrTOsSIsCiAgICAiaGVscD8iOiLOss6/zq7OuM61zrnOsTsiLAogICAgImNvbnRlbnRzPyI6Is+AzrXPgc65zrXPh8+MzrzOtc69zrE7IiwKICAgICJ0YWJsZSBvZiBjb250ZW50cyI6Is+Azq/Ovc6xzrrOsc+CIM+AzrXPgc65zrXPh86/zrzOrc69z4nOvSIsCiAgICAiVGFibGUgb2YgQ29udGVudHMiOiLOoM6vzr3Osc66zrHPgiDOoM61z4HOuc61z4fOv868zq3Ovc+Jzr0iLAogICAgInJlc3RhcnQgcHJlc2VudGF0aW9uIjoizrXPgM6xzr3Otc66zrrOr869zrfPg863IM+AzrHPgc6/z4XPg86vzrHPg863z4IiLAogICAgInJlc3RhcnQ/IjoizrXPgM6xzr3Otc66zrrOr869zrfPg863OyIKICB9LAogIGhlbHBfZWw6CiAgICAizqDOu86/zrfOs863zrjOtc6vz4TOtSDOvM61IM+Ezr8gzrrOu86vzrogz4TOv8+FIM+Azr/Ovc+EzrnOus65zr/PjSwgz4TOvyBzcGFjZSwgz4TOsSDOss6tzrvOtyDOsc+BzrnPg8+EzrXPgc6sL860zrXOvs65zqwsICIgKwogICAgIs6uIFBhZ2UgVXAgzrrOsc65IFBhZ2UgRG93bi4gzqfPgc63z4POuc68zr/PgM6/zrnOrs+Dz4TOtSDPhM6xIM+AzrvOrs66z4TPgc6xIFMgzrrOsc65IEIgzrPOuc6xIM69zrEgzrHOu867zqzOvs61z4TOtSAiICsKICAgICLPhM6/IM68zq3Os861zrjOv8+CIM+EzrfPgiDOs8+BzrHOvM68zrHPhM6/z4POtc65z4HOrM+CLiIsCgogIHN0cmluZ3NfamE6IHsKICAgICJzbGlkZSI6IuOCueODqeOCpOODiSIsCiAgICAiaGVscD8iOiLjg5jjg6vjg5ciLAogICAgImNvbnRlbnRzPyI6IuebruasoSIsCiAgICAidGFibGUgb2YgY29udGVudHMiOiLnm67mrKHjgpLooajnpLoiLAogICAgIlRhYmxlIG9mIENvbnRlbnRzIjoi55uu5qyhIiwKICAgICJyZXN0YXJ0IHByZXNlbnRhdGlvbiI6IuacgOWIneOBi+OCieWGjeeUnyIsCiAgICAicmVzdGFydD8iOiLmnIDliJ3jgYvjgokiCiAgfSwKICBoZWxwX2phOgogICAgICLjg57jgqbjgrnlt6bjgq/jg6rjg4Pjgq8g44O7IOOCueODmuODvOOCuSDjg7sg5bem5Y+z44Kt44O8ICIgKwogICAgICLjgb7jgZ/jga8gUGFnZSBVcCDjg7sgUGFnZSBEb3du44Gn5pON5L2c77yMIFMg44O7IELjgafjg5Xjgqnjg7Pjg4jjgrXjgqTjgrrlpInmm7QiLAoKICBzdHJpbmdzX3poOiB7CiAgICAic2xpZGUiOiLlubvnga/niYciLAogICAgImhlbHA/Ijoi5biu5YqpPyIsCiAgICAiY29udGVudHM/Ijoi5YaF5a65PyIsCiAgICAidGFibGUgb2YgY29udGVudHMiOiLnm67lvZUiLAogICAgIlRhYmxlIG9mIENvbnRlbnRzIjoi55uu5b2VIiwKICAgICJyZXN0YXJ0IHByZXNlbnRhdGlvbiI6IumHjeaWsOWQr+WKqOWxleekuiIsCiAgICAicmVzdGFydD8iOiLph43mlrDlkK/liqg/IgogIH0sCiAgaGVscF96aDoKICAgICLnlKjpvKDmoIfngrnlh7ssIOepuuagvOadoSwg5bem5Y+z566t5aS0LCBQZyBVcCDlkowgUGcgRG4g5a+86IiqLiAiICsKICAgICLnlKggUywgQiDmlLnlj5jlrZfkvZPlpKflsI8uIiwKCiAgc3RyaW5nc19ydTogewogICAgInNsaWRlIjoi0YHQu9Cw0LnQtCIsCiAgICAiaGVscD8iOiLQv9C+0LzQvtGJ0Yw/IiwKICAgICJjb250ZW50cz8iOiLRgdC+0LTQtdGA0LbQsNC90LjQtT8iLAogICAgInRhYmxlIG9mIGNvbnRlbnRzIjoi0L7Qs9C70LDQstC70LXQvdC40LUiLAogICAgIlRhYmxlIG9mIENvbnRlbnRzIjoi0J7Qs9C70LDQstC70LXQvdC40LUiLAogICAgInJlc3RhcnQgcHJlc2VudGF0aW9uIjoi0L/QtdGA0LXQt9Cw0L/Rg9GB0YLQuNGC0Ywg0L/RgNC10LfQtdC90YLQsNGG0LjRjiIsCiAgICAicmVzdGFydD8iOiLQv9C10YDQtdC30LDQv9GD0YHQuj8iCiAgfSwKICBoZWxwX3J1OgogICAgItCf0LXRgNC10LzQtdGJ0LDQudGC0LXRgdGMINC60LvQuNC60LDRjyDQvNGL0YjQutC+0LksINC40YHQv9C+0LvRjNC30YPRjyDQutC70LDQstC40YjRgyDQv9GA0L7QsdC10LssINGB0YLRgNC10LvQutC4IiArCiAgICAi0LLQu9C10LLQvi/QstC/0YDQsNCy0L4g0LjQu9C4IFBnIFVwINC4IFBnIERuLiDQmtC70LDQstC40YjQuCBTINC4IEIg0LzQtdC90Y/RjtGCINGA0LDQt9C80LXRgCDRiNGA0LjRhNGC0LAuIiwKCiAgc3RyaW5nc19zdjogewogICAgInNsaWRlIjoic2lkYSIsCiAgICAiaGVscD8iOiJoasOkbHAiLAogICAgImNvbnRlbnRzPyI6ImlubmVow6VsbCIsCiAgICAidGFibGUgb2YgY29udGVudHMiOiJpbm5laMOlbGxzZsO2cnRlY2tuaW5nIiwKICAgICJUYWJsZSBvZiBDb250ZW50cyI6IklubmVow6VsbHNmw7ZydGVja25pbmciLAogICAgInJlc3RhcnQgcHJlc2VudGF0aW9uIjoidmlzYSBwcmVzZW50YXRpb25lbiBmcsOlbiBiw7ZyamFuIiwKICAgICJyZXN0YXJ0PyI6ImLDtnJqYSBvbSIKICB9LAogIGhlbHBfc3Y6CiAgICAiQmzDpGRkcmEgbWVkIGV0dCBrbGljayBtZWQgdsOkbnN0cmEgbXVza25hcHBlbiwgbWVsbGFuc2xhZ3N0YW5nZW50ZW4sICIgKwogICAgInbDpG5zdGVyLSBvY2ggaMO2Z2VycGlsdGFuZ2VudGVybmEgZWxsZXIgdGFuZ2VudGVybmEgUGcgVXAsIFBnIERuLiAiICsKICAgICJBbnbDpG5kIHRhbmdlbnRlcm5hIFMgb2NoIEIgZsO2ciBhdHQgw6RuZHJhIHRleHRlbnMgc3Rvcmxlay4iLAoKICBzdHJpbmdzOiB7IH0sCgogIGxvY2FsaXplOiBmdW5jdGlvbiAoc3JjKSB7CiAgICBpZiAoc3JjID09ICIiKQogICAgICByZXR1cm4gc3JjOwoKICAgICAvLyB0cnkgZnVsbCBsYW5ndWFnZSBjb2RlLCBlLmcuIGVuLVVTCiAgICAgdmFyIHMsIGxvb2t1cCA9IHczY19zbGlkeS5zdHJpbmdzW3czY19zbGlkeS5sYW5nXTsKCiAgICAgaWYgKGxvb2t1cCkKICAgICB7CiAgICAgICBzID0gbG9va3VwW3NyY107CgogICAgICAgaWYgKHMpCiAgICAgICAgcmV0dXJuIHM7CiAgICAgfQoKICAgICAvLyBzdHJpcCBjb3VudHJ5IGNvZGUgc3VmZml4LCBlLmcuCiAgICAgLy8gdHJ5IGVuIGlmIHVuZGVmaW5lZCBmb3IgZW4tVVMKICAgICB2YXIgbGcgPSB3M2Nfc2xpZHkubGFuZy5zcGxpdCgiLSIpOwoKICAgICBpZiAobGcubGVuZ3RoID4gMSkKICAgICB7CiAgICAgICBsb29rdXAgPSB3M2Nfc2xpZHkuc3RyaW5nc1tsZ1swXV07CgogICAgICAgaWYgKGxvb2t1cCkKICAgICAgIHsKICAgICAgICAgcyA9IGxvb2t1cFtzcmNdOwoKICAgICAgICAgaWYgKHMpCiAgICAgICAgICByZXR1cm4gczsKICAgICAgIH0KICAgICB9CgogICAgIC8vIG90aGVyd2lzZSBzdHJpbmcgYXMgaXMKICAgICByZXR1cm4gc3JjOwogIH0sCgogIGluaXRfbG9jYWxpemF0aW9uOiBmdW5jdGlvbiAoKSB7CiAgICB2YXIgaTE4biA9IHczY19zbGlkeTsKICAgIHZhciBoZWxwX3RleHQgPSB3M2Nfc2xpZHkuaGVscF90ZXh0OwoKICAgIC8vIGVhY2ggc3VjaCBsYW5ndWFnZSBhcnJheSBpcyBkZWNsYXJlZCBpbiB0aGUgbG9jYWxpemUgYXJyYXkKICAgIC8vIHRoaXMgaXMgdXNlZCBhcyBpbiAgdzNjX3NsaWR5LmxvY2FsaXplKCJmb28iKTsKICAgIHRoaXMuc3RyaW5ncyA9IHsKICAgICAgImVzIjp0aGlzLnN0cmluZ3NfZXMsCiAgICAgICJjYSI6dGhpcy5zdHJpbmdzX2NhLAogICAgICAiY3MiOnRoaXMuc3RyaW5nc19jcywKICAgICAgIm5sIjp0aGlzLnN0cmluZ3NfbmwsCiAgICAgICJkZSI6dGhpcy5zdHJpbmdzX2RlLAogICAgICAicGwiOnRoaXMuc3RyaW5nc19wbCwKICAgICAgImZyIjp0aGlzLnN0cmluZ3NfZnIsCiAgICAgICJodSI6dGhpcy5zdHJpbmdzX2h1LAogICAgICAiaXQiOnRoaXMuc3RyaW5nc19pdCwKICAgICAgImVsIjp0aGlzLnN0cmluZ3NfZWwsCiAgICAgICJqcCI6dGhpcy5zdHJpbmdzX2phLAogICAgICAiemgiOnRoaXMuc3RyaW5nc196aCwKICAgICAgInJ1Ijp0aGlzLnN0cmluZ3NfcnUsCiAgICAgICJzdiI6dGhpcy5zdHJpbmdzX3N2CiAgICB9LAoKICAgIGkxOG4uc3RyaW5nc19lc1toZWxwX3RleHRdID0gaTE4bi5oZWxwX2VzOwogICAgaTE4bi5zdHJpbmdzX2NhW2hlbHBfdGV4dF0gPSBpMThuLmhlbHBfY2E7CiAgICBpMThuLnN0cmluZ3NfY3NbaGVscF90ZXh0XSA9IGkxOG4uaGVscF9jczsKICAgIGkxOG4uc3RyaW5nc19ubFtoZWxwX3RleHRdID0gaTE4bi5oZWxwX25sOwogICAgaTE4bi5zdHJpbmdzX2RlW2hlbHBfdGV4dF0gPSBpMThuLmhlbHBfZGU7CiAgICBpMThuLnN0cmluZ3NfcGxbaGVscF90ZXh0XSA9IGkxOG4uaGVscF9wbDsKICAgIGkxOG4uc3RyaW5nc19mcltoZWxwX3RleHRdID0gaTE4bi5oZWxwX2ZyOwogICAgaTE4bi5zdHJpbmdzX2h1W2hlbHBfdGV4dF0gPSBpMThuLmhlbHBfaHU7CiAgICBpMThuLnN0cmluZ3NfaXRbaGVscF90ZXh0XSA9IGkxOG4uaGVscF9pdDsKICAgIGkxOG4uc3RyaW5nc19lbFtoZWxwX3RleHRdID0gaTE4bi5oZWxwX2VsOwogICAgaTE4bi5zdHJpbmdzX2phW2hlbHBfdGV4dF0gPSBpMThuLmhlbHBfamE7CiAgICBpMThuLnN0cmluZ3NfemhbaGVscF90ZXh0XSA9IGkxOG4uaGVscF96aDsKICAgIGkxOG4uc3RyaW5nc19ydVtoZWxwX3RleHRdID0gaTE4bi5oZWxwX3J1OwogICAgaTE4bi5zdHJpbmdzX3N2W2hlbHBfdGV4dF0gPSBpMThuLmhlbHBfc3Y7CgogICAgdzNjX3NsaWR5LmxhbmcgPSBkb2N1bWVudC5ib2R5LnBhcmVudE5vZGUuZ2V0QXR0cmlidXRlKCJsYW5nIik7CgogICAgaWYgKCF3M2Nfc2xpZHkubGFuZykKICAgICAgdzNjX3NsaWR5LmxhbmcgPSBkb2N1bWVudC5ib2R5LnBhcmVudE5vZGUuZ2V0QXR0cmlidXRlKCJ4bWw6bGFuZyIpOwoKICAgIGlmICghdzNjX3NsaWR5LmxhbmcpCiAgICAgIHczY19zbGlkeS5sYW5nID0gImVuIjsKICB9Cn07CgovLyBoYWNrIGZvciBiYWNrIGJ1dHRvbiBiZWhhdmlvcgppZiAodzNjX3NsaWR5LmllNiB8fCB3M2Nfc2xpZHkuaWU3KQp7CiAgZG9jdW1lbnQud3JpdGUoIjxpZnJhbWUgaWQ9J2hpc3RvcnlGcmFtZScgIiArCiAgInNyYz0namF2YXNjcmlwdDpcIjxodG1sIisiPjwvIisiaHRtbD5cIicgIiArCiAgImhlaWdodD0nMScgd2lkdGg9JzEnICIgKwogICJzdHlsZT0ncG9zaXRpb246YWJzb2x1dGU7bGVmdDotODAwcHgnPjwvaWZyYW1lPiIpOwp9CgovLyBhdHRhY2ggZXZlbnQgbGlzdGVuZXJzIGZvciBpbml0aWFsaXphdGlvbgp3M2Nfc2xpZHkuc2V0X3VwKCk7CgovLyBoaWRlIHRoZSBzbGlkZXMgYXMgc29vbiBhcyBib2R5IGVsZW1lbnQgaXMgYXZhaWxhYmxlCi8vIHRvIHJlZHVjZSBhbm5veWluZyBzY3JlZW4gbWVzcyBiZWZvcmUgdGhlIG9ubG9hZCBldmVudApzZXRUaW1lb3V0KHczY19zbGlkeS5oaWRlX3NsaWRlcywgNTApOwoK"></script>
  <script src="data:application/javascript;base64,KGZ1bmN0aW9uKCkgewogIGlmICghd2luZG93LnczY19zbGlkeSkgcmV0dXJuOwogIGlmICghd2luZG93LlNoaW55KSByZXR1cm47CiAgaWYgKCF3aW5kb3cuJCkgcmV0dXJuOwogIC8vIHdoZW5ldmVyIGEgc2xpZGUgY2hhbmdlcywgdGVsbCBzaGlueSB0byByZWNhbGN1bGF0ZSB3aGF0IGlzIGRpc3BsYXllZAogIHdpbmRvdy53M2Nfc2xpZHkuYWRkX29ic2VydmVyKGZ1bmN0aW9uIChzbGlkZV9udW0pIHsKICAgIC8vIHNsaWRlX251bSBzdGFydHMgYXQgcG9zaXRpb24gMQogICAgJCh3M2Nfc2xpZHkuc2xpZGVzW3NsaWRlX251bSAtIDFdKS50cmlnZ2VyKCJzaG93biIpOwogIH0pOwp9KSgpCg=="></script>
</head>
<body>
<div class="slide titlepage">
  <h1 class="title">R: the Periodogram</h1>
  <p class="author">
36-350 – Statistical Computing
  </p>
  <p class="date">Week 10 – Spring 2021</p>
</div>
<div id="spectral-analysis" class="slide section level1">
<h1>Spectral Analysis</h1>
<p>To keep it brief for the purposes of this class, <em>spectral analysis</em> is the decomposition of data (here, time-series data) into a set of basis functions. For time-series data, that basis is generally the <em>cosine basis</em>. (Other bases are useful too, like wavelet bases, but the cosine basis is the most often used.)</p>
<p>Assume we have a uniformly sampled, discrete time series of length <span class="math inline">\(n\)</span>. The sampling interval is <span class="math inline">\(\Delta t\)</span>, meaning that data are gathered at times <span class="math display">\[
\{ 0, \Delta t, 2 \Delta t, \ldots, (n-1) \Delta t \} \,.
\]</span> (We can always by fiat declare that the first measurement is made at <span class="math inline">\(t = 0\)</span>.) Further, let <span class="math inline">\(x_t\)</span> be the measurement at time <span class="math inline">\(t\)</span>. Spectral analysis with a cosine basis is implicitly regression, fitting the following model to the data: <span class="math display">\[
a_0 + a_1 \cos\left(\frac{2\pi t}{n}\right) + b_1 \sin\left(\frac{2\pi t}{n}\right) + a_2 \cos\left(\frac{4\pi t}{n}\right) + b_2 \sin\left(\frac{4\pi t}{n}\right) + \cdots + \\
a_{n/2-1} \cos\left(\frac{(n/2-1)\pi t}{n}\right) + b_{n/2-1} \sin\left(\frac{(n/2-1)\pi t}{n}\right) + a_{n/2}\cos(\pi t) \,.
\]</span> <span class="math inline">\(a_0\)</span> is simply the sample mean of all the measurements. For <span class="math inline">\(m = \{1,\ldots,n/2-1\}\)</span>, we combine <span class="math inline">\(a_m\)</span> and <span class="math inline">\(b_m\)</span> into one term: <span class="math display">\[
A_m = \sqrt{a_m^2+b_m^2}
\]</span> A plot of <span class="math inline">\(A_m\)</span> as a function of frequency (more on frequency below) is a <em>periodogram</em>.</p>
<p>Are there many details left out here? Yep. The goal is for you to know what a periodogram <em>is</em> and how to create one in <code>R</code>. More detail can be had in courses like Professor Shalizi’s <em>Data Over Space and Time</em> (36-467).</p>
</div>
<div id="cosine-basis" class="slide section level1">
<h1>Cosine Basis</h1>
<p>Let’s step back for one second here and show a simple example of what the periodogram is showing us when we decompose a time series. Below we show two sine waves of different frequency, the dashed wave being of higher frequency than the solid wave.</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a>t <span class="ot">=</span> <span class="fu">seq</span>(<span class="sc">-</span><span class="dv">2</span><span class="sc">*</span>pi,<span class="dv">2</span><span class="sc">*</span>pi,pi<span class="sc">/</span><span class="dv">100</span>)</span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a>wave<span class="fl">.1</span> <span class="ot">=</span> <span class="fu">sin</span>(<span class="dv">3</span><span class="sc">*</span>t)</span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a>wave<span class="fl">.2</span> <span class="ot">=</span> <span class="fu">sin</span>(<span class="dv">10</span><span class="sc">*</span>t)</span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a><span class="fu">plot</span>(t,wave<span class="fl">.1</span>,<span class="at">type=</span><span class="st">&quot;l&quot;</span>,<span class="at">ylim=</span><span class="fu">c</span>(<span class="sc">-</span><span class="dv">1</span>,<span class="dv">1</span>)); <span class="fu">abline</span>(<span class="at">h=</span><span class="dv">0</span>,<span class="at">lty=</span><span class="dv">3</span>)</span>
<span id="cb1-5"><a href="#cb1-5" aria-hidden="true" tabindex="-1"></a><span class="fu">lines</span>(t,wave<span class="fl">.2</span>,<span class="at">lty=</span><span class="dv">2</span>)</span></code></pre></div>
<p><img src="data:image/png;base64,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BACugQDANRAAuAYCANdAAOAaCABcAwGAayAAcA0EAK6BAMA1EAC4BgIA10AA4BoIAFwDAYBrIABwDQQAroEAwDUQALgGAgDXQADgGggAXAMBgGsgAHANBACugQAt8OnlpUewWCDA/Fn93D259BgWCwSYP3cdBKgGBJg/EKAiEGD+QICKQID5AwEqAgHmzib9t7y49ECWCQSYOxCgKhBg7kCAqkCA+YPXABWBAPMHAlQEAswfCFARCDB/IEBFIMD8gQAVgQDzBwJUBALMHwhQEQgwfyBARSDA/IEAFYEA8wcCVAQCzJ+NAPf/vPQglgoEmD8fr/FdoGpAgPmz+r4XAFdBVYAADbD6YSPAN5cexTKBAMA1EAC4BgIA10AA4BoIAFwDAYBrIABwDQQAroEAwDUQALgGAgDXQADgGggAXAMBgGsgAHANBACugQDANRAAuAYCANdAAOAaCABcAwGAayAAcA0EAK6BAMA1EAC4BgIA10AA4BoIAFwDAYBrIABwDQQAroEAwDUQALgGAgDXQADgGggAXAMBgGsgAHANBACugQDANRAAuAYCANdAAOAaCABcAwGAayAAcA0EAK6BAMA1/x/BZtvARD9qqQAAAABJRU5ErkJggg==" width="384" style="display: block; margin: auto;" /></p>
<p>We can combine these together with different weights to create a complex, periodic wave form. The weights correspond to two of the <span class="math inline">\(b\)</span> coefficients in the cosine basis model. When we do a periodogram, what we do is estimate these coefficients; they will be estimated with error, because the observed values are random variables (i.e., they are affected by random variation, like the uncertainty in the measurement of data at each time).</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a>wave <span class="ot">=</span> <span class="fl">0.6</span><span class="sc">*</span>wave<span class="fl">.1</span> <span class="sc">+</span> <span class="fl">0.35</span><span class="sc">*</span>wave<span class="fl">.2</span></span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true" tabindex="-1"></a><span class="fu">plot</span>(t,wave,<span class="at">type=</span><span class="st">&quot;l&quot;</span>,<span class="at">ylim=</span><span class="fu">c</span>(<span class="sc">-</span><span class="dv">1</span>,<span class="dv">1</span>)); <span class="fu">abline</span>(<span class="at">h=</span><span class="dv">0</span>,<span class="at">lty=</span><span class="dv">3</span>)</span></code></pre></div>
<p><img src="data:image/png;base64,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0raTDH9PsHRYB6heO4yxO8+StQDLL1f3yx353VthpGJv7q6ISipN9lQI7bD2yF48j7A7z5K3AACBIACYBgHANAgApkEAMA0CgGkQAEyDAGAaBADTIACYBgHANAgApkEAMA0CgGkQAEyDAGAaBADTIACYBgHANAgApkEAMA0CgGkQAEyDAGAaBADTIACYBgHANAgApkEAMA0CgGkQAEyDAGAaBADTIACYBgHANAgApkEAMA0CgGkQAEyDAGAaBADTIACYBgHANAgApkEAMA0CgGkQAEyDAGAaBADTIACYBgHANAgApkEAMA0CgGkQIAduX449gsmCAOmz+LV4NPYYJgsCpM9NgQDRQID0QYCIIED6IEBEECB9ECAiCJA6ZfmveDH2QKYJAqQOAkQFAVIHAaKCAOnDOUBEECB9ECAiCJA+CBARBEgfBIgIAqQPAkQEAdIHASKCAOmDABFBgPRBgIggQPogQEQQIH0QICIIkD6lAHf/HHsQUwUB0ufzJfcCRQMB0mfxYyUAR0FRQIAMWPxUCvD92KOYJggApkEAMA0CgGkQAEyDAGAaBADTIACYBgHANAgApkEAMA0CgGkQAEyDAGAaBADTIACYBgHANAgApkEAMA0CgGkQAEyDAGAaBADTIACYBgHANAgApkEAMA0CgGkQAEyDAGAaBADTIACYBgHANAgApkEAMA0CgGkQAEyDAGAaBADTIACYBgHANAgApkEAMA0CgGkQAEyDAGAaBADTIACYBgHANAgApvl/L2VxMRD3XMIAAAAASUVORK5CYII=" width="384" style="display: block; margin: auto;" /></p>
</div>
<div id="cosine-basis-periodogram" class="slide section level1">
<h1>Cosine Basis: Periodogram</h1>
<p>In the second plot above, there was no random variation (the measurement uncertainty is zero!). So one would expect to recover the coefficients perfectly. You kinda do, but…</p>
<div class="sourceCode" id="cb3"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a>s <span class="ot">=</span> <span class="fu">spectrum</span>(wave,<span class="at">log=</span><span class="fu">c</span>(<span class="st">&quot;no&quot;</span>))</span></code></pre></div>
<p><img src="data:image/png;base64,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" width="384" style="display: block; margin: auto;" /> So what is going on here? We can see that two frequencies are recovered, but the y-axis measurements are not 0.6 and 0.35 (and the ratio of the two peaks is not 0.6/0.35). Two quick points: (a) a periodogram is scaled such that the total area under the curve equals the sample variance of the observed data, and (b) the time series is not infinite, nor does it encompass an integer number of cycles for both the waves, so the periodogram cannot perfectly recover the input coefficients.</p>
</div>
<div id="more-about-frequency" class="slide section level1">
<h1>More About Frequency</h1>
<p>Let’s look at the output of <code>spectrum</code>:</p>
<div class="sourceCode" id="cb4"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a><span class="fu">names</span>(s)</span></code></pre></div>
<pre><code>##  [1] &quot;freq&quot;      &quot;spec&quot;      &quot;coh&quot;       &quot;phase&quot;     &quot;kernel&quot;    &quot;df&quot;       
##  [7] &quot;bandwidth&quot; &quot;n.used&quot;    &quot;orig.n&quot;    &quot;series&quot;    &quot;snames&quot;    &quot;method&quot;   
## [13] &quot;taper&quot;     &quot;pad&quot;       &quot;detrend&quot;   &quot;demean&quot;</code></pre>
<div class="sourceCode" id="cb6"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a><span class="fu">min</span>(s<span class="sc">$</span>freq)</span></code></pre></div>
<pre><code>## [1] 0.002469136</code></pre>
<div class="sourceCode" id="cb8"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a><span class="fu">max</span>(s<span class="sc">$</span>freq)</span></code></pre></div>
<pre><code>## [1] 0.4987654</code></pre>
<p>In the spectral plot on the last slide, the x-axis values are <code>freq</code> (for frequency) and <code>spec</code> (for spectrum).</p>
<p>Frequency can be a confusing quantity. By definition, it is the number of cycles per unit time. For instance, if the unit time is one year, a wave with frequency 2 is a wave that cycles two times during one year, i.e., a wave that has two peaks and two troughs.</p>
</div>
<div id="more-about-frequency-1" class="slide section level1">
<h1>More About Frequency</h1>
<p>However, <code>R</code> does not always know what the unit time is, or more to the point, how much time separates each measurement. If you just specify a vector like <code>wave</code>, <code>R</code> doesn’t know if each element is separated by a month, a year, or a century. (<code>R</code> does know the unit time <em>if the data input into</em> <code>spectrum</code> <em>are of type</em> <code>ts</code>, a point we will return to below.) So <code>R</code> will:</p>
<ul>
<li>assume that the unit time is whatever amount of time separates one measurement from the next one;</li>
<li>determine the number of data points <span class="math inline">\(n\)</span> in the time series;</li>
<li>determine the smallest number <span class="math inline">\(n&#39; \geq n\)</span> such that <span class="math inline">\(n&#39; = 2^x 3^y 5^z\)</span>;</li>
<li>set the smallest frequency to be <span class="math inline">\(1/n&#39;\)</span> (corresponding to approximately one cycle over the total length of time for the time series); and</li>
<li>set the largest frequency to be <span class="math inline">\((n&#39;-1)/(2n&#39;) \approx 1/2\)</span> (approximately one cycle in the time represented by two measurements).</li>
</ul>
<p>In our example, the number of measurements is <span class="math inline">\(n = 401\)</span>, so <span class="math inline">\(n&#39; = 405 = 2^0 3^4 5^1\)</span>, and the minimum frequency is <span class="math inline">\(1/405\)</span> (matching <code>min(s$freq)</code>) and the maximum frequency is <span class="math inline">\(404/(2 \cdot 405)\)</span> (matching <code>max(s$freq)</code>).</p>
<p>To convert a given frequency <span class="math inline">\(f\)</span> to a particular length of time, multiply <span class="math inline">\(1/f\)</span> by <span class="math inline">\(\Delta t\)</span>, the time that elapses between one measurement and the next one (assuming you know what <span class="math inline">\(\Delta t\)</span> is, even if <code>R</code> does not).</p>
</div>
<div id="periodogram-example" class="slide section level1">
<h1>Periodogram: Example</h1>
<p>We conclude with an example. We will use the Maine unemployment data again. Note that we don’t have to cast the input data so as to be an object of the <code>ts</code> class, because the periodogram doesn’t much care about the initial time of measurement or the sampling interval. (You yourself can convert a <code>frequency</code> output by <code>spectrum()</code> into a time-related quantity.) However, if you do cast your data, the output <code>frequency</code> values will no longer be limited to the domain <span class="math inline">\((0,n/2]\)</span>, and you may be able to more easily interpret results.</p>
<div class="sourceCode" id="cb10"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb10-1"><a href="#cb10-1" aria-hidden="true" tabindex="-1"></a>dat <span class="ot">=</span> <span class="fu">read.table</span>(<span class="fu">url</span>(<span class="st">&quot;http://www.stat.cmu.edu/~mfarag/350/Maine.dat&quot;</span>),<span class="at">header=</span><span class="cn">TRUE</span>)</span>
<span id="cb10-2"><a href="#cb10-2" aria-hidden="true" tabindex="-1"></a><span class="fu">spectrum</span>(dat,<span class="at">log=</span><span class="st">&quot;no&quot;</span>)</span></code></pre></div>
<p><img src="data:image/png;base64,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7PrLhunRexvru8ChGKE7NEaPizqmVMUGAUaugjomVcUGAUaugjomVcUGAUaugjomVcUGAUaugjomVcUGAUaugjomVcUGAUaugjomVcUGAUaugjomVcUGAUaugjomVcUGAUaugjomVcUGAUaugjomVcUGAUaugjomVcUGAUaugjomVcUGAUaugjomVcUGAUaugjomVcUGAUaugjomVcUGAUaugjomVcUGAUaugjomVcUGAUaugjomVcXGIwEAhgABIGgQAIIGASBoEACCBgEgaBAAggYBIGgQAIIGASBoEACCBgEgaBAAggYBIGgQAIIGASBoEACCBgEgaBAAggYBIGgQAIIGASBoEACCBgEgaBAAggYBIGgQAIJmqgI8XM2jaPbsg1tUX1UIvr149FvXKhrqWL87jqLooPthNB3H7UtRx/mXIetIuJ9Hl0NVsX4VFXStpMpEBbiZpwc8+7NLVF9VCOKvvbsA9XXkMVH0fLA6ipYz69putn3n3150bpv1VYjCQxNgVX/IDVF9VSFYL6LuAtTXIcVERwPV0TK01fIAAAynSURBVN+Zc+t3vhiyCvm7CkQA4fxhfC28O620woaovqoQJI2nqwD1dSQx7zdp1OzNIHVslnHRovfzP3HU4y69oK3f+apz22yqYjlEuy+YpADL/BcT7fDENqqvKmJuk+txVwHq61gV530R1eUSUF9HHJCpFbeuTpJt+87TPkqnRtpUxaKHvmg9UxSg/OnE4Eo5eTVE9VVFPByLT0PRs9Ou33tDHYuyvXQ6jKY64n/nZnU7h277zsVo6d+6CdBURRzX6fq1hSkKEJ9R8kOWvpltUX1VkfYdLroPgu0+q5RqsDoWnZrntjqEXh27KU1VxHHdRknNTFGAldQr0H67hqi+qoh/0dnzLz3MAtl91m4CWNURV9HlULbUEZ+yT7r205uqiOMuH8R07tPXHWqoZaICFN3AZUWAuqi+qthsvooG2YsAFp911WkMYFHH+t28c+tsqCPtoXQXoLaKZTT7PpsDejZAV2iKAshfwUodEzVE9VVFRncBrD5rxwHq1joWydz6RfsattWxSD5/RwGaqlhIs6ADDAYQYKcCiNsNHSeBLAQ4uOjScBrryAKGE0BMCyWzuQ9XUad5vxoQYJcCdL7dtq2O9b8cv5x3PHU21ZGPYIYTQLpELnu4N1kBAXYoQHJ2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" width="384" style="display: block; margin: auto;" /> What did <code>spectrum()</code> find? Well, first of all, it found the low-frequency trend. <code>spectum()</code> by default removes a linear trend, but the trend in the Maine unemployment data is not linear, so <code>spectrum()</code> picked up on the residual trend. And as you might guess, it also detected the seasonality.</p>
</div>
<div id="periodogram-example-1" class="slide section level1">
<h1>Periodogram: Example</h1>
<p>Let’s try using <code>decompose()</code> to remove the non-linear trend and the seasonality before sending the residual signal to spectrum:</p>
<div class="sourceCode" id="cb11"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb11-1"><a href="#cb11-1" aria-hidden="true" tabindex="-1"></a>maine.ts <span class="ot">=</span> <span class="fu">ts</span>(dat,<span class="at">start=</span><span class="fu">c</span>(<span class="dv">1996</span>,<span class="dv">1</span>),<span class="at">frequency=</span><span class="dv">12</span>)</span>
<span id="cb11-2"><a href="#cb11-2" aria-hidden="true" tabindex="-1"></a>d <span class="ot">=</span> <span class="fu">decompose</span>(maine.ts)</span>
<span id="cb11-3"><a href="#cb11-3" aria-hidden="true" tabindex="-1"></a>random <span class="ot">=</span> d<span class="sc">$</span>random</span>
<span id="cb11-4"><a href="#cb11-4" aria-hidden="true" tabindex="-1"></a>random <span class="ot">=</span> random[<span class="fu">is.na</span>(random)<span class="sc">==</span><span class="cn">FALSE</span>] <span class="co"># this converts random to numeric implicitly</span></span>
<span id="cb11-5"><a href="#cb11-5" aria-hidden="true" tabindex="-1"></a>s <span class="ot">=</span> <span class="fu">spectrum</span>(random,<span class="at">log=</span><span class="st">&quot;no&quot;</span>)</span></code></pre></div>
<p><img src="data:image/png;base64,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" width="384" style="display: block; margin: auto;" /></p>
<div class="sourceCode" id="cb12"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb12-1"><a href="#cb12-1" aria-hidden="true" tabindex="-1"></a>w <span class="ot">=</span> <span class="fu">which.max</span>(s<span class="sc">$</span>spec)</span>
<span id="cb12-2"><a href="#cb12-2" aria-hidden="true" tabindex="-1"></a>(<span class="at">f =</span> s<span class="sc">$</span>freq[w])</span></code></pre></div>
<pre><code>## [1] 0.1</code></pre>
<p>The frequency is 0.1; given what we said at the bottom of Slide 6, we know this corresponds to a timescale of <span class="math inline">\(1/f \cdot \Delta t = 1/0.1 \cdot 1~{\rm month} = 10~{\rm months}\)</span>. (We know that each measurement is separated by one month, even if <code>R</code> does not.) This is not exactly one year, but is consistent with the idea that improperly modeled seasonality is a dominant component of the residuals (which keeping in mind that there may be other components as well).</p>
<p>(Systematic effects may be the bane of your existence when using and interpreting the outout of <code>spectrum()</code>. Ask me at some point how many times I’ve “detected the Earth” when looking at astronomical time series… Actually, let’s just say many times.)</p>
</div>

  <!-- dynamically load mathjax for compatibility with self-contained -->
  <script>
    (function () {
      var script = document.createElement("script");
      script.type = "text/javascript";
      script.src  = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML";
      document.getElementsByTagName("head")[0].appendChild(script);
    })();
  </script>

</body>
</html>
